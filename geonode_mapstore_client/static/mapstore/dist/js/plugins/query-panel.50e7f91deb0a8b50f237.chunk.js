(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[38973],{243120:(e,t,r)=>{var n={"./cesium.js":[61133,17621,40271,65792,92322,29379,45477,27962,66287,23474,50172,88696,65794,89437],"./leaflet.js":[48507,17621,96259,45243,42201,51410,84766,66287,24226,23474,88181,35701,83436,49967,37161],"./openlayers.js":[434637,17621,96259,18672,52043,15265,40271,92322,47202,69141,51554,49414,85828,72445,37974,54678,95773,38225,52210,1577,53563,21611,24372,62366,55211,66287,24226,23474,93546,13581,39151,6909,3498,84590,5904,16037],"./sink.js":[871405,5442]};function o(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((()=>r(o)))}o.keys=()=>Object.keys(n),o.id=243120,e.exports=o},604206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>n,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>l,uB:()=>c,Rh:()=>p,G_:()=>f,vU:()=>y,Vw:()=>d,KD:()=>m,uj:()=>b,lo:()=>v,Yf:()=>g,fo:()=>h,PY:()=>O,bp:()=>w,oJ:()=>E,k4:()=>P,sc:()=>S,Li:()=>j});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",s="DRAW:DRAWING_FEATURES",c="DRAW:SET_SNAPPING_LAYER",p="DRAW:SNAPPING_IS_LOADING",f="DRAW:TOGGLE_SNAPPING",y="DRAW:SET_SNAPPING_CONFIG";function d(e,t,r,n,o){return{type:a,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function m(){return{type:u,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function b(){return{type:s,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function v(){return{type:l}}function g(e,t,r,o,i,a){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:a}}function h(e,t){return{type:o,geometry:e,owner:t}}function O(e){return{type:i,currentStyle:e}}var w=function(e){return g("clean","",e,[],{})};function E(){return{type:f}}function P(e){return{type:c,snappingLayer:e}}function S(){return{type:p}}function j(e,t,r){return{type:y,value:e,prop:t,pluginCfg:r}}},433528:(e,t,r)=>{"use strict";r.d(t,{gJ:()=>n,Oj:()=>o,jp:()=>i,CM:()=>a,DU:()=>l,aO:()=>u,v6:()=>s,K8:()=>c,IN:()=>p,zh:()=>f,AH:()=>y,Ub:()=>d,_9:()=>m,JB:()=>b,oh:()=>v,AY:()=>g,yi:()=>h,SW:()=>O,Hk:()=>w,iQ:()=>E,dY:()=>P,$:()=>S,_u:()=>j,gG:()=>F,DI:()=>T,dZ:()=>x,qw:()=>C,f$:()=>D,bZ:()=>R,$O:()=>I,sF:()=>N,Gk:()=>_,vO:()=>L,ut:()=>A,MK:()=>q,VV:()=>M,B8:()=>k,VM:()=>G,a3:()=>U,Xp:()=>B,DA:()=>Z,sK:()=>z,r:()=>V,iB:()=>W,WB:()=>H,vm:()=>$,EH:()=>Q,Yd:()=>Y,Hg:()=>X,Lz:()=>J,ye:()=>K,Jb:()=>ee,d:()=>te,fT:()=>re,Ib:()=>ne,UB:()=>oe,Uh:()=>ie,QT:()=>ae,oL:()=>le,Ap:()=>ue,KD:()=>se,Z_:()=>ce,Vw:()=>pe,sY:()=>fe,kA:()=>ye,gr:()=>de,pX:()=>me,F5:()=>be,MO:()=>ve,dq:()=>ge,DY:()=>he,oO:()=>Oe,uF:()=>we,a8:()=>Ee,Pv:()=>Pe,an:()=>Se,lg:()=>je,nY:()=>Fe,nG:()=>Te,lx:()=>xe,$S:()=>Ce,gc:()=>De,Uz:()=>Re,fO:()=>Ie,$E:()=>Ne,cE:()=>_e,JK:()=>Le,YV:()=>Ae,t9:()=>qe,YG:()=>Me,HT:()=>ke,MY:()=>Ge,ve:()=>Ue,hB:()=>Be,Ox:()=>Ze,zd:()=>ze,aT:()=>Ve,VH:()=>We,Yb:()=>He,Jr:()=>$e,pP:()=>Qe,gL:()=>Ye,dM:()=>Xe});var n="FEATUREGRID:SET_UP",o="FEATUREGRID:SELECT_FEATURES",i="FEATUREGRID:DESELECT_FEATURES",a="FEATUREGRID:CLEAR_SELECTION",l="FEATUREGRID:SET_SELECTION_OPTIONS",u="FEATUREGRID:TOGGLE_MODE",s="FEATUREGRID:TOGGLE_FEATURES_SELECTION",c="FEATUREGRID:FEATURES_MODIFIED",p="FEATUREGRID:NEW_FEATURE",f="FEATUREGRID:SAVE_CHANGES",y="FEATUREGRID:SAVING",d="FEATUREGRID:START_EDITING_FEATURE",m="FEATUREGRID:START_DRAWING_FEATURE",b="FEATUREGRID:DELETE_GEOMETRY",v="FEATUREGRID:DELETE_GEOMETRY_FEATURE",g="FEATUREGRID:SAVE_SUCCESS",h="FEATUREGRID:CLEAR_CHANGES",O="FEATUREGRID:SAVE_ERROR",w="FEATUREGRID:DELETE_SELECTED_FEATURES",E="SET_FEATURES",P="FEATUREGRID:SORT_BY",S="FEATUREGRID:SET_LAYER",j="QUERY:UPDATE_FILTER",F="FEATUREGRID:CHANGE_PAGE",T="FEATUREGRID:GEOMETRY_CHANGED",x="DOCK_SIZE_FEATURES",C="FEATUREGRID:TOGGLE_TOOL",D="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",R="ASK_CLOSE_FEATURE_GRID_CONFIRM",I="FEATUREGRID:OPEN_GRID",N="FEATUREGRID:CLOSE_GRID",_="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",L="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",A="FEATUREGRID:SET_PERMISSION",q="FEATUREGRID:DISABLE_TOOLBAR",M="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",k="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",G="FEATUREGRID:ADVANCED_SEARCH",U="FEATUREGRID:ZOOM_ALL",B="FEATUREGRID:INIT_PLUGIN",Z="FEATUREGRID:SIZE_CHANGE",z="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",V="FEATUREGRID:UPDATE_EDITORS_OPTIONS",W="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",H="FEATUREGRID:SET_SYNC_TOOL",$="FEATUREGRID:SET_VIEWPORT_FILTER",Q={EDIT:"EDIT",VIEW:"VIEW"},Y="FEATUREGRID:START_SYNC_WMS",X="FEATUREGRID:STOP_SYNC_WMS",J="STORE_ADVANCED_SEARCH_FILTER",K="LOAD_MORE_FEATURES",ee="FEATUREGRID:QUERY_RESULT",te="FEATUREGRID:SET_TIME_SYNC",re="FEATUREGRID:SET_PAGINATION";function ne(){return{type:z}}function oe(e,t){return{type:ee,features:e,pages:t}}function ie(e){return{type:J,filterObj:e}}function ae(){return{type:B,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function le(){return{type:_}}function ue(){return{type:L}}function se(e,t){return{type:o,features:e,append:t}}function ce(e){return{type:n,options:e}}function pe(e){return{type:T,features:e}}function fe(){return{type:d}}function ye(){return{type:m}}function de(e){return{type:i,features:e}}function me(){return{type:b}}function be(e){return{type:v,features:e}}function ve(){return{type:a}}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,r=e.showCheckbox;return{type:l,multiselect:t,showCheckbox:r}}function he(e,t){return{type:P,sortBy:e,sortOrder:t}}function Oe(e,t){return{type:F,page:e,size:t}}function we(e){return{type:S,id:e}}function Ee(e){return{type:j,update:e,append:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}function Pe(e,t){return{type:C,tool:e,value:t}}function Se(e,t,r){return{type:D,name:e,key:t,value:r}}function je(){return{type:u,mode:Q.EDIT}}function Fe(){return{type:u,mode:Q.VIEW}}function Te(e,t){return{type:c,features:e,updated:t}}function xe(e){return{type:p,features:e}}function Ce(){return{type:f}}function De(){return{type:g}}function Re(){return{type:w}}function Ie(){return{type:y}}function Ne(){return{type:h}}function _e(){return{type:O}}function Le(){return{type:R}}function Ae(e){return{type:N,closer:e}}function qe(){return{type:I}}function Me(e){return{type:q,disabled:e}}function ke(e){return{type:A,permission:e}}function Ge(){return{type:G}}function Ue(){return{type:U}}function Be(){return{type:Y}}function Ze(e,t){return{type:Z,size:e,dockProps:t}}var ze=function(e){return{type:K,pages:e}},Ve=function(e){return{type:M,activated:e}},We=function(e){return{type:k,deactivated:e}},He=function(e){return{type:te,value:e}},$e=function(e){return{type:re,size:e}},Qe=function(e){return{type:W,updateFilterAction:e}},Ye=function(e){return{type:H,syncWmsFilter:e}},Xe=function(e){return{type:$,value:e}}},801550:(e,t,r)=>{"use strict";r.d(t,{pP:()=>n,TR:()=>o,N7:()=>i,mq:()=>a,uv:()=>l,Qy:()=>u,IL:()=>s,Li:()=>c,OW:()=>p,ZO:()=>f,Um:()=>y,TF:()=>d,Ls:()=>m,Ec:()=>b,Eu:()=>v,JJ:()=>g,nZ:()=>h,YD:()=>O,GI:()=>w,Jb:()=>E,Uh:()=>P,e$:()=>S,eh:()=>j,$j:()=>F,bJ:()=>T,Mk:()=>x,xy:()=>C,o6:()=>D,NH:()=>R,FP:()=>I,Mo:()=>N,sO:()=>_,Px:()=>L,hd:()=>A,y9:()=>q,Ju:()=>M,BV:()=>k,SO:()=>G,H0:()=>U,$X:()=>B,ou:()=>Z,NE:()=>z,Lq:()=>V,aN:()=>W});var n="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",l="PAN_TO",u="ZOOM_TO_EXTENT",s="ZOOM_TO_POINT",c="CHANGE_MAP_CRS",p="CHANGE_MAP_SCALES",f="CHANGE_MAP_STYLE",y="CHANGE_ROTATION",d="CREATION_ERROR_LAYER",m="UPDATE_VERSION",b="INIT_MAP",v="RESIZE_MAP",g="CHANGE_MAP_LIMITS",h="SET_MAP_RESOLUTIONS",O="REGISTER_EVENT_LISTENER",w="UNREGISTER_EVENT_LISTENER",E="MOUSE_MOVE",P="MOUSE_OUT",S="MAP:MAP_PLUGIN_LOAD",j="MAP:ORIENTATION",F="MAP:UPDATE_MAP_VIEW",T="MAP:UPDATE_MAP_OPTIONS";function x(e,t,r,n){return{type:S,mapType:t,loading:e,loaded:r,error:n}}function C(e,t,r){return{type:s,pos:e,zoom:t,crs:r}}function D(e,t,r,o,i,a,l,u){return{type:n,center:e,zoom:t,bbox:r,size:o,mapStateSource:i,projection:a,viewerOptions:l,resolution:u}}function R(e){return{type:c,crs:e}}function I(e,t){return{type:o,point:e,layer:t}}function N(e){return{type:i,pointer:e}}function _(e,t){return{type:a,zoom:e,mapStateSource:t}}function L(e,t,r,n){return{type:u,extent:e,crs:t,maxZoom:r,options:n}}function A(e,t){return{type:f,style:e,mapStateSource:t}}function q(e){return{type:b,disableFeedbackMask:e}}function M(){return{type:v}}function k(e){var t=e.restrictedExtent,r=e.crs,n=e.minZoom;return{type:g,restrictedExtent:t,crs:r,minZoom:n}}function G(e){return{type:h,resolutions:e}}var U=function(e,t){return{type:O,eventName:e,toolName:t}},B=function(e,t){return{type:w,eventName:e,toolName:t}},Z=function(e){return{type:E,position:e}},z=function(){return{type:P}},V=function(e){return{type:j,orientation:e}},W=function(e){return{type:T,configUpdate:e}}},501157:(e,t,r)=>{"use strict";r.d(t,{ID:()=>j,en:()=>F,Xv:()=>x,FU:()=>D,gs:()=>I,tt:()=>N,jY:()=>_,T6:()=>L,ZP:()=>A});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),l=r(984596),u=r.n(l),s=r(227361),c=r.n(s),p=r(505055),f=r.n(p),y=r(375875),d=r.n(y),m=r(737275),b=r(916651),v=r(577215);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==g(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P={},S="1.3.0",j="1.1.1",F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{service:"WMS",version:S,request:"GetCapabilities"},r=arguments.length>2?arguments[2]:void 0,n=(a()(e)&&e||e.split(","))[0],i=o().parse(n,!0);return o().format(E(E({},i),{},{search:null,query:E(E(E({},t),i.query),(null==r?void 0:r.query)||{})}))},T=function(e){var t=e&&e.Title,r=e.LogoURL&&E(E({},c()(e,"LogoURL.$")||{}),{},{format:c()(e,"LogoURL.Format")}),n=c()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:r,imageUrl:c()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:n}},x=function e(t){var r,n,o=null!==(r=null==t?void 0:t.Layer)&&void 0!==r?r:null==t?void 0:t.layer,i=null!==(n=null==t?void 0:t.Name)&&void 0!==n?n:null==t?void 0:t.name;return o?u()(o).reduce((function(t,r){var n,o,i=null!==(n=r.Layer)&&void 0!==n?n:r.layer,a=null!==(o=r.Name)&&void 0!==o?o:r.name;return[].concat(h(t),h(e(r)),h(i&&a?[r]:[]))}),[]):i&&[t]||[]},C=function(){var e,t,r,n,o,i,l,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0,p=arguments.length>2?arguments[2]:void 0,f=arguments.length>3?arguments[3]:void 0,y=s.Capability,d=s.Service,m=(l=y).Request&&l.Request.GetMap&&l.Request.GetMap.DCPType&&l.Request.GetMap.DCPType.HTTP&&l.Request.GetMap.DCPType.HTTP.Get&&l.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&l.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,b=y.Layer&&(null===(e=y.Layer.SRS||y.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],v=y.Layer&&y.Layer.Attribution&&T(y.Layer.Attribution),g=u()((null==y||null===(t=y.Request)||void 0===t||null===(r=t.GetMap)||void 0===r?void 0:r.Format)||[]),h=u()((null==y||null===(n=y.Request)||void 0===n||null===(o=n.GetFeatureInfo)||void 0===o?void 0:o.Format)||[]),O=x(y),w=(a()(O)?O:[O]).filter((function(e){return!f||-1!==e.Name.toLowerCase().indexOf(f.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(f.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(f.toLowerCase())}));return{numberOfRecordsMatched:w.length,numberOfRecordsReturned:Math.min(p,w.length),nextRecord:c+Math.min(p,w.length)+1,service:d,layerOptions:{version:(null==s||null===(i=s.$)||void 0===i?void 0:i.version)||S},records:w.filter((function(e,t){return t>=c-1&&t<c-1+p})).map((function(e){return E(E({},e),{},{getMapFormats:g,getFeatureInfoFormats:h,onlineResource:m,SRS:b,credits:e.Attribution?T(e.Attribution):v})}))}},D=function(e){return d().get(F(e,{service:"WMS",version:S,request:"GetCapabilities"})).then((function(e){var t;return f().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t.WMS_Capabilities||t.WMT_MS_Capabilities||{}}))},R=function(e,t,r,n){var o=P[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,m.u8)("cacheExpire")||60)?new Promise((function(e){e(C(o.data,t,r,n))})):D(e).then((function(o){return P[e]={timestamp:(new Date).getTime(),data:o},C(o,t,r,n)}))},I=function(e,t){return d().get(F(e,{service:"WMS",version:j,layers:t,request:"DescribeLayer"})).then((function(e){var t;return f().parseString(e.data,{explicitArray:!1},(function(e,r){t=r&&r.WMS_DescribeLayerResponse&&r.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return E(E({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:E({},e&&e.query&&e.query.$||{})})}))}))},N=function(e,t,r,n){return R(e,t,r,n)},_=function(e,t){for(var r=e,n=r.EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,b.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;!n&&r.Layer&&r.Layer.length;)n=(r=r.Layer[0]).EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,b.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;n||(n={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[n.westBoundLongitude||n.minx,n.southBoundLatitude||n.miny,n.eastBoundLongitude||n.maxx,n.northBoundLatitude||n.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return D(e).then((function(e){var r,n,o,i,a=e.Capability,l=u()((null==a||null===(r=a.Request)||void 0===r||null===(n=r.GetMap)||void 0===n?void 0:n.Format)||[]).filter(v.F0);return t?{imageFormats:l,infoFormats:u()((null==a||null===(o=a.Request)||void 0===o||null===(i=o.GetFeatureInfo)||void 0===i?void 0:i.Format)||[]).filter(v.cP)}:l})).catch((function(){return t?{imageFormats:[],infoFormats:[]}:[]}))};const A={flatLayers:x,parseUrl:F,getDimensions:function(e){return u()(e.Dimension||e.dimension||[]).map((function(t,r){var n=e.Extent&&u()(e.Extent)[r]||e.extent&&u()(e.extent)[r];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||n&&n.$.default,values:t._&&t._.split(",")||n&&n._&&n._.split(",")}}))},getCapabilities:D,describeLayer:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d().get(F(e,{service:"WMS",version:j,layers:t,request:"DescribeLayer"},r)).then((function(e){var t,r,n;f().parseString(e.data,{explicitArray:!1},(function(e,t){n=t}));var o=(null===(t=n)||void 0===t||null===(r=t.WMS_DescribeLayerResponse)||void 0===r?void 0:r.LayerDescription)&&u()(n.WMS_DescribeLayerResponse.LayerDescription)[0];return o&&E(E({},null==o?void 0:o.$),(null==o?void 0:o.Query)&&{query:u()(o.Query).map((function(e){return E({},null==e?void 0:e.$)}))})}))},getRecords:R,describeLayers:I,textSearch:N,parseLayerCapabilities:function(e,t){var r=e.Capability;return x(r).find((function(e){var r=e.Name;return 2===t.name.split(":").length&&r&&2===r.split(":").length?t.name===r&&e:r&&2===r.split(":").length?t.name===r.split(":")[1]&&e:2===t.name.split(":").length?t.name.split(":")[1]===r&&e:t.name===r&&e}))},getBBox:_,reset:function(){Object.keys(P).forEach((function(e){delete P[e]}))},getSupportedFormat:L}},115047:(e,t,r)=>{"use strict";r.d(t,{b:()=>d});var n=r(727418),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){var n,o,a,l;n=e,o=t,a=r[t],l=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==i(l)?l:l+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=r(59286),s=r(432420),c=["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"];var p=function(e){var t,r=e.searchText,n=e.staticFilter,o=e.blacklist,i=e.item,a=e.queriableAttributes,l=e.predicate,s=(0,u.generateTemplateString)(n||"")(i),c=r.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===c.length&&(c=r?[r]:[]),c.length>0&&(t="(".concat(c.map((function(e){return a.map((function(t){return"".concat(t," ").concat(l," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t?t.concat(s):s||null},f={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(647310).Z.geocode(e,t).then((function(e){return t.returnFullData?e:null===(r=e.data)?[]:r.map((function(e){return{properties:l({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,r){return e[function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}}(r)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}));var r}))},wfs:function(e,t){var r=t.url,n=t.typeName,i=t.queriableAttributes,a=void 0===i?[]:i,l=t.outputFormat,u=void 0===l?"application/json":l,f=t.predicate,y=void 0===f?"ILIKE":f,d=t.staticFilter,m=void 0===d?"":d,b=t.blacklist,v=void 0===b?[]:b,g=t.item,h=t.fromTextToFilter,O=void 0===h?p:h,w=t.returnFullData,E=void 0!==w&&w,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,c),S=O({searchText:e,staticFilter:m,blacklist:v,item:g,queriableAttributes:a,predicate:y});return s.DH(r,o()({maxFeatures:10,typeName:n,outputFormat:u,cql_filter:S},P)).then((function(e){return E?e:e.features}))}},y={setService:function(e,t){f[e]=t},getService:function(e){return f[e]?f[e]:null}},d={Services:f,Utils:y}},615402:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function s(e,t,r){return t=p(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function y(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var m=r(868195).FormattedHTMLMessage,b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(m,{id:this.props.msgId,values:this.props.msgParams}):a().createElement("span",null,this.props.msgId||"")}}])&&u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);y(b,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),y(b,"contextTypes",{intl:o().object});const v=b},838167:(e,t,r)=>{"use strict";r.d(t,{k9:()=>E,v0:()=>w,ZP:()=>S});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i),l=r(868195);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function p(e,t,r){return t=y(t),function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function m(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(l.FormattedDate,s({value:this.props.value},this.props.dateParams)):a().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&c(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);m(v,"propTypes",{value:o().object,dateParams:o().object}),m(v,"contextTypes",{intl:o().object}),m(v,"defaultProps",{value:new Date});const g=v;var h=r(615402),O=r(805346),w=O.Z,E=h.Z,P=g;const S={Message:O.Z,HTML:E,DateFormat:P}},848384:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function s(e,t,r){return t=p(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function y(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var d,m,b,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.item;return e.pagination?o().createElement("span",null,e[this.props.textField]," ",e.pagination," "):o().createElement("span",null,e[this.props.textField])}}])&&u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);d=v,m="propTypes",b={item:a().object,textField:a().string,valueField:a().string},(m=y(m))in d?Object.defineProperty(d,m,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[m]=b;const g=v},965539:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){var n,o,a,l;n=e,o=t,a=r[t],l=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==i(l)?l:l+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const u=function(e){var t=e.id,r=e.children,n=e.header,i=e.footer,a=e.columns,u=e.height,s=e.style,c=void 0===s?{}:s,p=e.className,f=e.bodyClassName,y=void 0===f?"ms2-border-layout-body":f;return o().createElement("div",{id:t,className:p,style:l({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"},c)},n,o().createElement("div",{className:y,style:{display:"flex",flex:1,overflowY:"auto"}},o().createElement("main",{className:"ms2-border-layout-content",style:{flex:1,overflowX:"hidden"}},u?o().createElement("div",{style:{height:u}},r):r),u?o().createElement("div",{style:{height:u}},a):a),i)}},461928:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),l=r(747037),u=r.n(l),s=["impl","name"];function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return t=b(t),function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var O=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return g(e=d(this,t,[].concat(n)),"getTool",(function(t){var r=e.props.plugins;return u()(t)?{name:t,impl:r.tools[t]}:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:t.name,impl:r.tools[t.name]},t)})),g(e,"renderLayers",(function(){var t=e.props.map&&e.props.map.projection||"EPSG:3857",r=e.props.plugins.Layer;return e.props.layers.map((function(n,i){return o().createElement(r,{type:n.type,srs:t,position:i,key:n.id||n.name,options:n,env:n.localizedLayerStyles?e.props.env:[]},e.renderLayerContent(n,t))}))})),g(e,"renderLayerContent",(function(t,r){if(t.features&&"vector"===t.type){var n=e.props.plugins.Feature;return t.features.map((function(e){return o().createElement(n,{key:e.id,msId:e.id,type:e.type,crs:r,geometry:e.geometry,features:e.features,featuresCrs:t.featuresCrs||"EPSG:4326",layerStyle:t.style,style:e.style||t.style||null,properties:e.properties})}))}return null})),g(e,"renderTools",(function(){return e.props.tools.filter((function(t){var r,n,o;return null===(r=e.props)||void 0===r||null===(n=r.plugins)||void 0===n||null===(o=n.tools)||void 0===o?void 0:o[u()(t)?t:null==t?void 0:t.name]})).map((function(t){var r=e.getTool(t),n=r.impl,i=r.name,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,s);return o().createElement(n,p({key:i},a))}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.plugins.Map,t=this.props.map&&this.props.map.projection||"EPSG:3857";return this.props.map&&e?o().createElement(e,p({projectionDefs:this.props.projectionDefs,style:this.props.styleMap,id:this.props.id,zoomControl:this.props.zoomControl,center:{x:0,y:0},zoom:1,hookRegister:this.props.hookRegister,mapStateSource:this.props.mapStateSource||this.props.id},this.props.options,this.props.map,{projection:t},this.props.eventHandlers),this.renderLayers(),this.renderTools(),this.props.children):null}}])&&y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);g(O,"propTypes",{id:a().string,options:a().object,map:a().object,mapStateSource:a().string,eventHandlers:a().object,styleMap:a().object,layers:a().array,hookRegister:a().object,projectionDefs:a().array,plugins:a().any,tools:a().array,getLayerProps:a().func,env:a().array,zoomControl:a().bool}),g(O,"defaultProps",{id:"__base_map__",options:{},map:{},styleMap:{},tools:[],projectionDefs:[],eventHandlers:{onMapViewChanges:function(){},onClick:function(){},onMouseMove:function(){},onLayerLoading:function(){},onLayerError:function(){}},env:[],zoomControl:!1});const w=O},507848:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(124852),o=r.n(n),i=r(898631);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}const l=function(e){return function(t){var r;return o().createElement(e,a({mapType:(0,i._1)(null==t||null===(r=t.map)||void 0===r?void 0:r.visualizationMode)},t))}}},91812:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(867076),o=r(438482);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){var n,o,a,l;n=e,o=t,a=r[t],l=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==i(l)?l:l+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,n.compose)((0,n.withStateHandlers)((function(){return{resize:0}}),{onResize:function(e){var t=e.resize,r=void 0===t?0:t;return function(){return{resize:r+1}}}}),(0,o.Z)({debounceTime:e}),(0,n.withProps)((function(e){var t=e.options,r=e.resize;return{options:l(l({},t),{},{resize:r})}})))}},319180:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function c(e,t,r){return t=f(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function d(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}const b=function(e){var t=function(t){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return d(e=c(this,n,[].concat(r)),"state",{plugins:{}}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(n,t),i=n,(a=[{key:"componentDidMount",value:function(){this.setPlugins(this.props),this._isMounted=!0}},{key:"componentWillUpdate",value:function(e){e.mapType!==this.props.mapType&&this.setPlugins(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this.state.plugins;return o().createElement(e,u({},this.props,{plugins:t}))}},{key:"setPlugins",value:function(e){var t=this;e.mapType&&r(243120)("./"+e.mapType+".js").then((function(e){t._isMounted&&(t.setState({plugins:e.default()}),t.props.onMapTypeLoaded())}))}}])&&s(i.prototype,a),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,a}(o().Component);return d(t,"propTypes",{mapType:a().string,onMapTypeLoaded:a().func}),d(t,"defaultProps",{onMapTypeLoaded:function(){}}),t.displayName="".concat(e.displayName,"WithMapType"),t}},469705:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(867076);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){var n,i,a,l;n=e,i=t,a=r[t],l=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i),(i="symbol"==o(l)?l:l+"")in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const l=(0,n.compose)((0,n.withHandlers)({onMapViewChanges:function(e){var t=e.map,r=void 0===t?{}:t,n=e.onMapViewChanges,o=void 0===n?function(){}:n;return function(e,t,n,i,l,u,s,c,p,f){o(a(a({},r),{},{center:e,bbox:a(a({},r.bbox),n),zoom:t,size:i,mapStateSource:l,projection:u,resolution:c,orientate:p,zoomToExtentHandler:f}))}}}),(0,n.withPropsOnChange)(["onMapViewChanges","eventHandlers"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapViewChanges,r=void 0===t?function(){}:t,n=e.eventHandlers;return{eventHandlers:a(a({},void 0===n?{}:n),{},{onMapViewChanges:r})}})))},975480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(124852),o=r.n(n);const i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{display:"inline-block"}:e;return o().createElement("div",{style:t,className:"mapstore-inline-loader"})}},694745:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(124852),o=r.n(n),i=r(294184),a=r.n(i),l=r(480681),u=r(807472),s=r(80717),c=r(867076),p=r(819081),f=r.n(p),y=r(975480),d={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},m={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const b=(0,c.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,r=void 0!==t&&t,n=e.loading,i=e.loadingText,c=e.onClose,p=void 0===c?function(){}:c,b=e.title,v=void 0===b?"":b,g=e.clickOutEnabled,h=void 0===g||g,O=e.showClose,w=void 0===O||O,E=e.disabledClose,P=void 0!==E&&E,S=e.showFullscreen,j=void 0!==S&&S,F=e.fullscreenType,T=void 0===F?"full":F,x=e.buttons,C=void 0===x?[]:x,D=e.size,R=void 0===D?"":D,I=e.bodyClassName,N=void 0===I?"":I,_=e.children,L=e.draggable,A=void 0!==L&&L,q=e.fullscreenState,M=e.onFullscreen,k=e.fade,G=void 0!==k&&k,U=e.fitContent,B=e.modalClassName,Z=void 0===B?"":B,z=e.dialogClassName,V=void 0===z?"":z,W=e.enableFooter,H=void 0===W||W,$=d[R]||"",Q=j&&"expanded"===q&&m.className[T]||"",Y=r?o().createElement("div",{className:"modal-fixed ".concat(Z," ")+(A?"ms-draggable":"")},o().createElement(u.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:h?p:function(){},containerClassName:"ms-resizable-modal",draggable:A,modal:!0,className:a()("modal-dialog modal-content",$,Q,V,{"ms-fit-content":U})},o().createElement("span",{role:"header"},o().createElement("h4",{className:"modal-title"},o().createElement("div",{className:"ms-title"},v),j&&m.className[T]&&o().createElement(l.Glyphicon,{className:"ms-header-btn",onClick:function(){return M("expanded"===q?"collapsed":"expanded")},glyph:m.glyph[q][T]}),w&&p&&o().createElement(l.Glyphicon,{glyph:"1-close",className:"ms-header-btn",onClick:p,disabled:P}))),o().createElement("div",{role:"body",className:N},_),H&&o().createElement("div",{style:{display:"flex"},role:"footer"},o().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},n?o().createElement(y.Z,null):null),o().createElement("div",{className:"ms-resizable-modal-loading-text"},n?i:null),o().createElement(s.Z,{buttons:C})))):null;return G?o().createElement(f(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},Y):Y}))},749902:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i),l=r(200020),u=r(480681),s=r(86638),c=r(950966),p=r(848384);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function m(e,t,r){return t=v(t),function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function h(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return h(e=m(this,t,[].concat(n)),"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var r=e.props.tooltip.customizedTooltip;return a().createElement(r,null,t)}var n=a().createElement(u.Tooltip,{id:e.props.tooltip.id},e.props.tooltip.message);return a().createElement(c.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:n},t)})),h(e,"renderTooltipCheckbox",(function(){var t=e.props,r=t.onFilterChange,n=t.anyFieldVal,o=a().createElement("input",{onChange:function(e){r({column:{key:e.target.name},filterTerm:!e.target.checked})},type:"checkbox",checked:!("boolean"!=typeof n||n),name:e.props.anyFilterRuleMode}),i=a().createElement(u.Tooltip,{id:e.props.tooltip.id+n?"checked":"unchecked"},"boolean"!=typeof n||n?e.props.unCheckedAnyField:e.props.checkedAnyField);return a().createElement(c.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:i},o)})),h(e,"renderPagination",(function(){var t=e.props.pagination.firstPage,r=e.props.pagination.lastPage;return a().createElement("div",{className:"autocomplete-toolbar"},!t&&a().createElement(u.Glyphicon,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadPrevPage()}}),!r&&a().createElement(u.Glyphicon,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadNextPage()}}))})),h(e,"renderField",(function(){var t={emptyList:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyList"),open:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},r=[];e.props.data&&e.props.data.length>0&&(r=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&r.length>0&&r.push(h(h(h(h({},e.props.textField,""),e.props.valueField,""),"disabled",!0),"pagination",e.renderPagination()));var n=e.props.loading?[]:r,o=e.props.itemComponent,i=a().createElement(l.Combobox,{placeholder:e.props.placeholder,dropUp:e.props.dropUp,busy:e.props.busy,data:n,disabled:e.props.disabled,itemComponent:function(t){return a().createElement(o,y({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||t,open:e.props.open,filter:e.props.filter,onChange:function(t){return e.props.onChange(t)},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){return e.props.onSelect(t)},onToggle:function(t){return e.props.onToggle(t)},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(i):i})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),r=t,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props.attribute;t!==e.attribute&&this.props.onChangeAttribute(t)}},{key:"render",value:function(){var e=this,t=this.props,r=t.selectedValue,n=t.disabled,o=t.onReset,i=t.label,l=t.clearable,u=t.onFilterChange,s=i?a().createElement("label",null,i):a().createElement("span",null);return a().createElement("div",{className:"autocompleteField ".concat(this.props.anyFilterRuleMode?"d-flex":"")},s,l?a().createElement("div",{className:"rw-combo-clearable ".concat(n?"disabled":"")},this.renderField(),a().createElement("span",{className:"rw-combo-clear ".concat(r?"":"hidden"),onClick:function(){var t;e.props.anyFilterRuleMode?u({column:{key:null===(t=e.props.column)||void 0===t?void 0:t.key},filterTerm:void 0,isResetField:!0}):o()}},"x")):this.renderField(),this.props.anyFilterRuleMode?a().createElement(a().Fragment,null,"",a().createElement("div",{className:"checkbox-any-field"},this.renderTooltipCheckbox())):null)}}])&&d(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);h(w,"propTypes",{busy:o().bool,data:o().array,disabled:o().bool,dropUp:o().bool,itemComponent:o().oneOfType([o().object,o().func]),label:o().string,loading:o().bool,filter:o().oneOfType([o().string,o().bool]),messages:o().object,onChange:o().func,onFocus:o().func,onSelect:o().func,onToggle:o().func,onChangeAttribute:o().func,open:o().bool,pagination:o().object,nextPageIcon:o().string,prevPageIcon:o().string,selectedValue:o().string,textField:o().string,tooltip:o().object,valueField:o().string,placeholder:o().string,stopPropagation:o().bool,clearable:o().bool,onReset:o().func,attribute:o().string,anyFilterRuleMode:o().string,onFilterChange:o().func,anyFieldVal:o().bool,column:o().object,checkedAnyField:o().string,unCheckedAnyField:o().string}),h(w,"contextTypes",{messages:o().object}),h(w,"defaultProps",{stopPropagation:!1,dropUp:!1,itemComponent:p.Z,loading:!1,label:null,filter:"",pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onSelect:function(){},onReset:function(){},onChangeAttribute:function(){},textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value",clearable:!1,anyFilterRuleMode:"",onFilterChange:function(){},column:{},checkedAnyField:"",unCheckedAnyField:""});const E=w},993451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(86638),o=r(285547),i=r(675263),a=r.n(i),l=r(984596),u=r.n(l),s=r(701469),c=r.n(s),p=r(414293),f=r.n(p),y=r(747037),d=r.n(y),m=r(867076),b=["messages","locale"];function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){var n;return n=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==v(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"msgId";return(0,m.compose)((0,m.getContext)({messages:a().object,locale:a().string}),(0,m.mapProps)((function(i){var a=i.messages,l=i.locale,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(i,b);return h(h({},s),u()(e).reduce(function(e,t,r){var i=t.messages,a=t.locale,l=t.mode;return function(){var t=arguments.length>1?arguments[1]:void 0;return h(h({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},O({},t,"msgId"===l?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(c()(t))return t.map((function(o){var i=(0,n.S$)(e,o[r]||d()(o)&&o||"");return h(h({},o),{},O({},r,f()(i)?t:i))}));var o=t?(0,n.S$)(e,t):t;return f()(o)?t:o}(i,e[t],r):function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(c()(e))return e.map((function(n){var i=(0,o.Z)(n[r]||d()(n)&&n||"",t);return h(h({},n),{},O({},r,f()(i)?e:i))}));var n=(0,o.Z)(e,t);return f()(n)?e:n}(e[t],a,r)))}}(s,{locale:l,messages:a,mode:r},t),{}))})))}},273849:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(867076),o=r(828878),i=r(49977),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==l(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=(0,n.mapPropsStreamWithConfig)(o.Z);const p=(0,n.compose)((0,n.defaultProps)({dataStreamFactory:function(){return a().Observable.of({})}}),c((function(e){return e.take(1).switchMap((function(t){return t.dataStreamFactory(e.startWith(t),t)})).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(s({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),e)}))})))},438482:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(124852),o=r.n(n),i=r(23279),a=r.n(i),l=r(675263),u=r.n(l),s=r(180307),c=r.n(s),p=r(961845);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return t=b(t),function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}const O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debounceTime,r=e.querySelector,n=e.closest,i=void 0!==n&&n;return function(e){var n;return n=function(n){function l(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),g(n=d(this,l,[e]),"findDomNode",(function(){if(!n.isMounded)return null;var e=c().findDOMNode(n);return e&&i&&r?e.closest(r||"*"):e&&(r?e.querySelector(r):e)})),n.width=void 0,n.height=void 0,n.skipOnMount=e.skipOnMount,n.div=null,n.onResize=a()((function(){var e;return(e=n.props).onResize.apply(e,arguments)}),void 0!==t?t:e.debounceTime||1e3),n.ro=new p.Z((function(e){e.forEach((function(e){var t=e.contentRect,r=t.width,o=t.height,i=n.props.handleWidth&&n.width!==r,a=n.props.handleHeight&&n.height!==o;n.skipOnMount||!i&&!a||n.onResize({width:r,height:o}),n.width=r,n.height=o,n.skipOnMount=!1}))})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(l,n),u=l,(s=[{key:"componentDidMount",value:function(){this.isMounded=!0,this.div=this.findDomNode(),this.div&&this.ro.observe(this.div)}},{key:"componentDidUpdate",value:function(){this.div=this.findDomNode(),this.div&&this.ro.observe(this.div)}},{key:"componentWillUnmount",value:function(){var e=this.findDomNode();e&&this.ro&&this.ro.unobserve&&this.ro.unobserve(e)}},{key:"render",value:function(){return o().createElement(e,this.props)}}])&&y(u.prototype,s),Object.defineProperty(u,"prototype",{writable:!1}),u;var u,s}(o().Component),g(n,"propTypes",{handleWidth:u().bool,handleHeight:u().bool,onResize:u().func}),g(n,"defaultProps",{onResize:function(){},handleWidth:!0,handleHeight:!0}),n}}},145869:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function s(e,t,r){return t=p(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function y(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return o().createElement("label",{className:"mapstore-switch-btn ".concat(this.props.className)},o().createElement("input",{type:"checkbox",disabled:this.props.disabled,checked:this.props.checked,onChange:function(){return e.props.onChange(!e.props.checked)}}),o().createElement("span",{onClick:function(){return e.props.onClick(!e.props.checked)},className:"m-slider"}))}}])&&u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);y(m,"propTypes",{disabled:a().bool,className:a().string,checked:a().bool,onChange:a().func,onClick:a().func}),y(m,"defaultProps",{className:"",checked:!1,onChange:function(){},onClick:function(){}});const b=m},576364:(e,t,r)=>{"use strict";r.d(t,{Vd:()=>E,Vj:()=>P});var n=r(472500),o=r.n(n),i=r(666654),a=r.n(i),l=r(91175),u=r.n(l),s=r(414293),c=r.n(s),p=r(727418),f=r.n(p),y=r(49977),d=r.n(y),m=r(115047),b=r(375875),v=r.n(b),g=r(284069);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var w=function(e){var t=e.searchText,r=void 0===t?"":t,n=e.queriableAttributes,o=void 0===n?[]:n,i=e.predicate,a=void 0===i?"ILIKE":i,l=u()(o),s=r.toLowerCase(),p="strToLowerCase(".concat(l,") ").concat(a," '%").concat(s,"%'");return c()(l)?"":"("+p+")"},E=function(e){return e.distinctUntilChanged((function(e){var t=e.value,r=e.currentPage,n=e.attribute,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(o.value!==t||o.currentPage!==r||o.attribute!==n)})).throttle((function(e){return d().Observable.timer(e.delayDebounce||0)})).merge(e.debounce((function(e){return d().Observable.timer(e.delayDebounce||0)}))).distinctUntilChanged().switchMap((function(e){if(e.performFetch){var t=(0,g.getWpsPayload)({attribute:e.attribute,layerName:e.typeName,maxFeatures:e.maxFeatures,startIndex:(e.currentPage-1)*e.maxFeatures,value:e.value});return d().Observable.fromPromise(v().post(e.url,t,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return{fetchedData:e.data,busy:!1}}))).catch((function(){return d().Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({busy:!0})}return d().Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({})},P=function(e){return d().Observable.merge(e.distinctUntilChanged((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).value})).debounce((function(e){return d().Observable.timer(e.delayDebounce||0)})),e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterProps,r=e.currentPage,n=arguments.length>1?arguments[1]:void 0,o=n.filterProps,i=n.currentPage;return t===o&&r===i}))).switchMap((function(e){if(e.performFetch){var t=o().parse(e.url,!0),r="";(a()(t.pathname,"wfs")||a()(t.pathname,"wms")||a()(t.pathname,"ows")||a()(t.pathname,"wps"))&&(r=t.pathname.replace(/(wms|ows|wps|wfs)$/,"wfs")),t.query&&t.query.service&&delete t.query.service;var n=o().format(f()({},t,{search:null,pathname:r})),i=f()({},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==h(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({url:n,typeName:e.filterProps&&e.filterProps.typeName||"",predicate:e.filterProps&&e.filterProps.predicate||"ILIKE",blacklist:e.filterProps&&e.filterProps.blacklist||[],maxFeatures:e.filterProps&&e.filterProps.maxFeatures||3,queriableAttributes:e.filterProps&&e.filterProps.queriableAttributes||[],returnFullData:!0,startIndex:((e.currentPage||1)-1)*(e.filterProps&&e.filterProps.maxFeatures||3),outputFormat:"application/json",staticFilter:"",fromTextToFilter:w,item:{},timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"},srsName:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},t.query));return d().Observable.fromPromise(m.b.Utils.getService("wfs")(e.value,i).then((function(t){return{fetchedData:{values:t.features.map((function(e){return e.properties})),size:t.totalFeatures,features:t.features,crs:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},busy:!1}}))).catch((function(){return d().Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({busy:!0})}return d().Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({})}},886850:(e,t,r)=>{"use strict";r.d(t,{V6:()=>q,Mc:()=>k,v$:()=>G,ED:()=>U});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),l=r(984596),u=r.n(l),s=r(414293),c=r.n(s),p=r(513218),f=r.n(p),y=r(49977),d=r.n(y),m=r(505055),b=r(507526),v=r(375875),g=r.n(v),h=r(86686),O=r(624262),w=r(510284),E=r(439156),P=["totalFeatures","features"],S=["sortOptions","propertyName"];function j(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function x(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=T(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==T(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=r.n(E)()({wfsVersion:"1.1.0"}),I=R.getFeature,N=R.query,_=R.sortBy,L=R.propertyName,A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",i=(0,h.getWFSFilterData)(t,r),a=o().parse(e,!0),l=f()(a.query)?a.query:{};l.service="WFS",l.outputFormat=n;var u=o().format({protocol:a.protocol,host:a.host,pathname:a.pathname,query:l});return r.layer&&"vector"===r.layer.type?d().Observable.defer((function(){return new Promise((function(e){var n,o=function(e,t){if(t.filterFields&&0!==t.filterFields.length){var r=e.features.filter((0,h.createFeatureFilter)(t));e.features=r,e.numberMatched=r.length,e.numberReturned=r.length,e.totalFeatures=r.length}return t.sortOptions&&t.sortOptions.sortBy&&t.sortOptions.sortOrder&&"NONE"!==t.sortOptions.sortOrder&&e.features.sort((function(e,r){var n=e.properties[t.sortOptions.sortBy],o=r.properties[t.sortOptions.sortBy],i=n.toLowerCase().localeCompare(o.toLowerCase());return"ASC"===t.sortOptions.sortOrder?i:-1*i})),e}({crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}},numberMatched:(n=r.layer.features).length,numberReturned:n.length,timeStamp:"2020-07-20T11:36:20.118Z",totalFeatures:n.length,type:"FeatureCollection",features:n},t);e(o)}))})):{data:i,queryString:u}},q=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(r.layer&&"vector"===r.layer.type)return A(e,t,r,n);var o=A(e,t,r,n),i=o.data,a=o.queryString;return d().Observable.defer((function(){return g().post(a,i,{timeout:6e4,responseType:"arraybuffer",headers:{Accept:"application/xml","Content-Type":"application/xml"}})}))},M=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.layer&&"vector"===r.layer.type)return A(e,t,r);var n=A(e,t,r),o=n.data,i=n.queryString;return d().Observable.defer((function(){return g().post(i,o,D({timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}},null==r?void 0:r.requestOptions))})).let(w.oB).map((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=x(e,P),o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).startIndex,i=arguments.length>2?arguments[2]:void 0;return i>t&&i===o+r.length&&t===r.length?D(D({},n),{},{features:r,totalFeatures:i}):D(D({},n),{},{features:r,totalFeatures:t})}(e.data,function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination||!c()(e.startIndex)&&!c()(e.maxFeatures)&&{startIndex:e.startIndex,maxFeatures:e.maxFeatures}}(t,r),r.totalFeatures)}))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,o=e.name,i=arguments.length>1?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=l.sortOptions,c=l.propertyName,p=x(l,S);return M(r.url||n,i&&"object"===T(i)?D(D({},i),{},{typeName:o||i.typeName}):I(N(o,[].concat(j(s?[_(s.sortBy,s.sortOrder)]:[]),j(c?[L(c)]:[]),j(i?u()(i):[]))),p),p).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!s&&c&&c[0])return M(r.url||n,i&&"object"===T(i)?D(D({},i),{},{typeName:o||i.typeName}):I(N(o,[_(a()(c)?c[0]:c)].concat(j(c?[L(c)]:[]),j(i?u()(i):[]))),p),p);throw e}))},G=function(e){var t=e.layer;return d().Observable.defer((function(){return g().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=e.describeFeatureTypeURL,l=o().parse(a||n.url||i,!0);return o().format(D(D({},l),{},{search:void 0,query:D(D({},l.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(w.oB)},U=function(e){var t=e.layer;return d().Observable.defer((function(){return g().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=(0,O.Fh)({name:t,url:n&&n.url||i}),l=o().parse(a,!0);return o().format(D(D({},l),{},{search:void 0,query:D(D({},l.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(w.oB).switchMap((function(e){return d().Observable.bindNodeCallback((function(e,t){return(0,m.parseString)(e,{tagNameProcessors:[b.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}},428961:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>uo});var n=r(618446),o=r.n(n),i=r(675263),a=r.n(i),l=r(124852),u=r.n(l),s=r(171703),c=r(506806),p=r(12838),f=r(22222),y=r(807878),d=r(782904),m=r(531071);const b=(0,s.connect)((function(e){return{groupLevels:e.queryform.groupLevels,groupFields:e.queryform.groupFields,filterFields:e.queryform.filterFields,attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,attributePanelExpanded:e.queryform.attributePanelExpanded,autocompleteEnabled:e.queryform.autocompleteEnabled,maxFeaturesWPS:e.queryform.maxFeaturesWPS}}),(function(e){return{actions:(0,p.DE)({onAddGroupField:y.kQ,onAddFilterField:y.jW,onRemoveFilterField:y.JG,onUpdateFilterField:y.q$,onUpdateExceptionField:y.OZ,onUpdateLogicCombo:y.Nc,onRemoveGroupField:y.I5,onChangeCascadingValue:y.QL,toggleMenu:y.js,onExpandAttributeFilterPanel:y.I},e),controlActions:(0,p.DE)({onToggleQuery:d.Xi.bind(null,"queryPanel",null)},e)}}))(m.Z);var v=r(800827),g=r(469842),h=r(604206),O=r(313311),w=r.n(O),E=r(414293),P=r.n(E),S=r(480681),j=r(576364),F=r(86638),T=r(838167),x=r(794192),C=r(701469),D=r.n(C),R=r(867076),I=r(828878),N=r(86686),_=r(59286),L=r(91175),A=r.n(L),q=r(200020),M=r(950966),k=r(848384);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U.apply(this,arguments)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$(n.key),n)}}function Z(e,t,r){return t=V(t),function(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,z()?Reflect.construct(t,r||[],V(e).constructor):t.apply(e,r))}function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z=function(){return!!e})()}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function H(e,t,r){return(t=$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}var Q=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return H(e=Z(this,t,[].concat(n)),"state",{}),H(e,"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var r=e.props.tooltip.customizedTooltip;return u().createElement(r,null,t)}var n=u().createElement(S.Tooltip,{id:e.props.tooltip.id},"this.props.tooltip.message");return u().createElement(M.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:n},t)})),H(e,"renderPagination",(function(){var t=e.props.pagination.firstPage,r=e.props.pagination.lastPage;return u().createElement("div",{className:"autocomplete-toolbar"},!t&&u().createElement(S.Glyphicon,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(){return e.props.pagination.loadPrevPage()}}),!r&&u().createElement(S.Glyphicon,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(){return e.props.pagination.loadNextPage()}}))})),H(e,"renderField",(function(){var t={emptyList:function(){return e.props.busy?"Loading...":(0,F.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyList")},open:(0,F.S$)(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,F.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},r=[];e.props.data&&e.props.data.length>0&&(r=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&r.length>0&&r.push(H(H(H(H({},e.props.textField,""),e.props.valueField,""),"disabled",!0),"pagination",e.renderPagination()));var n=!1,o=e.props.loading?[]:r,i=e.props.itemComponent,a=u().createElement(q.Combobox,{dropUp:e.props.dropUp,busy:e.props.busy,data:o,disabled:e.props.disabled,itemComponent:function(t){return u().createElement(i,U({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||t,open:e.props.open,filter:!1,onChange:function(t){e.props.onChange(t,e.props.valueField),n=!0},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){var r=A()(e.props.features.filter((function(r){return r.properties[e.props.valueField].toLowerCase()===t[e.props.valueField].toLowerCase()})));e.props.onSelect(t,r,e.props.srsName,e.props.style)},onToggle:function(t){var r=A()(e.props.features.filter((function(t){return t.properties[e.props.valueField].toLowerCase()===e.props.selectedValue.toLowerCase()})));!t||e.props.selectedValue||e.props.selectedValue||n||e.props.onChange("",e.props.valueField),e.props.onToggle(t,r,e.props.pagination.currentPage),r&&!t&&e.props.onSelect(e.props.selectedValue,r,e.props.srsName,e.props.style),n=!1},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(a):a})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.label?u().createElement("label",null,this.props.label):u().createElement("span",null);return u().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&B(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);H(Q,"propTypes",{busy:a().bool,data:a().array,disabled:a().bool,dropUp:a().bool,features:a().array,filter:a().string,itemComponent:a().oneOfType([a().object,a().func]),label:a().string,loading:a().bool,messages:a().object,onChange:a().func,onFocus:a().func,onSelect:a().func,onToggle:a().func,onChangeDrawingStatus:a().func,style:a().style,open:a().bool,pagination:a().object,nextPageIcon:a().string,prevPageIcon:a().string,selectedValue:a().string,srsName:a().string,textField:a().string,tooltip:a().object,valueField:a().string}),H(Q,"contextTypes",{messages:a().object}),H(Q,"defaultProps",{dropUp:!1,features:[],filter:"",itemComponent:k.Z,loading:!1,label:null,pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onChangeDrawingStatus:function(){},onSelect:function(){},srsName:"EPSG:4326",textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value"});const Y=Q;function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){var n;return n=function(e,t){if("object"!=X(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==X(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,R.setObservableConfig)(I.Z);var te=(0,R.mapPropsStreamWithConfig)(I.Z)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return K(K({},t),{},{data:D()(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values:[],features:D()(e&&e.fetchedData&&e.fetchedData.features)?e.fetchedData.features:[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,srsName:e&&e.fetchedData&&e.fetchedData.crs,busy:e.busy})}))}))((function(e){var t=e.open,r=e.toggle,n=e.select,o=e.focus,i=e.change,a=e.changed,l=e.originalValue,s=e.value,c=e.valuesCount,p=e.onChangeDrawingStatus,f=e.loadNextPage,y=e.loadPrevPage,d=e.maxFeatures,m=e.currentPage,b=e.itemComponent,v=e.features,g=e.busy,h=e.data,O=e.loading,w=void 0!==O&&O,E=e.valueField,P=e.textField,S=e.filter,j=e.srsName,F=e.style,T=Math.ceil(c/d);return u().createElement(Y,{pagination:{firstPage:1===m,lastPage:T<=m,paginated:!0,loadPrevPage:y,loadNextPage:f,currentPage:m},srsName:j,busy:g,dropUp:!1,data:h,open:t,onChangeDrawingStatus:p,valueField:E,textField:P,itemComponent:b,filter:S,onFocus:o,onToggle:r,onChange:i,onSelect:n,features:v,style:F,selectedValue:a?s:l||s,loading:w})})),re=(0,R.compose)((0,R.withPropsOnChange)(["valueField"],(function(){return{value:void 0}})),(0,R.withStateHandlers)((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,changed:e.value,value:e.value,onChangeDrawingStatus:e.onChangeDrawingStatus,itemComponent:e.itemComponent}}),{select:function(){return function(e){return{selected:e}}},change:function(e){return function(t,r){return e.selected||e.open||e.onChangeDrawingStatus("clean","","queryform",[],{}),{delayDebounce:500,selected:!1,changingPage:!1,changed:!0,performFetch:!(e.selected&&!e.changingPage),value:e.selected&&e.changingPage&&e.value||("string"==typeof t?t:t[r]),currentPage:e.changingPage?e.currentPage:1}}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}:e}},toggle:function(e){return function(){return{open:!!e.changingPage||!e.open}}},loadNextPage:function(e){return function(){return{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0}}},loadPrevPage:function(e){return function(){return{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0}}}}),(0,R.withHandlers)({select:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=e.onChangeSpatialFilterValue,n=void 0===r?function(){}:r,o=e.select,i=void 0===o?function(){}:o;return function(e,r,o,a){r&&n({geometry:r.geometry,value:e,feature:r,srsName:o,style:a,options:t,collectGeometries:t&&t.crossLayer?{queryCollection:{typeName:t.crossLayer.typeName,geometryName:t.crossLayer.geometryName,cqlFilter:(0,_.generateTemplateString)(t.crossLayer.cqlTemplate||"",N.escapeCQLStrings)(r)}}:void 0}),i(!0)}}})),ne=re(te),oe=r(112346),ie=r(704201);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fe(n.key),n)}}function ue(e,t,r){return t=ce(t),function(e,t){if(t&&("object"===ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,se()?Reflect.construct(t,r||[],ce(e).constructor):t.apply(e,r))}function se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(se=function(){return!!e})()}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function fe(e){var t=function(e,t){if("object"!=ae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}var ye,de,me,be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ue(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return u().createElement("span",{className:this.props.customItemClassName?this.props.customItemClassName:""},this.props.item)}}])&&le(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);ye=be,de="propTypes",me={item:a().string,textField:a().string,customItemClassName:a().string,valueField:a().string},(de=fe(de))in ye?Object.defineProperty(ye,de,{value:me,enumerable:!0,configurable:!0,writable:!0}):ye[de]=me;const ve=be;var ge=r(727418),he=r.n(ge),Oe=r(916651);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xe(n.key),n)}}function Pe(e,t,r){return t=je(t),function(e,t){if(t&&("object"===we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Se()?Reflect.construct(t,r||[],je(e).constructor):t.apply(e,r))}function Se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Se=function(){return!!e})()}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}function Fe(e,t){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fe(e,t)}function Te(e,t,r){return(t=xe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e){var t=function(e,t){if("object"!=we(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==we(t)?t:t+""}var Ce=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Te(e=Pe(this,t,[].concat(n)),"onUpdateBBOX",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(e.tempExtent[r]=!isNaN(parseFloat(t))&&parseFloat(t)||0);var o=[];for(var i in e.tempExtent)i&&o.push(e.tempExtent[i]);var a=(0,Oe.reprojectBbox)(o,"EPSG:4326",e.props.projection),l={type:e.props.geometry.type,coordinates:[[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]],[a[0],a[1]]]],projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(n,void 0,"queryform",[l])})),Te(e,"onUpdateCircle",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(e.tempCircle[r]=parseFloat(t));var o=isNaN(parseFloat(e.tempCircle.x))||isNaN(parseFloat(e.tempCircle.y))?[e.tempCircle.x,e.tempCircle.y]:(0,Oe.reproject)([e.tempCircle.x,e.tempCircle.y],"EPSG:4326",e.props.projection);o=void 0===o.x?{x:o[0],y:o[1]}:o;var i={x:isNaN(o.x)?0:o.x,y:isNaN(o.y)?0:o.y},a={type:e.props.geometry.type,center:i,coordinates:[i.x,i.y],radius:isNaN(e.tempCircle.radius)?0:e.tempCircle.radius,projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(n,void 0,"queryform",[a],{geodesic:e.props.enableGeodesic})})),Te(e,"onModifyGeometry",(function(){"BBOX"===e.props.type?e.onUpdateBBOX(null,null,"endDrawing"):"Circle"===e.props.type&&e.onUpdateCircle(null,null,"endDrawing"),e.props.onShowPanel(!1)})),Te(e,"onClosePanel",(function(){e.resetGeom(),e.props.onShowPanel(!1)})),Te(e,"getStep",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.min(1/Math.pow(10,Math.ceil(Math.min(e,21)/3)-2),1)})),Te(e,"getStepCircle",(function(t,r){var n=e.getStep(t);return"radius"===r&&!e.isWGS84()&&1e4*n||n})),Te(e,"getBBOXDimensions",(function(e){var t=(0,Oe.reprojectBbox)(e.extent,e.projection,"EPSG:4326");return{west:t[0],sud:t[1],est:t[2],north:t[3]}})),Te(e,"getCircleDimensions",(function(t){var r=(0,Oe.reproject)(t.center,t.projection,"EPSG:4326"),n=(0,Oe.reproject)(t.center,t.projection,e.props.projection),o=(0,Oe.reproject)([t.center[0]+t.radius,t.center[1]],t.projection,e.props.projection),i=Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y));return{x:r.x,y:r.y,radius:i}})),Te(e,"renderCoordinateField",(function(t,r){return u().createElement("div",null,u().createElement("div",{className:"detail-field-title"},r),u().createElement(x.Z,{style:{minWidth:"105px",margin:"auto"},type:"number",id:"queryform_bbox_"+r,step:e.getStep(e.props.zoom),defaultValue:e.roundValue(t,1e6),onChange:function(t){return e.onUpdateBBOX(t,r)}}))})),Te(e,"renderCircleField",(function(t,r){return u().createElement(x.Z,{type:"number",id:"queryform_circle_"+r,defaultValue:e.roundValue(t,"radius"!==r||e.isWGS84()?1e6:100),step:e.getStepCircle(e.props.zoom,r),onChange:function(t){return e.onUpdateCircle(t,r)}})})),Te(e,"renderDetailsContent",(function(){var t,r=e.props.geometry;if("BBOX"===e.props.type){var n=e.getBBOXDimensions(r);t=u().createElement("div",null,u().createElement("div",{className:"container-fluid"},u().createElement(S.Row,null,u().createElement(S.Col,{xs:4},u().createElement("span",null)),u().createElement(S.Col,{xs:4},e.renderCoordinateField(n.north,"north")),u().createElement(S.Col,{xs:4},u().createElement("span",null))),u().createElement(S.Row,null,u().createElement(S.Col,{xs:4},e.renderCoordinateField(n.west,"west")),u().createElement(S.Col,{xs:4},u().createElement("span",null)),u().createElement(S.Col,{xs:4},e.renderCoordinateField(n.est,"est"))),u().createElement(S.Row,null,u().createElement(S.Col,{xs:4},u().createElement("span",null)),u().createElement(S.Col,{xs:4},e.renderCoordinateField(n.sud,"sud")),u().createElement(S.Col,{xs:4},u().createElement("span",null)))),u().createElement("span",null,u().createElement("hr",{width:"90%"}),u().createElement("div",null,u().createElement("h5",null,u().createElement(T.ZP.Message,{msgId:"queryform.spatialfilter.details.details_bbox_label"})))))}else if("Circle"===e.props.type){var o=e.getCircleDimensions(r),i=(0,Oe.getUnits)(e.props.projection);t=u().createElement("div",null,u().createElement("div",{className:"container-fluid"},u().createElement(S.Row,null,u().createElement(S.Col,{xs:2},u().createElement("span",null)),u().createElement(S.Col,{xs:2},u().createElement("span",{className:"details-circle-attribute-name"},"x:")),u().createElement(S.Col,{xs:4},e.renderCircleField(o.x,"x")),u().createElement(S.Col,{xs:4},u().createElement("span",null))),u().createElement(S.Row,null,u().createElement(S.Col,{xs:2},u().createElement("span",null)),u().createElement(S.Col,{xs:2},u().createElement("span",{className:"details-circle-attribute-name"},"y:")),u().createElement(S.Col,{xs:4},e.renderCircleField(o.y,"y")),u().createElement(S.Col,{xs:4},u().createElement("span",null))),u().createElement(S.Row,null,u().createElement(S.Col,{xs:2},u().createElement("span",null)),u().createElement(S.Col,{xs:2},u().createElement("span",{className:"details-circle-attribute-name"},u().createElement(T.ZP.Message,{msgId:"queryform.spatialfilter.details.radius",msgParams:{unit:"degrees"===i?"":i}}),":")),u().createElement(S.Col,{xs:4},e.renderCircleField(o.radius,"radius")),u().createElement(S.Col,{xs:4},u().createElement("span",null)))),u().createElement("span",null,u().createElement("hr",{width:"90%"}),u().createElement("div",null,u().createElement("h5",null,u().createElement(T.ZP.Message,{msgId:"queryform.spatialfilter.details.details_circle_label"})))))}return t})),Te(e,"isWGS84",(function(){return"EPSG:4326"===e.props.projection})),Te(e,"roundValue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6;return Math.round(e*t)/t})),Te(e,"resetGeom",(function(){"BBOX"===e.props.type?e.resetBBOX():"Circle"===e.props.type&&e.resetCircle()})),Te(e,"resetBBOX",(function(){for(var t in e.extent)t&&(document.getElementById("queryform_bbox_"+t).value=e.roundValue(e.extent[t],1e6),e.onUpdateBBOX(e.extent[t],t))})),Te(e,"resetCircle",(function(){document.getElementById("queryform_circle_radius").value=e.roundValue(e.circle.radius,100),e.onUpdateCircle(e.circle.radius,"radius"),document.getElementById("queryform_circle_x").value=e.roundValue(e.circle.x,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.x,"x"),document.getElementById("queryform_circle_y").value=e.roundValue(e.circle.y,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.y,"y")})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props.geometry;"BBOX"===this.props.type?(this.extent=this.getBBOXDimensions(e),this.tempExtent=he()({},this.extent)):"Circle"===this.props.type&&(this.circle=this.getCircleDimensions(e),this.tempCircle=he()({},this.circle))}},{key:"render",value:function(){var e=this;return u().createElement(oe.Z,{buttons:[{key:"confirm",glyph:"ok",tooltipId:"confirm",onClick:function(){return e.onModifyGeometry()}},{key:"reset",tooltipId:"queryform.reset",glyph:"clear-filter",onClick:function(){return e.resetGeom()}},{key:"close",glyph:"1-close",onClick:function(){return e.onClosePanel(!1)}}],title:u().createElement(T.ZP.Message,{msgId:"queryform.spatialfilter.details.details_header"}),locked:!0,expanded:!0,className:"details-panel",bsStyle:"primary"},this.renderDetailsContent())}}])&&Ee(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);Te(Ce,"propTypes",{useMapProjection:a().bool,geometry:a().object,type:a().string,onShowPanel:a().func,onChangeDrawingStatus:a().func,zoom:a().number,projection:a().string,enableGeodesic:a().bool}),Te(Ce,"defaultProps",{useMapProjection:!0,geometry:null,type:null,onShowPanel:function(){},onChangeDrawingStatus:function(){}});const De=Ce;function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Me(n.key),n)}}function Ne(e,t,r){return t=Le(t),function(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_e()?Reflect.construct(t,r||[],Le(e).constructor):t.apply(e,r))}function _e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_e=function(){return!!e})()}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}function Ae(e,t){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ae(e,t)}function qe(e,t,r){return(t=Me(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:t+""}var ke=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return qe(e=Ne(this,t,[].concat(n)),"state",{open:!1}),qe(e,"getFilter",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",n={filterFields:[{attribute:e.props.searchAttribute,operator:r,value:t,type:"list"}]};return e.props.dependsOn&&(n.groupFields=[{id:1,logic:"AND",index:0}],n.filterFields[0].groupId=1,e.props.multivalue?(n.groupFields.push({id:2,logic:"OR",groupId:1,index:1}),e.props.dependsOn.value instanceof Array?e.props.dependsOn.value.forEach((function(t){n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:t,groupId:2,type:"list"})})):n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:2,type:"list"})):n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:1,type:"list"})),(0,N.toOGCFilter)(e.props.typeName,n,e.props.wfs,e.props.sort||{sortBy:e.props.searchAttribute,sortOrder:"ASC"})})),qe(e,"changeZoneValue",(function(t,r,n){var o;e.setState({open:!1}),o=e.props.multivalue?{value:n.map((function(e){return e.id})),feature:n.map((function(e){return e.feature}))}:{value:[n],feature:[e.values.filter((function(e){return e.id===n}))[0].feature]},e.props.onChange(e.props.zoneId,o)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.values&&!o()(this.props.values,e.values)&&e.values.length>0&&this.setState({open:!0})}},{key:"render",value:function(){var e=this;this.values=[],this.props.values&&this.props.values.length>0&&(this.values=this.props.values.map((function(t){var r=t;e.props.valueField.split(".").forEach((function(e){r=r?r[e]:null}));var n=t;return e.props.textField.split(".").forEach((function(e){n=n?n[e]:null})),{id:r,name:n,feature:t}})));var t=this.props.label?u().createElement("label",null,this.props.label):u().createElement("span",null),r=this.props.error;return r&&(r="object"!==Re(r)?r:r.status+" "+r.statusText+": "+r.data),u().createElement("div",{className:"zone-combo"},t,u().createElement(ie.Z,{key:(new Date).getTime(),busy:this.props.busy,disabled:this.props.disabled,fieldRowId:this.props.zoneId,valueField:"id",textField:"name",fieldOptions:this.values,fieldValue:this.props.value,fieldName:"zone",fieldException:r,options:{defaultOpen:this.state.open},groupBy:this.props.groupBy?function(t){return t.feature.properties[e.props.groupBy]}:function(){},multivalue:this.props.multivalue,comboFilter:this.props.comboFilter,onSelect:this.props.onSelect,onUpdateField:this.changeZoneValue,onToggle:function(t){if(t&&(!e.props.values||e.props.values.length<1)){var r=e.getFilter(e.props.searchText,e.props.searchMethod);e.props.onSearch(!0,e.props.zoneId),e.props.onFilter(e.props.url,r,e.props.zoneId)}}}))}}])&&Ie(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);qe(ke,"propTypes",{zoneId:a().number,url:a().string,typeName:a().string,wfs:a().string,busy:a().bool,values:a().array,value:a().oneOfType([a().object,a().number,a().string,a().array]),label:a().string,searchText:a().string,searchMethod:a().string,searchAttribute:a().string,sort:a().object,error:a().oneOfType([a().object,a().string]),comboFilter:a().oneOfType([a().bool,a().string,a().func]),groupBy:a().oneOfType([a().string,a().func]),multivalue:a().bool,open:a().bool,disabled:a().bool,dependsOn:a().object,valueField:a().string,textField:a().string,onSearch:a().func,onFilter:a().func,onChange:a().func,onSelect:a().func}),qe(ke,"contextTypes",{messages:a().object}),qe(ke,"defaultProps",{open:!1,zoneId:null,url:null,typeName:null,wfs:"1.1.0",busy:!1,values:[],value:null,valueField:null,textField:null,label:null,disabled:!1,error:null,searchText:"*",searchMethod:"ilike",searchAttribute:null,comboFilter:"contains",multivalue:!0,groupBy:null,onSearch:function(){},onFilter:function(){},onChange:function(){},onSelect:function(){}});const Ge=ke;function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Be.apply(this,arguments)}function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qe(n.key),n)}}function ze(e,t,r){return t=We(t),function(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ve()?Reflect.construct(t,r||[],We(e).constructor):t.apply(e,r))}function Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ve=function(){return!!e})()}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},He(e,t)}function $e(e,t,r){return(t=Qe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qe(e){var t=function(e,t){if("object"!=Ue(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ue(t)?t:t+""}var Ye=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return $e(e=ze(this,t,[].concat(n)),"getMethodFromId",(function(t){return w()(e.props.spatialMethodOptions,(function(e){return e&&e.id===t}))||null})),$e(e,"renderHeader",(function(){var t=(0,F.S$)(e.context.messages,"queryform.spatialfilter.spatial_filter_header");return u().createElement("span",null,u().createElement("span",{style:{cursor:"pointer"},onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded)},t))})),$e(e,"renderSpatialHeader",(function(){var t=e.getMethodFromId(e.props.spatialField.method);return u().createElement("div",null,u().createElement(S.Row,{className:"logicHeader inline-form filter-field-row filter-field-fixed-row"},u().createElement(S.Col,{xs:6},u().createElement("div",null,u().createElement(T.ZP.Message,{msgId:"queryform.spatialfilter.filterType"}))),u().createElement(S.Col,{xs:6},u().createElement(ie.Z,{itemComponent:function(t){return u().createElement(ve,Be({customItemClassName:e.getMethodFromId(t.item)&&e.getMethodFromId(t.item).customItemClassName||""},t))},fieldOptions:e.props.spatialMethodOptions.map((function(t){return(0,F.S$)(e.context.messages,t.name)||t.name})),placeholder:(0,F.S$)(e.context.messages,"queryform.spatialfilter.combo_placeholder"),fieldName:"method",fieldRowId:(new Date).getTime(),fieldValue:(0,F.S$)(e.context.messages,t?t.name:"")||t&&t.name||"",onUpdateField:e.updateSpatialMethod}))))})),$e(e,"renderDwithin",(function(){return u().createElement(S.Row,{className:"container-fluid filter-field-fixed-row"},u().createElement(S.Col,{xs:6,className:"filter-text-desc"},u().createElement(T.ZP.Message,{msgId:"queryform.spatialfilter.dwithin_label"})),u().createElement(S.Col,{xs:6},u().createElement(x.Z,{type:"number",min:"0",defaultValue:"0",disabled:!e.props.spatialField.geometry,id:"queryform_dwithin_field",onChange:function(t){return e.props.actions.onChangeDwithinValue(t,name)}})))})),$e(e,"renderZoneFields",(function(){return e.props.spatialField.method&&"ZONE"===e.props.spatialField.method&&e.props.spatialField.zoneFields&&e.props.spatialField.zoneFields.length>0?e.props.spatialField.zoneFields.map((function(t){return u().createElement(Ge,{key:t.id,open:t.open,zoneId:t.id,url:t.url,typeName:t.typeName,wfs:t.wfs,busy:t.busy,label:t.label,values:t.values,value:t.value,valueField:t.valueField,textField:t.textField,searchText:t.searchText,searchMethod:t.searchMethod,searchAttribute:t.searchAttribute,sort:t.sort,error:t.error,disabled:t.disabled,dependsOn:t.dependson,groupBy:t.groupBy,multivalue:t.multivalue,onSearch:e.props.actions.zoneSearch,onFilter:e.props.actions.zoneFilter,onChange:e.props.actions.zoneChange})})):null})),$e(e,"renderRoiPanel",(function(){var t=e.getMethodFromId(e.props.spatialField.method),r=t&&t.filterProps&&t.filterProps.valueField&&e.props.spatialField&&e.props.spatialField.value&&e.props.spatialField.value[t.filterProps.valueField];return u().createElement(S.Panel,null,u().createElement("div",{className:"container-fluid"},u().createElement(S.Row,{className:"filter-field-row filter-field-fixed-row"},u().createElement(S.Col,{xs:6},u().createElement("span",null,t&&t.name||t.id)),u().createElement(S.Col,{xs:6},u().createElement(ne,{originalValue:r,key:e.props.spatialField.method,options:t,autocompleteStreamFactory:j.Vj,valueField:t&&t.filterProps&&t.filterProps.valueField,textField:t&&t.filterProps&&t.filterProps.valueField,url:t&&t.url,filter:"contains",onChangeSpatialFilterValue:e.props.actions.onChangeSpatialFilterValue,onChangeDrawingStatus:function(){var t;(t=e.props.actions).onChangeDrawingStatus.apply(t,arguments)},filterProps:t&&t.filterProps})))))})),$e(e,"renderSpatialPanel",(function(t,r,n){return u().createElement(S.Panel,{className:"spatial-panel"},e.props.spatialMethodOptions.length>1?e.renderSpatialHeader():u().createElement("span",null),e.renderZoneFields(),e.props.spatialField.method&&e.getMethodFromId(e.props.spatialField.method)&&"wfsGeocoder"===e.getMethodFromId(e.props.spatialField.method).type?e.renderRoiPanel():null,e.props.spatialOperations.length>1?u().createElement(S.Panel,null,u().createElement("div",null,t),n&&"DWITHIN"===n.id?e.renderDwithin():null,u().createElement(S.Row,null,u().createElement(S.Col,{xs:12},r))):u().createElement("span",null))})),$e(e,"renderButtons",(function(){var t=[],r=e.props.showDetailsButton&&e.props.spatialField.geometry&&(e.props.spatialField.method&&"BBOX"===e.props.spatialField.method||"Circle"===e.props.spatialField.method),n=e.props.spatialField.geometry&&e.props.spatialField.geometry.coordinates;return r&&t.push({glyph:"pencil",onClick:function(){return e.props.actions.onShowSpatialSelectionDetails(!0)},tooltipId:"queryform.spatialfilter.details.detail_button_label"}),n&&t.push({glyph:"clear-filter",tooltipId:"queryform.spatialfilter.remove",bsStyle:e.props.clearFilterOptions.buttonStyle,className:e.props.clearFilterOptions.className,onClick:function(){return e.resetSpatialFilter()}}),t})),$e(e,"updateSpatialMethod",(function(t,r,n){e.props.actions.onShowSpatialSelectionDetails(!1);var o=e.props.spatialMethodOptions.filter((function(t){return n===((0,F.S$)(e.context.messages,t.name)||t.name)}))[0].id,i=e.getMethodFromId(o);if(e.props.actions.onSelectSpatialMethod(o,r),"wfsGeocoder"!==e.getMethodFromId(o).type)switch(o){case"ZONE":e.changeDrawingStatus("clean","","queryform",[]);break;case"Viewport":e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onSelectViewportSpatialMethod();break;default:e.changeDrawingStatus("start",o,"queryform",[],{geodesic:!!P()(i.geodesic)||i.geodesic,stopAfterDrawing:!0})}else e.changeDrawingStatus("clean","","queryform",[])})),$e(e,"updateSpatialOperation",(function(t,r,n){var o=e.props.spatialOperations.filter((function(t){return n===(0,F.S$)(e.context.messages,t.name)}))[0].id;e.props.actions.onSelectSpatialOperation(o,r)})),$e(e,"resetSpatialFilter",(function(){e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onRemoveSpatialSelection(),e.props.actions.onShowSpatialSelectionDetails(!1)})),$e(e,"changeDrawingStatus",(function(t,r,n,o,i){e.props.actions.onChangeDrawingStatus(t,void 0!==r?r:e.props.spatialField.method,n,o,i)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.spatialOperations.filter((function(t){return e.props.spatialField.operation===t.id}))[0],r=u().createElement("span",null);"ZONE"!==this.props.spatialField.method&&"Viewport"!==this.props.spatialField.method&&this.getMethodFromId(this.props.spatialField.method)&&"wfsGeocoder"!==this.getMethodFromId(this.props.spatialField.method).type&&(r=this.props.spatialField.geometry?null:u().createElement("span",null,u().createElement("div",{className:"m-label m-caption text-center"},u().createElement(T.ZP.Message,{msgId:"queryform.spatialfilter.draw_start_label"}))));var n=this.getMethodFromId(this.props.spatialField.method),o=this.props.showDetailsPanel?u().createElement(De,{useMapProjection:this.props.useMapProjection,enableGeodesic:!!P()(n.geodesic)||n.geodesic,geometry:this.props.spatialField.geometry,type:this.props.spatialField.method,onShowPanel:this.props.actions.onShowSpatialSelectionDetails,onChangeDrawingStatus:this.changeDrawingStatus,zoom:this.props.zoom,projection:this.props.projection}):u().createElement("span",null),i=u().createElement(S.Row,{className:"filter-field-row inline-form filter-field-fixed-row"},u().createElement(S.Col,{xs:6},u().createElement(T.ZP.Message,{msgId:"queryform.spatialfilter.geometric_operation"})),u().createElement(S.Col,{xs:6},u().createElement(ie.Z,{fieldOptions:this.props.spatialOperations.map((function(t){return(0,F.S$)(e.context.messages,t.name)})),fieldName:"operation",fieldRowId:(new Date).getTime(),fieldValue:(0,F.S$)(this.context.messages,t?t.name:""),onUpdateField:this.updateSpatialOperation})));return u().createElement("div",{className:"query-filter-container"},this.props.withContainer?u().createElement(oe.Z,{id:"spatialFilterPanel",header:this.renderHeader(),buttons:this.renderButtons(),collapsible:!0,expanded:this.props.spatialPanelExpanded,onSwitch:function(t){return e.props.actions.onExpandSpatialFilterPanel(t)}},this.renderSpatialPanel(i,r,t)):this.renderSpatialPanel(i,r,t),o)}}])&&Ze(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);$e(Ye,"propTypes",{useMapProjection:a().bool,spatialField:a().object,spatialOperations:a().array,spatialMethodOptions:a().array,spatialPanelExpanded:a().bool,showDetailsButton:a().bool,clearFilterOptions:a().object,showDetailsPanel:a().bool,withContainer:a().bool,actions:a().object,zoom:a().number,projection:a().string}),$e(Ye,"contextTypes",{messages:a().object}),$e(Ye,"defaultProps",{useMapProjection:!0,spatialField:{},spatialPanelExpanded:!0,showDetailsButton:!0,clearFilterOptions:{className:"square-button-sm no-border",buttonStyle:"default"},showDetailsPanel:!1,withContainer:!0,spatialMethodOptions:[],spatialOperations:[],actions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeSpatialFilterValue:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeRegion:function(){},onChangeDwithinValue:function(){},zoneFilter:function(){},zoneSearch:function(){},zoneChange:function(){}}});const Xe=Ye;var Je=["useEmbeddedMap"];var Ke=(0,s.connect)((function(e){return{useMapProjection:e.queryform.useMapProjection,spatialField:e.queryform.spatialField,showDetailsPanel:e.queryform.showDetailsPanel,spatialPanelExpanded:e.queryform.spatialPanelExpanded}}),(function(e){return{actions:(0,p.DE)({onChangeSpatialFilterValue:y.uo,onExpandSpatialFilterPanel:y.ku,onSelectSpatialMethod:y.HT,onSelectViewportSpatialMethod:y.lg,onSelectSpatialOperation:y.VF,onChangeDrawingStatus:h.Yf,onRemoveSpatialSelection:y.Ry,onShowSpatialSelectionDetails:y.ZH,onChangeDwithinValue:y.AQ,zoneFilter:y.eJ,zoneSearch:y.uM,zoneChange:y.uP},e)}}))(Xe),et=(0,s.connect)((function(e){return{zoom:((0,v.Od)(e)||{}).zoom,projection:((0,v.Od)(e)||{}).projection}}))(Ke),tt=(0,s.connect)((function(e){return{zoom:((0,g.By)(e)||{}).zoom,projection:((0,g.By)(e)||{}).projection}}))(Ke);var rt=r(227361),nt=r.n(rt),ot=r(49977),it=r.n(ot),at=r(886850),lt=r(378889),ut=r(285547),st={"xsd:normalizedString":"string","xsd:string":"string","xsd:date":"date","xsd:dateTime":"date","xsd:date-time":"date-time","xsd:time":"time","xsd:decimal":"number","xsd:int":"number","xsd:integer":"number","xsd:long":"number","xsd:negativeInteger":"number","xsd:nonNegativeInteger":"number","xsd:nonPositiveInteger":"number","xsd:positiveInteger":"number","xsd:short":"number","xsd:unsignedLong":"number","xsd:unsignedInt":"number","xsd:unsignedShort":"number","xsd:number":"number","xsd:boolean":"boolean","xsd:double":"number","xsd:float":"number","xsd:array":"array"},ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return nt()(e,"featureTypes[0].properties").filter((function(e){return 0!==e.type.indexOf("gml:")&&st[e.type]})).map((function(e){var r=w()(t,{name:e.name});return{label:(0,ut.s8)(null==r?void 0:r.alias,e.name),attribute:e.name,type:st[e.type],valueId:"id",valueLabel:"name",values:[]}}))},pt=r(273849);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mt(e,t,r){var n;return n=function(e,t){if("object"!=ft(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==ft(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const bt=(0,R.compose)((0,R.withPropsOnChange)(["crossLayerFilter"],(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).crossLayerFilter,t=void 0===e?{}:e;return{queryCollection:nt()(t,"collectGeometries.queryCollection"),operation:nt()(t,"operation"),distance:nt()(t,"distance")}})),(0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layers,r=void 0===t?[]:t,n=e.queryCollection,o=void 0===n?{}:n;return{layer:w()(r,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name===o.typeName}))}})),(0,R.withHandlers)({setQueryCollectionParameter:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){r("collectGeometries.queryCollection[".concat(e,"]"),t),"typeName"===e&&r("collectGeometries.queryCollection.filterFields",[])}},updateLogicCombo:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){return r("collectGeometries.queryCollection.groupFields",[{id:e,logic:t,index:0}])}},setOperation:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e){return r("operation",e)}}}),(0,R.defaultProps)({dataStreamFactory:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).setQueryCollectionParameter,r=void 0===t?function(){}:t;return function(e){return e.distinctUntilChanged((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).searchUrl===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).searchUrl})).switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.crossLayerExpanded?ot.Observable.of(t):e.filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).crossLayerExpanded})).take(1)})).switchMap((function(e){var t=e.featureTypeName,r=e.searchUrl;return(0,at.ED)({layer:{name:t,url:r,search:{type:"wfs",url:r}}}).do((function(e){if(t=e,r=nt()(t,"WFS_Capabilities.Filter_Capabilities.Scalar_Capabilities.ArithmeticOperators.Functions.FunctionNames.FunctionName"),!w()(r,(function(){return"queryCollection"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})._})))throw new Error("nocrosslayerfunctionalities");var t,r})).map((function(){return{loadingCapabilities:!1}})).catch((function(e){return ot.Observable.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({loadingCapabilities:!0})})).startWith({})}(e).combineLatest(function(e,t){return e.distinctUntilChanged((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer,t=void 0===e?{}:e,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).layer;return r&&t.name===(r&&r.name)})).filter((function(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer})).switchMap((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer;return ot.Observable.defer((function(){return(0,at.v$)({layer:e})})).do((function(e){var r=nt()((0,lt.findGeometryProperty)(e.data||{}),"name");r&&t("geometryName",r)})).map((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data;return ct(void 0===t?{}:t,null==e?void 0:e.fields)})).map((function(e){return{attributes:e,loadingAttributes:!1}})).startWith({loadingAttributes:!0}).catch((function(e){return ot.Observable.of({errorObj:e,loadingAttributes:!1,featureTypeProperties:[]})}))})).catch((function(e){return ot.Observable.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({})}(e,r),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dt(dt({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),e)})).startWith({})}}),pt.Z);var vt=r(805346),gt=r(743129),ht=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).item;return u().createElement("span",null,e&&e.name?u().createElement(vt.Z,{msgId:e.name}):null)};const Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.spatialOperations,r=void 0===t?[]:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.value;return u().createElement(q.DropdownList,{valueField:"id",className:"geometry-operation-selector",onChange:o,data:r,valueComponent:ht,value:i,itemComponent:ht})};var wt=r(611847),Et=r(202576);function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var St=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.search,n=t.url;return(0,wt.w0)(e,n)||(0,wt.w0)(e,r&&r.url)},jt=function(e){return(e||[]).filter((function(){return"BBOX"!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id}))};function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(r),!0).forEach((function(t){Ct(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ct(e,t,r){var n;return n=function(e,t){if("object"!=Ft(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ft(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Dt=(0,R.compose)((0,s.connect)((function(e){return{attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,crossLayerExpanded:e.queryform.crossLayerExpanded,crossLayerFilterOptions:xt({layers:(0,g.GK)(e),crossLayerFilter:(0,g.qh)(e)},e.queryform.crossLayerFilterOptions||{}),searchUrl:e.query&&e.query.url,featureTypeName:e.query&&e.query.typeName}}),(function(e){return{crossLayerFilterActions:(0,p.DE)({expandCrossLayerFilterPanel:y.EU,setCrossLayerFilterParameter:y.IV,addCrossLayerFilterField:y.N5,updateCrossLayerFilterField:y.bn,removeCrossLayerFilterField:y.Bm,resetCrossLayerFilter:y.F2,toggleMenu:function(e,t){return(0,y.js)(e,t,"crossLayer")}},e)}})),(0,R.withProps)((function(e){var t=e.crossLayerFilterOptions,r=e.crossLayerFilterActions;return xt(xt({},t),r)})),bt)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.crossLayerExpanded,n=void 0===r||r,o=t.spatialOperations,i=t.expandCrossLayerFilterPanel,a=void 0===i?function(){}:i,l=t.layers,s=void 0===l?[]:l,c=t.errorObj,p=t.loadingAttributes,f=t.loadingCapabilities,y=t.searchUrl,d=t.queryCollection,b=void 0===d?{}:d,v=t.attributes,g=void 0===v?[]:v,h=t.operation,O=t.updateLogicCombo,w=void 0===O?function(){}:O,E=t.resetCrossLayerFilter,P=void 0===E?function(){}:E,j=t.setOperation,F=void 0===j?function(){}:j,T=t.setQueryCollectionParameter,x=void 0===T?function(){}:T,C=t.addCrossLayerFilterField,D=void 0===C?function(){}:C,R=t.updateCrossLayerFilterField,I=void 0===R?function(){}:R,N=t.removeCrossLayerFilterField,_=void 0===N?function(){}:N,L=t.toggleMenu,A=void 0===L?function(){}:L,q=b.typeName,M=b.geometryName,k=b.filterFields,G=b.groupFields,U=void 0===G?[{id:1,logic:"OR",index:0}]:G,B=s.filter((function(e){return!St(y,e)}));return u().createElement(oe.Z,{loading:f,expanded:n&&!f&&!c,error:c,errorMsgId:"queryPanel",buttons:(e=q?[{glyph:"clear-filter",tooltipId:"queryform.crossLayerFilter.clear",onClick:function(){return P()}}]:[],function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),onSwitch:a,title:u().createElement(vt.Z,{msgId:"queryform.crossLayerFilter.title"})},u().createElement(S.Row,{className:"inline-form filter-field-fixed-row"},u().createElement(S.Col,{xs:6},u().createElement("div",null,u().createElement(vt.Z,{msgId:"queryform.crossLayerFilter.targetLayer"}),"",s.length&&B.length?u().createElement(Et.Z,{bsStyle:"link",text:u().createElement(vt.Z,{msgId:"queryform.crossLayerFilter.errors.layersExcluded"})}):null)),u().createElement(S.Col,{xs:6},u().createElement(gt.ZP,{clearable:!1,disabled:f||!!c,isLoading:p,options:s.filter((function(e){return St(y,e)})).map((function(e){return{label:e.title||e.name,value:e.name}})),placeholder:u().createElement(vt.Z,{msgId:"queryform.crossLayerFilter.placeholder"}),filter:"contains",value:q,onChange:function(e){x("typeName",e&&e.value)}}))),q&&M?u().createElement(S.Row,{className:"inline-form filter-field-fixed-row"},u().createElement(S.Col,{xs:6},u().createElement("div",null,u().createElement(vt.Z,{msgId:"queryform.crossLayerFilter.operation"}))),u().createElement(S.Col,{xs:6},u().createElement(Ot,{value:h,onChange:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return F(e)},spatialOperations:jt(o)}))):null,q&&M&&h?u().createElement(S.Row,{className:"filter-field-fixed-row"},u().createElement(S.Col,{xs:12},u().createElement(m.Z,{dropUp:!0,autocompleteEnabled:!0,withContainer:!1,attributes:g,groupLevels:-1,filterFields:k,actions:{onUpdateLogicCombo:w,onAddFilterField:D,onUpdateFilterField:I,onRemoveFilterField:_,toggleMenu:A},groupFields:U,filterField:!0}))):null)}));var Rt=r(399534),It=r(461365),Nt=r(461928),_t=r(507848),Lt=r(91812),At=r(319180),qt=r(469705);function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}var kt=["DrawSupport","tools"];function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach((function(t){Bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bt(e,t,r){var n;return n=function(e,t){if("object"!=Mt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Mt(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zt=(0,s.connect)((function(e){return e.draw||{}}),{onChangeDrawingStatus:h.Yf,onEndDrawing:h.fo,onGeometryChanged:h.Vw,onDrawStopped:h.lo,setCurrentStyle:h.PY}),zt=r(441609),Vt=r.n(zt),Wt=r(552259);function Ht(e){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(e)}var $t=["bbox"];function Qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach((function(t){Xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xt(e,t,r){var n;return n=function(e,t){if("object"!=Ht(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ht(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Kt=(0,R.compose)((0,R.defaultProps)({onMapReady:function(){},baseLayer:{group:"background",id:"mapnik__0",loading:!1,loadingError:!1,name:"mapnik",source:"osm",title:"Open Street Map",type:"osm",visibility:!0}}),(0,R.withPropsOnChange)("baseLayer",(function(e){return{layers:[e.baseLayer]}})),(0,R.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,Wt.Qf)()}})),(0,R.withStateHandlers)((function(){return{initialized:!1}}),{onMapViewChanges:function(){return function(e){return{map:e}}},onLayerLoad:function(e,t){var r=e.map,n=e.initialized,o=t.onMapReady,i=t.baseLayer,a=t.hookRegister,l=t.layer;return function(e){if(!n&&e===i.id){o(r);var t=l.bbox.bounds,u=a.getHook(Wt.TH);return u&&u(t,{crs:l.bbox.crs,maxZoom:21}),{initialized:!0}}return{}}},centerLayer:function(e,t){var r=t.layer;return function(e){if(Vt()(r))return{};var t=(0,Oe.getExtentFromViewport)(r.bbox,r.bbox.crs),n=(0,Wt.vR)(t,r.bbox.crs),o=r.bbox.crs!==(e.projection||"EPSG:3857")?(0,Oe.reprojectBbox)(r.bbox.bounds,r.bbox.crs,e.projection||"EPSG:3857"):r.bbox.extent,i=1;return null!=e&&e.size&&(i=(0,Wt.Of)(o,e.size,0,21)),e.bbox,{map:Yt(Yt({},Jt(e,$t)),{},{zoom:i,center:n,extent:o,mapStateSource:"mapModal"})}}}}),(0,R.withProps)((function(e){return{layers:e.layers.concat(e.layer||[])}})),(0,R.withPropsOnChange)((function(e,t){var r=e.map,n=void 0===r?{}:r,o=t.map;return!(null!=n&&n.size)&&(null==o?void 0:o.size)}),(function(e){var t=e.centerLayer,r=e.map;return null!=r&&r.size&&t(r),{}})),(0,R.withProps)((function(e){return{eventHandlers:{onLayerLoad:e.onLayerLoad}}})));Kt.displayName="mapEnhancer";const er=Kt;var tr=(0,R.compose)(er,qt.Z,(0,Lt.Z)(0),_t.Z,At.Z,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt;return(0,R.withPropsOnChange)(["plugins"],(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).plugins,r=t.DrawSupport,n=t.tools,o=void 0===n?{}:n,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,kt);if(!r)return{};var a=e(r);return{plugins:Ut(Ut({},i),{},{tools:Ut(Ut({},o),{},{draw:a})})}}))}())(Nt.Z),rr=function(e){var t=e.map,r=e.mapStateSource,n=e.layer,o=void 0===n?{}:n,i=e.onMapReady,a=void 0===i?function(){}:i;return t?u().createElement(tr,{map:t,mapStateSource:r,onMapReady:a,zoomControl:!0,options:{style:{height:"100%"}},layer:o,tools:["draw"]}):null};rr.propTypes={map:a().object,mapStateSource:a().string,onMapReady:a().bool,layer:a().object};const nr=rr;var or=r(401757),ir=r(95797),ar=(0,s.connect)((0,f.P1)([or.GW,g.By],(function(e,t){return{layer:e,map:t,mapStateSource:"wizardMap"}})),{onMapReady:ir.Xc})(nr);const lr={start:[],attributes:[{id:"attributeFilter",plugin:b,cfg:{},position:1}],afterAttributes:[],spatial:[{id:"spatialFilter",plugin:function(e){var t=e.useEmbeddedMap,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Je);return t?u().createElement(tt,r):u().createElement(et,r)},cfg:{},position:1}],afterSpatial:[],layers:[{id:"crossLayer",plugin:Dt,cfg:{},position:1}],end:[],map:[{id:"spatialFilterMap",plugin:(0,It.Z)((function(e){var t=e.container,r=e.useEmbeddedMap,n=e.hideSpatialFilter,o=e.queryPanelEnabled;return r&&!n&&o?u().createElement(Rt.Z,{container:t},u().createElement("div",{className:"mapstore-query-map"},u().createElement(ar,e))):null})),cfg:{},position:1}]};var ur=r(690825),sr=r(607147),cr=r(640512),pr=r(580416),fr=r(801550),yr=r(893379),dr=r.n(yr),mr=r(949469);dr()(mr.Z,{insert:"head",singleton:!1}),mr.Z.locals;var br=r(472986),vr=r.n(br),gr=r(965539),hr=r(843614),Or=r(38560),wr=r(80717);function Er(e){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(e)}function Pr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cr(n.key),n)}}function Sr(e,t,r){return t=Fr(t),function(e,t){if(t&&("object"===Er(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,jr()?Reflect.construct(t,r||[],Fr(e).constructor):t.apply(e,r))}function jr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jr=function(){return!!e})()}function Fr(e){return Fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fr(e)}function Tr(e,t){return Tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tr(e,t)}function xr(e,t,r){return(t=Cr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cr(e){var t=function(e,t){if("object"!=Er(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Er(t)?t:t+""}var Dr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xr(r=Sr(this,t,[e]),"getCurrentFilter",(function(){return{featureTypeName:r.props.featureTypeName,groupFields:r.props.groupFields,filterFields:r.props.sendFilters&&r.props.sendFilters.attributeFilter&&r.props.filterFields.filter((function(e){return(0,N.checkOperatorValidity)(e.value,e.operator)}))||[],spatialField:r.props.sendFilters&&r.props.sendFilters.spatialFilter&&r.props.spatialField||{attribute:r.props.spatialField&&r.props.spatialField.attribute},pagination:r.props.pagination,filterType:r.props.filterType,ogcVersion:r.props.ogcVersion,sortOptions:r.props.sortOptions,crossLayerFilter:r.props.sendFilters&&r.props.sendFilters.crossLayerFilter&&(0,N.setupCrossLayerFilterDefaults)(r.props.crossLayerFilter)||null,hits:r.props.hits,filters:r.props.filters}})),xr(r,"isCurrentFilterChanged",(function(){var e=r.getCurrentFilter(),t={groupFields:e.groupFields,filterFields:e.filterFields,spatialField:e.spatialField,crossLayerFilter:e.crossLayerFilter,filters:e.filters},n=r.props.appliedFilter||{},i={groupFields:n.groupFields,filterFields:n.attributePanelExpanded&&n.filterFields||[],spatialField:n.spatialPanelExpanded&&n.spatialField||{attribute:r.props.spatialField&&r.props.spatialField.attribute},filters:n.filters,crossLayerFilter:n.crossLayerExpanded&&n.crossLayerFilter&&n.crossLayerFilter.operation?(0,N.setupCrossLayerFilterDefaults)(n.crossLayerFilter):null};return!o()(t,i)})),xr(r,"search",(function(){var e=r.getCurrentFilter();r.props.actions.onQuery(r.props.searchUrl,e,r.props.params),r.props.advancedToolbar&&r.props.actions.storeAppliedFilter()})),xr(r,"reset",(function(){if(r.props.actions.onChangeDrawingStatus("clean","","queryform",[]),r.props.actions.onReset(),r.props.advancedToolbar){var e={featureTypeName:r.props.featureTypeName,groupFields:[],filterFields:[],spatialField:{attribute:r.props.spatialField&&r.props.spatialField.attribute},pagination:r.props.pagination,filterType:r.props.filterType,ogcVersion:r.props.ogcVersion,sortOptions:r.props.sortOptions,crossLayerFilter:null,hits:r.props.hits};r.props.actions.onQuery(r.props.searchUrl,e,r.props.params),r.props.advancedToolbar&&r.props.actions.storeAppliedFilter()}})),xr(r,"restorePersistedFilter",(function(){r.props.actions.onRestoreFilter()})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tr(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this,t=this.props.filterFields.filter((function(e){return e.exception})).length>0,r=this.props.allowEmptyFilter&&!this.props.advancedToolbar,n=this.props.filterFields.filter((function(e){return(0,N.checkOperatorValidity)(e.value,e.operator)})).length>0,i=(0,N.isFilterEmpty)(this.props),a=(0,N.isFilterEmpty)(this.props.appliedFilter),l=this.isCurrentFilterChanged(),s=n||this.props.spatialField.geometry||(0,N.isCrossLayerFilterValid)(this.props.crossLayerFilter)||this.props.filters&&this.props.filters.length>0&&this.props.filters.map((function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).invalid})).reduce((function(e,t){return e&&t}),!0),c=!o()(this.props.appliedFilter,this.props.storedFilter),p=r||i&&this.props.appliedFilter&&!a,f=t||!this.props.toolbarEnabled||i&&!p||!i&&(!s||!l),y=this.props.emptyFilterWarning&&i&&l,d=this.props.advancedToolbar?"queryform.apply":this.props.queryBtnMsgId,m=[{tooltipId:y?"queryform.emptyfilter":d,disabled:f,noTooltipWhenDisabled:!0,glyph:this.props.advancedToolbar?"ok":this.props.queryBtnGlyph,className:y?"square-button-md showWarning":"square-button-md",id:"query-toolbar-query",onClick:this.search}];if(this.props.advancedToolbar){var b=!c||this.props.loadingError||l,v=!c||!this.props.storedFilter||!this.props.toolbarEnabled,g=!this.props.appliedFilter||this.props.appliedFilter&&a||!this.props.toolbarEnabled;m=m.concat([{tooltipId:"queryform.save",disabled:b,noTooltipWhenDisabled:!0,glyph:"floppy-disk",id:"query-toolbar-save",onClick:this.props.actions.onSaveFilter},{tooltipId:"queryform.discard",disabled:v,noTooltipWhenDisabled:!0,glyph:"undo",id:"query-toolbar-discard",onClick:this.restorePersistedFilter},{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:g,onClick:this.reset}])}else m=[{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:!this.props.toolbarEnabled,onClick:this.reset}].concat(m);return u().createElement("div",{className:"container-fluid query-toolbar"},u().createElement(wr.Z,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md",tooltipPosition:"bottom"},className:"queryFormToolbar row-fluid pull-right",buttons:m}),u().createElement(hr.Z,{show:!!this.props.showGeneratedFilter,bsSize:"large"},u().createElement(hr.Z.Header,null,u().createElement(hr.Z.Title,null,this.props.resultTitle)),u().createElement(hr.Z.Body,null,u().createElement("textarea",{style:{width:"862px",maxWidth:"862px",height:"236px",maxHeight:"236px"}},this.props.showGeneratedFilter)),u().createElement(hr.Z.Footer,null,u().createElement(Or.Z,{style:{float:"right"},onClick:function(){return e.props.actions.onQuery(null,null)}},"Close"))))}}],n&&Pr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);xr(Dr,"propTypes",{filterType:a().string,params:a().object,filterFields:a().array,groupFields:a().array,spatialField:a().object,filters:a().array,sendFilters:a().object,crossLayerFilter:a().object,toolbarEnabled:a().bool,searchUrl:a().string,showGeneratedFilter:a().oneOfType([a().bool,a().string]),featureTypeName:a().string,actions:a().object,ogcVersion:a().string,titleMsgId:a().string,queryBtnMsgId:a().string,resultTitle:a().string,queryBtnGlyph:a().string,pagination:a().object,sortOptions:a().object,hits:a().bool,allowEmptyFilter:a().bool,emptyFilterWarning:a().bool,appliedFilter:a().object,storedFilter:a().object,advancedToolbar:a().bool,loadingError:a().bool}),xr(Dr,"defaultProps",{sendFilters:{attributeFilter:!0,spatialFilter:!0,crossLayerFilter:!0,filters:!0},filterType:"OGC",params:{},groupFields:[],filterFields:[],spatialField:{},toolbarEnabled:!0,searchUrl:null,showGeneratedFilter:!1,featureTypeName:null,titleMsgId:"queryform.title",queryBtnMsgId:"queryform.query",resultTitle:"Generated Filter",queryBtnGlyph:"search",pagination:null,sortOptions:null,hits:!1,allowEmptyFilter:!1,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,actions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){},storeAppliedFilter:function(){}}});const Rr=Dr;function Ir(){return Ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ir.apply(this,arguments)}var Nr=(0,r(617252).Z)((function(e){return u().createElement("div",Ir({className:"square-button pull-right no-border",style:{display:"flex"}},e),u().createElement(S.Glyphicon,{glyph:"exclamation-mark",className:"text-danger"}))}));const _r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.loadingError,r=e.onToggleQuery,n=void 0===r?function(){}:r,o=e.buttonStyle,i=void 0===o?"default":o;return u().createElement("div",{className:"mapstore-block-width"},u().createElement(Or.Z,{id:"toc-query-close-button",key:"menu-button",className:"square-button no-border",bsStyle:i,onClick:function(){return n()}},u().createElement(S.Glyphicon,{glyph:"arrow-left"})),t&&u().createElement(Nr,{popover:{text:u().createElement(vt.Z,{msgId:"queryform.loadingError"})}})||u().createElement("div",{className:"square-button pull-right no-border",style:{display:"flex"}},u().createElement(S.Glyphicon,{glyph:"filter",className:"text-primary"})))};var Lr=r(215248),Ar=["validations"],qr=["style"];function Mr(e){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(e)}function kr(){return kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kr.apply(this,arguments)}function Gr(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Ur(e){return function(e){if(Array.isArray(e))return Br(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Br(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Br(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xr(n.key),n)}}function zr(e,t,r){return t=Wr(t),function(e,t){if(t&&("object"===Mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Vr()?Reflect.construct(t,r||[],Wr(e).constructor):t.apply(e,r))}function Vr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vr=function(){return!!e})()}function Wr(e){return Wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wr(e)}function Hr(e,t){return Hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hr(e,t)}function $r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(r),!0).forEach((function(t){Yr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yr(e,t,r){return(t=Xr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xr(e){var t=function(e,t){if("object"!=Mr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mr(t)?t:t+""}var Jr=function(){return null};function Kr(e){return e.plugin?e:Qr(Qr({},e),{},{plugin:Jr})}var en=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Yr(e=zr(this,t,[].concat(n)),"getItems",(function(t){var r=e.props.selectedLayer,n=e.props.items.filter(e.filterItem(t,r)),o=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(r){return function(e){var t,r,n,o=arguments.length>2?arguments[2]:void 0;return null!==(t=n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find((function(t){return t.target===e.id})))&&void 0!==t&&t.layerNameRegex&&(new RegExp(n.layerNameRegex).test(o)||(n=null)),null!==(r=n)&&void 0!==r?r:e}(r,e,t)})).map(Kr)}(e.props.standardItems[t],e.props.items,r).map((function(e){return Qr(Qr({},e),{},{target:t})}));return[].concat(Ur(o),Ur(n)).sort((function(e,t){var r,n;return(null!==(r=e.position)&&void 0!==r?r:0)-(null!==(n=t.position)&&void 0!==n?n:0)}))})),Yr(e,"renderItem",(function(t,r){var n,o,i=r.validations,a=Gr(r,Ar),l=null!==(n=t.component)&&void 0!==n?n:t.plugin,s=e.props,c=(s.style,Gr(s,qr)),p=e.props[t.id+"Options"];return!0===a["hide".concat((0,Lr.upperFirst)(t.id))]?null:u().createElement(l,kr({role:"body"},c,t.cfg,a,p,{validation:null==i?void 0:i[null!==(o=t.id)&&void 0!==o?o:t.name]}))})),Yr(e,"renderItems",(function(t,r){return e.getItems(t).map((function(t){return e.renderItem(t,r)}))})),Yr(e,"filterItem",(function(e,t){return function(r){if(r.layerNameRegex){var n=new RegExp(r.layerNameRegex);return(!e||r.target===e)&&n.test(t)}return!e||r.target===e}})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hr(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){if(""!==this.props.featureTypeError)return u().createElement("div",null,u().createElement(_r,{onToggleQuery:this.props.controlActions.onToggleQuery}),u().createElement("div",{style:{margin:"0 auto","text-align":"center"}},this.props.featureTypeErrorText));var e=u().createElement("div",{className:"m-header"},this.props.header,u().createElement(Rr,{sendFilters:{attributeFilter:this.props.attributePanelExpanded,spatialFilter:this.props.spatialPanelExpanded,crossLayerFilter:this.props.crossLayerExpanded},filters:this.props.filters,params:this.props.params,filterFields:this.props.filterFields,groupFields:this.props.groupFields,spatialField:this.props.spatialField,toolbarEnabled:this.props.toolbarEnabled,searchUrl:this.props.searchUrl,showGeneratedFilter:this.props.showGeneratedFilter,featureTypeName:this.props.featureTypeName,ogcVersion:this.props.ogcVersion,filterType:this.props.filterType,actions:this.props.queryToolbarActions,resultTitle:this.props.resultTitle,pagination:this.props.pagination,sortOptions:this.props.sortOptions,crossLayerFilter:this.props.crossLayerFilterOptions.crossLayerFilter,hits:this.props.hits,allowEmptyFilter:this.props.allowEmptyFilter,emptyFilterWarning:this.props.emptyFilterWarning,appliedFilter:this.props.appliedFilter,storedFilter:this.props.storedFilter,advancedToolbar:this.props.advancedToolbar,loadingError:this.props.loadingError})),t=this.props,r=t.spatialMethodOptions,n=t.toolsOptions,o=t.spatialOperations;return this.props.attributes.length>0?u().createElement(u().Fragment,null,u().createElement(gr.Z,{header:e,className:"mapstore-query-builder",id:"query-form-panel"},this.renderItems("start",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("attributes",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("afterAttributes",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("spatial",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("afterSpatial",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("layers",Qr({spatialOperations:o,spatialMethodOptions:r},n)),this.renderItems("end",Qr({spatialOperations:o,spatialMethodOptions:r},n))),this.renderItems("map",Qr({spatialOperations:o,spatialMethodOptions:r},n))):u().createElement("div",{className:"spinner-panel",style:{margin:"0 auto",width:"60px"}},u().createElement(vr(),{spinnerName:"three-bounce",overrideSpinnerClassName:"spinner"}))}}])&&Zr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);Yr(en,"propTypes",{params:a().object,attributes:a().array,featureTypeError:a().string,featureTypeErrorText:a().node,filterFields:a().array,groupFields:a().array,spatialField:a().object,attributePanelExpanded:a().bool,spatialPanelExpanded:a().bool,crossLayerExpanded:a().bool,toolbarEnabled:a().bool,searchUrl:a().string,showGeneratedFilter:a().oneOfType([a().bool,a().string]),filters:a().array,filterType:a().string,featureTypeName:a().string,ogcVersion:a().string,queryToolbarActions:a().object,resultTitle:a().string,pagination:a().object,sortOptions:a().object,spatialOperations:a().array,spatialMethodOptions:a().array,crossLayerFilterOptions:a().object,hits:a().bool,buttonStyle:a().string,maxHeight:a().number,allowEmptyFilter:a().bool,emptyFilterWarning:a().bool,header:a().node,zoom:a().number,projection:a().string,toolsOptions:a().object,appliedFilter:a().object,storedFilter:a().object,advancedToolbar:a().bool,loadingError:a().bool,controlActions:a().object,standardItems:a().object,items:a().array,selectedLayer:a().oneOfType([a().string,a().bool]),style:a().object}),Yr(en,"defaultProps",{params:{},buttonStyle:"default",removeGroupButtonIcon:"trash",groupFields:[],filterFields:[],filters:[],attributes:[],spatialMethodOptions:[],spatialOperations:[],featureTypeError:"",spatialField:{},crossLayerFilter:null,attributePanelExpanded:!0,spatialPanelExpanded:!0,toolbarEnabled:!0,searchUrl:"",showGeneratedFilter:!1,featureTypeName:null,pagination:null,sortOptions:null,hits:!1,maxHeight:830,allowEmptyFilter:!1,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,crossLayerFilterOptions:{},queryToolbarActions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){}},toolsOptions:{},controlActions:{onToggleQuery:function(){}},items:[],selectedLayer:!1,standardItems:{},style:{}});const tn=en;var rn=r(694745),nn=r(410240),on=r.n(nn),an=r(375875),ln=r.n(an),un=r(197395),sn=r(284069),cn=r(737275),pn=r(824260),fn=r(788113);const yn={isAutoCompleteEnabled:function(e,t){return e.ofType(ir.S0).switchMap((function(e){var r=(0,cn.y9)(e.url,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:"gs:PagedUnique"},(0,fn.kS)(t.getState()));return null===r?it().Observable.of((0,y.NV)(!1)):it().Observable.fromPromise(ln().post(r,null,{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(e){return on()(e,"<ows:ExceptionReport")?it().Observable.of((0,y.NV)(!1)):it().Observable.of((0,y.NV)(!0))})).catch((function(){return it().Observable.of((0,y.NV)(!1))}))}))},fetchAutocompleteOptionsEpic:function(e,t){return e.ofType(y.l1,y.nh).debounce((function(e){return it().Observable.timer(e.fieldOptions.delayDebounce||0)})).filter((function(e){return"value"===e.fieldName&&"string"===e.fieldType&&t.getState().queryform.autocompleteEnabled})).switchMap((function(e){var r,n,o,i,a,l,u=t.getState(),s=(0,g.Vx)(u),c={};if(c=e.type===y.nh?(null===(o=u.queryform.crossLayerFilter)||void 0===o||null===(i=o.collectGeometries)||void 0===i||null===(a=i.queryCollection)||void 0===a||null===(l=a.filterFields)||void 0===l?void 0:l.filter((function(t){return t.rowId===e.rowId}))[0])||{}:u.queryform&&u.queryform.filterFields&&u.queryform.filterFields.filter((function(t){return t.rowId===e.rowId}))[0],"selected"===e.fieldOptions.selected)return it().Observable.from([e.type===y.nh?(0,y.ln)(c,[],0):(0,y.$J)(c,[],0)]);var p=(0,sn.getWpsPayload)({attribute:c.attribute,layerName:e.type===y.nh?null===(r=u.queryform.crossLayerFilter)||void 0===r||null===(n=r.collectGeometries)||void 0===n?void 0:n.queryCollection.typeName:(0,pn.HY)(u),layerFilter:(0,g.Vc)(u)||(0,g.hI)(u),maxFeatures:s,startIndex:e.fieldOptions.currentPage?e.fieldOptions.currentPage-1:1*s,value:e.fieldValue}),f=(0,cn.y9)(u.query.url,{outputFormat:"json"},(0,fn.kS)(t.getState()));return null===f?it().Observable.of((0,y.NV)(!1)):it().Observable.fromPromise(ln().post(f,p,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(t){var r=D()(t.values)?t.values:[t.values],n=t.size;return it().Observable.from(e.type===y.nh?[(0,y.ln)(c,r,n),(0,y.js)(e.rowId,!0,"crossLayer")]:[(0,y.$J)(c,r,n),(0,y.js)(e.rowId,!0,"filterField")])})).startWith((0,y.jR)(!0,c,e.type===y.nh?"crossLayer":"filterField")).catch((function(){return it().Observable.from([e.type===y.nh?(0,y.ln)(c,[],0):(0,y.$J)(c,[],0),(0,un.vU)({title:"warning",message:"warning",action:{label:"warning"},autoDismiss:3,position:"tr"}),(0,y.js)(e.rowId,!0,e.type===y.nh?"crossLayer":"filterField")])})).concat([(0,y.jR)(!1,c,e.type===y.nh?"crossLayer":"filterField")])}))}};var dn=r(275982),mn=r(675110);function bn(e){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(e)}function vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(r),!0).forEach((function(t){hn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hn(e,t,r){var n;return n=function(e,t){if("object"!=bn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==bn(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const On={handleLayerFilterPanel:function(e,t){var r=t.getState;return e.ofType(cr.Xs).switchMap((function(){var t=(0,mn.Iz)(r()),n=t||{},o=n.url,i=n.name,a=n.layerFilter,l=n.fields,u=t&&t.search&&t.search.url;return it().Observable.of((0,ir.gT)(u||o,i,l),(0,y.F)(a),(0,cr.HH)(a),(0,d.Xg)("queryPanel","enabled",!0)).merge(it().Observable.of((0,ir.jG)()).filter((function(){return!nt()(r(),"query.isLayerFilter")})),e.ofType(y.Wm).switchMap((function(e){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,r=e.spatialField,n=e.filterFields,o=e.filters;return!!(n&&A()(n)||r&&r.method&&r.operation&&r.geometry||t&&t.collectGeometries&&t.operation)||o&&o.length>0}(e.filterObj)?gn({},nt()(r(),"queryform",{})):void 0;return n&&(n.filterFields=n.attributePanelExpanded&&n.filterFields||[],n.spatialField=n.spatialPanelExpanded&&n.spatialField||null,n.crossLayerFilter=n.crossLayerExpanded&&(0,N.setupCrossLayerFilterDefaults)(n.crossLayerFilter)||null),it().Observable.of(function(e,t){return(0,pr.He)(e,{layerFilter:t})}(t.id,n))}))).let(function(e){return function(t){return t.takeUntil(e.ofType(d.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).merge(e.ofType(dn.nk)))}}(e)).concat(it().Observable.from([(0,ir.jG)(),(0,y.mc)(),(0,h.Yf)("clean","","queryform",[],{})]))}))},restoreSavedFilter:function(e,t){var r=t.getState;return e.ofType(cr.H1).switchMap((function(){var e={typeName:nt()(r(),"state.query.typeName")},t=nt()(r(),"state.query.url"),n=nt()(r(),"layerFilter.persisted");return it().Observable.of((0,h.Yf)("clean","","queryform",[]),(0,y.F)(n),(0,y.yC)(t,n,e),(0,ir.Xc)())}))},onApplyFilter:function(e,t){var r=t.getState;return e.ofType(cr.MY).map((function(){var e=gn({},nt()(r(),"queryform",{}));return(0,cr.Xr)(e)}))}};var wn=r(813292),En=r.n(wn);const Pn={updateSpatialFilterValue:function(e){return e.ofType(y.Wi).switchMap((function(e){var t=e.feature,r=e.srsName,n=e.style,o=e.options;return ot.Observable.of((0,h.Yf)("drawOrEdit",t.geometry.type,"queryform",[t],{editEnabled:!1,stopAfterDrawing:!0,featureProjection:r},n)).concat(t&&o&&o.autoZoom?[(0,fr.Px)(En()(t),r)]:[])}))}};var Sn=r(472500),jn=r(731255),Fn=r(285148);function Tn(e){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(e)}function xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(r),!0).forEach((function(t){Dn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dn(e,t,r){var n;return n=function(e,t){if("object"!=Tn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Tn(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function In(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(r),!0).forEach((function(t){Nn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nn(e,t,r){var n;return n=function(e,t){if("object"!=_n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=_n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==_n(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _n(e){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(e)}var Ln=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{geometry:e.featureTypes[0].properties.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){var r;return{label:null!==(r=w()(t,{name:e.name}))&&void 0!==r?r:e.name,attribute:e.name,type:"geometry",valueId:"id",valueLabel:"name",values:[]}})),original:e,attributes:ct(e,t)}};function An(e){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(e)}function qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(r),!0).forEach((function(t){kn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kn(e,t,r){var n;return n=function(e,t){if("object"!=An(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=An(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==An(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gn={};var Un=r(797301),Bn=r(392411),Zn=r(146905),zn=r(367306),Vn=r(55105),Wn=r(624262),Hn=r(481756);function $n(e){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(e)}function Qn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,no(n.key),n)}}function Yn(e,t,r){return t=Jn(t),function(e,t){if(t&&("object"===$n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xn()?Reflect.construct(t,r||[],Jn(e).constructor):t.apply(e,r))}function Xn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xn=function(){return!!e})()}function Jn(e){return Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jn(e)}function Kn(e,t){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kn(e,t)}function eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(r),!0).forEach((function(t){ro(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ro(e,t,r){return(t=no(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function no(e){var t=function(e,t){if("object"!=$n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=$n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$n(t)?t:t+""}var oo=y.mc.bind(null,"query"),io=(0,s.connect)((function(e){return{useMapProjection:e.queryform.useMapProjection,groupLevels:e.queryform.groupLevels,groupFields:e.queryform.groupFields,filterFields:e.queryform.filterFields,attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,featureTypeError:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].error,spatialField:e.queryform.spatialField,filters:e.queryform.filters,showDetailsPanel:e.queryform.showDetailsPanel,toolbarEnabled:e.queryform.toolbarEnabled,attributePanelExpanded:e.queryform.attributePanelExpanded,autocompleteEnabled:e.queryform.autocompleteEnabled,crossLayerExpanded:e.queryform.crossLayerExpanded,crossLayerFilterOptions:to({layers:(0,g.GK)(e),crossLayerFilter:(0,g.qh)(e)},e.queryform.crossLayerFilterOptions||{}),maxFeaturesWPS:e.queryform.maxFeaturesWPS,spatialPanelExpanded:e.queryform.spatialPanelExpanded,featureTypeConfigUrl:e.query&&e.query.url,searchUrl:e.query&&e.query.url,featureTypeName:e.query&&e.query.typeName,ogcVersion:"1.1.0",params:{typeName:e.query&&e.query.typeName},resultTitle:"Query Result",showGeneratedFilter:!1,allowEmptyFilter:!0,emptyFilterWarning:!0,maxHeight:e.map&&e.map.present&&e.map.present.size&&e.map.present.size.height,zoom:((0,v.Od)(e)||{}).zoom,projection:((0,v.Od)(e)||{}).projection}}),(function(e){return{attributeFilterActions:(0,p.DE)({onAddGroupField:y.kQ,onAddFilterField:y.jW,onRemoveFilterField:y.JG,onUpdateFilterField:y.q$,onUpdateExceptionField:y.OZ,onUpdateLogicCombo:y.Nc,onRemoveGroupField:y.I5,onChangeCascadingValue:y.QL,toggleMenu:y.js,onExpandAttributeFilterPanel:y.I},e),spatialFilterActions:(0,p.DE)({onChangeSpatialFilterValue:y.uo,onExpandSpatialFilterPanel:y.ku,onSelectSpatialMethod:y.HT,onSelectViewportSpatialMethod:y.lg,onSelectSpatialOperation:y.VF,onChangeDrawingStatus:h.Yf,onRemoveSpatialSelection:y.Ry,onShowSpatialSelectionDetails:y.ZH,onChangeDwithinValue:y.AQ,zoneFilter:y.eJ,zoneSearch:y.uM,zoneChange:y.uP},e),queryToolbarActions:(0,p.DE)({onQuery:y.yC,onReset:oo,onSaveFilter:cr.no,onRestoreFilter:cr.Nd,storeAppliedFilter:cr.Rb,onChangeDrawingStatus:h.Yf},e),crossLayerFilterActions:(0,p.DE)({expandCrossLayerFilterPanel:y.EU,setCrossLayerFilterParameter:y.IV,addCrossLayerFilterField:y.N5,updateCrossLayerFilterField:y.bn,removeCrossLayerFilterField:y.Bm,resetCrossLayerFilter:y.F2,toggleMenu:function(e,t){return(0,y.js)(e,t,"crossLayer")}},e),controlActions:(0,p.DE)({onToggleQuery:d.Xi.bind(null,"queryPanel",null)},e)}}))(tn),ao=(0,f.P1)([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},mn.Bt,function(e){return e.layers&&e.layers.settings},sr._d,function(e){return(0,Vn.ic)(e,{height:!0})},zn.Wy,g.Vc,g.hI,function(e){return e&&e.query&&e.query.isLayerFilter},mn.P_,pn.HY],(function(e,t,r,n,o,i,a,l,u,s,c){return{enabled:e,groups:t,settings:r,queryPanelEnabled:n,layout:i?{}:o,appliedFilter:a,storedFilter:l,advancedToolbar:u,loadingError:s,selectedLayer:c}})),lo=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ro(r=Yn(this,t,[e]),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),ro(r,"renderSidebar",(function(){return u().createElement(c.Z,{open:r.props.queryPanelEnabled,sidebar:r.renderQueryPanel(),sidebarClassName:"query-form-panel-container",touch:!1,rootClassName:"query-form-root",styles:{sidebar:to(to({},r.props.layout),{},{zIndex:1044,width:600}),overlay:{zIndex:1023,width:0},root:{right:r.props.queryPanelEnabled?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}}},u().createElement("div",null))})),ro(r,"onToggle",(function(){r.props.advancedToolbar&&!o()(r.props.appliedFilter,r.props.storedFilter)?r.setState((function(){return{showModal:!0}})):r.props.onToggleQuery()})),ro(r,"restoreAndClose",(function(){r.setState((function(){return{showModal:!1}})),r.props.onRestoreFilter(),r.props.onToggleQuery()})),ro(r,"storeAndClose",(function(){r.setState((function(){return{showModal:!1}})),r.props.onSaveFilter(),r.props.onToggleQuery()})),ro(r,"renderQueryPanel",(function(){return u().createElement("div",{className:"mapstore-query-builder"},u().createElement(io,{queryPanelEnabled:r.props.queryPanelEnabled,header:u().createElement(_r,{loadingError:r.props.loadingError,onToggleQuery:r.onToggle}),spatialOperations:r.props.spatialOperations,spatialMethodOptions:r.props.spatialMethodOptions,toolsOptions:r.props.toolsOptions,featureTypeErrorText:u().createElement(Hn.Z,{msgId:"layerProperties.featureTypeError"}),appliedFilter:r.props.appliedFilter,storedFilter:r.props.storedFilter,advancedToolbar:r.props.advancedToolbar,loadingError:r.props.loadingError,items:r.props.items,selectedLayer:r.props.selectedLayer,standardItems:lr}),u().createElement(Rt.Z,null,u().createElement(rn.Z,{fade:!0,show:r.state.showModal,title:u().createElement(Hn.Z,{msgId:"queryform.changedFilter"}),size:"xs",onClose:function(){return r.setState((function(){return{showModal:!1}}))},buttons:[{bsStyle:"primary",text:u().createElement(Hn.Z,{msgId:"yes"}),onClick:r.storeAndClose},{bsStyle:"primary",text:u().createElement(Hn.Z,{msgId:"no"}),onClick:r.restoreAndClose}]},u().createElement("div",{className:"ms-alert"},u().createElement("div",{className:"ms-alert-center"},u().createElement(Hn.Z,{msgId:r.props.loadingError?"queryform.changedFilterWithErrorAlert":"queryform.changedFilterAlert"}))))))})),r.state={showModal:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kn(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.toolsOptions.useEmbeddedMap||!0!==e.queryPanelEnabled||!1!==this.props.queryPanelEnabled||this.props.onInit()}},{key:"render",value:function(){return this.renderSidebar()}}])&&Qn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);ro(lo,"propTypes",{advancedToolbar:a().bool,appliedFilter:a().object,items:a().array,layout:a().object,loadingError:a().bool,onInit:a().func,onRestoreFilter:a().func,onSaveFilter:a().func,onToggleQuery:a().func,queryPanelEnabled:a().bool,selectedLayer:a().oneOfType([a().string,a().bool]),spatialMethodOptions:a().array,spatialOperations:a().array,storedFilter:a().object,toolsOptions:a().object}),ro(lo,"defaultProps",{groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onInit:function(){},updateNode:function(){},removeNode:function(){},activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateRemoveLayer:!0,visibilityCheckType:"checkbox",settingsOptions:{},queryPanelEnabled:!1,layout:{},toolsOptions:{},onSaveFilter:function(){},onRestoreFilter:function(){},items:[],selectedLayer:!1});const uo={QueryPanelPlugin:(0,s.connect)(ao,{groupPropertiesChangeHandler:pr.WO,layerPropertiesChangeHandler:pr.He,retrieveLayerData:ur.k,onToggleGroup:(0,Wn.$0)("groups",pr.bh),onToggleLayer:(0,Wn.$0)("layers",pr.bh),onToggleQuery:d.Xi.bind(null,"queryPanel",null),onSort:(0,Wn.dD)(Wn.lD,pr.MK),onSettings:pr.RP,onInit:ir.Xc,onZoomToExtent:fr.Px,hideSettings:pr.sF,updateSettings:pr.VP,updateNode:pr.tV,removeNode:pr.ZF,onSaveFilter:cr.no,onRestoreFilter:cr.Nd})(lo),reducers:{draw:Bn.Z,queryform:Zn.Z,query:Un.Z,layerFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cr.y6:return Mn(Mn({},Gn),{},{persisted:t.filter,applied:t.filter});case cr.H1:return Mn(Mn({},e),{},{applied:e.persisted});case cr.g$:return Mn(Mn({},e),{},{applied:t.filter});case cr.Xk:return Mn(Mn({},e),{},{persisted:e.applied});case y.Eg:return Mn(Mn({},e),{},{applied:void 0});default:return e}}},epics:to(to(to({featureTypeSelectedEpic:function(e,t){return e.ofType(ir.S0).filter((function(e){return e.url&&e.typeName})).switchMap((function(e){var r=t.getState();if((0,pn.hk)(r,e.typeName)){var n=Ln((0,pn.qj)(r,e.typeName),e.fields),o=n.geometry[0]&&n.geometry[0].attribute?n.geometry[0].attribute:"the_geom";return it().Observable.of((0,ir.rG)(e.typeName,n,e.owner),(0,y.DD)(o),it().Scheduler.async)}var i=(0,jn.Li)(r);return i&&"vector"===i.type?it().Observable.defer((function(){return ln().get(e.url)})).map((function(t){var r={featureTypes:[t.data.featureTypes[0]]},n={geometry:r.featureTypes[0].properties.filter((function(e){return 0===e.name.indexOf("geometry")})).map((function(e){return e})),original:r,attributes:ct(r,e.fields)},o=n.geometry[0]&&n.geometry[0].attribute?n.geometry[0].attribute:"the_geom",i=new Promise((function(e){e((0,y.DD)(o))})).then((function(){return new Promise((function(t){t((0,ir.rG)(e.typeName,n))}))}));return it().Observable.defer((function(){return i}))})).mergeAll():it().Observable.defer((function(){return ln().get(cn.ZP.filterUrlParams(e.url,(0,fn.kS)(t.getState()))+"?service=WFS&version=1.1.0&request=DescribeFeatureType&typeName="+e.typeName+"&outputFormat=application/json")})).map((function(t){if("object"===_n(t.data)&&t.data.featureTypes&&t.data.featureTypes[0]){var r=Ln(t.data,e.fields),n=r.geometry[0]&&r.geometry[0].attribute?r.geometry[0].attribute:"the_geom";return it().Observable.from([(0,y.DD)(n),(0,ir.rG)(e.typeName,r)])}try{JSON.parse(t.data)}catch(t){return it().Observable.from([(0,ir.t3)(e.typeName,"Error from WFS: "+t.message),un.vU({title:"warning",message:"layerProperties.featureTypeErrorInvalidJSON",autoDismiss:3,position:"tc"})])}return it().Observable.from([(0,ir.t3)(e.typeName,"Error: feature types are empty")])})).mergeAll().catch((function(t){return it().Observable.of((0,ir.t3)(e.typeName,t.message||t.statusText))}))}))},wfsQueryEpic:function(e,t){return e.ofType(ir.Qq).switchMap((function(r){var n,o,i,a,l=(i=(a=t.getState()).query&&a.query.featureTypes&&a.query.featureTypes[a.query.typeName]&&a.query.featureTypes[a.query.typeName].attributes&&a.query.featureTypes[a.query.typeName].attributes[0]&&a.query.featureTypes[a.query.typeName].attributes[0].attribute||null)?{sortBy:i,sortOrder:"A"}:{},u=(null==r||null===(n=r.filterObj)||void 0===n?void 0:n.sortOptions)||l,s=pn.b0.totalFeatures(t.getState()),c=cn.ZP.filterUrlParams(r.searchUrl,(0,fn.kS)(t.getState())),p=(0,jn.Li)(t.getState()),f=(0,jn.lg)(t.getState()),y=null!=p?p:{},d=y.layerFilter,m=y.params,b=void 0===m?{}:m,v=null==b?void 0:b[w()(Object.keys(b||{}),(function(){return"cql_filter"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()}))],g="vector"===(null==p?void 0:p.type)?r.filterObj:(0,N.mergeFiltersToOGC)({ogcVersion:"1.1.0"},v,f?d:null,r.filterObj),h=function(e,t,r){var n=(0,jn.u$)(r),o=(0,Fn.jo)({id:n},"time")(r),i=(0,mn.CA)(r,n)||{},a=nt()(i,'params["time"]');if((0,jn.DK)(r)&&o&&a){var l=(0,Sn.parse)(e)||{};return{url:(0,Sn.format)(Cn(Cn({},l),{},{query:Cn(Cn({},l.query),{},{time:a})})),options:t}}return{url:e,options:t}}(c,r.queryOptions||{},t.getState()),O=h.url,E=h.options,P=In(In(In({},r.filterObj.pagination),{},{totalFeatures:s,sortOptions:u},E),{},{layer:p});return it().Observable.merge((0,at.Mc)(In(In({},p),{},{name:r.filterObj.featureTypeName||(null==p?void 0:p.name),search:In(In({},null!==(o=null==p?void 0:p.search)&&void 0!==o?o:{}),{},{url:O})}),g,P).map((function(e){return(0,ir.w_)(e,r.searchUrl,r.filterObj,r.queryOptions,r.reason)})).catch((function(e){return it().Observable.of((0,ir.Lm)(e))})).startWith((0,ir.Fs)(!0)).concat(it().Observable.of((0,ir.Fs)(!1)),it().Observable.of((0,pr.kI)(null==p?void 0:p.id)))).takeUntil(e.ofType(ir.VN))}))},viewportSelectedEpic:function(e,t){return e.ofType(y.On,fr.pP).switchMap((function(e){var r=e.type===fr.pP?e:(0,v.Od)(t.getState());if((e.type===y.On||e.type===fr.pP&&"Viewport"===(0,g.BU)(t.getState()))&&r.bbox&&r.bbox.bounds&&r.bbox.crs){var n=Object.keys(r.bbox.bounds).reduce((function(e,t){return he()({},e,Nn({},t,parseFloat(r.bbox.bounds[t])))}),{});return it().Observable.of((0,y.ds)(Oe.default.getViewportGeometry(n,r.bbox.crs)))}return it().Observable.empty()}))},redrawSpatialFilterEpic:function(e,t){return e.ofType(ir.R1).switchMap((function(){var e=t.getState(),r=(0,g.vE)(e),n={type:"Feature",geometry:{type:(0,g.a8)(e),coordinates:(0,g.G$)(e)}},o=(0,g.Nl)(e)?(0,h.Yf)("drawOrEdit",r.method||"","queryform",[n],{featureProjection:(0,g.IM)(e),drawEnabled:!1,editEnabled:!1}):(0,h.Yf)("clean",r.method||"","queryform",[],{drawEnabled:!1,editEnabled:!1});return it().Observable.of(o)}))}},yn),Pn),On)}},481756:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(171703),o=r(805346);const i=(0,n.connect)((function(e){return{locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]}}))(o.Z)},392411:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(604206),o=r(727418),i=r.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){var n;return n=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==a(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={drawStatus:null,drawOwner:null,drawMethod:null,options:{},features:[],tempFeatures:[],snapping:!1,snappingIsLoading:!1,snappingLayer:!1},p={edge:!0,vertex:!0,pixelTolerance:10,strategy:"bbox"};const f=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case n.hZ:return i()({},r,{drawStatus:o.status,drawOwner:o.owner,drawMethod:o.method,options:o.options,features:o.features,style:o.style});case n.kD:return i()({},r,{currentStyle:o.currentStyle});case n.DI:return i()({},r,{tempFeatures:o.features});case n.IC:return i()({},r,{tempFeatures:[]});case n.G_:return u(u({},r),{},{snapping:!r.snapping});case n.uB:return u(u({},r),{},{snappingLayer:o.snappingLayer,snappingIsLoading:!1});case n.Rh:return u(u({},r),{},{snappingIsLoading:!r.snappingIsLoading});case n.vU:return u(u({},r),{},{snapConfig:u(u(u({},u(u({},p),(null===(e=o.pluginCfg)||void 0===e?void 0:e.snapConfig)||{})),null!==(t=null==r?void 0:r.snapConfig)&&void 0!==t?t:{}),o.prop&&void 0!==o.value?s({},o.prop,o.value):{})});default:return r}}},788113:(e,t,r)=>{"use strict";r.d(t,{b6:()=>p,PG:()=>f,_x:()=>y,Mm:()=>d,dP:()=>m,SX:()=>b,ZL:()=>v,_S:()=>g,iH:()=>h,R7:()=>O,Q7:()=>w,n7:()=>E,bA:()=>P,hm:()=>S,E2:()=>j,Cb:()=>F,eK:()=>T,Im:()=>x,e8:()=>C,JF:()=>D,kS:()=>R,y:()=>I,l2:()=>N,HN:()=>_,BM:()=>L,O8:()=>A,am:()=>q,LV:()=>M,CK:()=>k,jU:()=>G,Qg:()=>U});var n=r(22222),o=r(227361),i=r.n(o),a=r(800827),l=r(577215);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==u(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){return i()(e,"catalog.services")},f=(0,n.P1)((function(e){return i()(e,"catalog.default.staticServices")}),p,(function(e,t){var r=null==e?void 0:e.default_map_backgrounds;return r?(r.readOnly=!0,c(c({},t),{},{default_map_backgrounds:r})):t})),y=function(e){return i()(e,"catalog.default.tileSizes",[256,512])},d=function(e){return i()(e,"controls.metadataexplorer.group")},m=function(e){return i()(e,"catalog.saving")},b=function(e){return i()(e,"catalog.result")},v=function(e){return i()(e,"catalog.openCatalogServiceList")},g=function(e){return i()(e,"catalog.newService")},h=function(e){return i()(e,"catalog.newService.type","csw")},O=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"]'))},w=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].type'),function(e){return i()(e,'catalog.default.staticServices["'.concat(i()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},E=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].layerOptions'),{})},P=function(e){return i()(e,"catalog.searchOptions")},S=function(e){return i()(e,"catalog.loadingError")},j=function(e){return i()(e,"catalog.loading",!1)},F=function(e){return i()(e,"catalog.selectedService")},T=function(e){return i()(e,"catalog.mode","view")},x=function(e){return i()(e,"catalog.layerError")},C=function(e){return i()(e,"catalog.searchOptions.text","")},D=function(e){return"metadataexplorer"===i()(e,"controls.toolbar.active")||i()(e,"controls.metadataexplorer.enabled")},R=function(e){return(i()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},I=function(e){return i()(e,"catalog.pageSize",4)},N=function(e){return i()(e,"catalog.delayAutoSearch",1e3)},_=(0,n.zB)({projection:a.uy}),L=function(e){return i()(e,"catalog.formatsLoading",!1)},A=function(e){return i()(e,"catalog.newService.supportedFormats.imageFormats",[])},q=function(e){var t,r;return"edit"===T(e)?A(e):(null===(t=O(e))||void 0===t||null===(r=t.supportedFormats)||void 0===r?void 0:r.imageFormats)||[]},M=function(e){return i()(e,"catalog.newService.supportedFormats.infoFormats",(0,l.oL)())},k=function(e){return i()(e,"catalog.newService.formatUrlUsed","")},G=function(e){return i()(e,"catalog.isNewServiceAdded",!1)},U=function(e){return i()(e,"catalog.showFormatError",!1)}},55105:(e,t,r)=>{"use strict";r.d(t,{Ss:()=>d,Nr:()=>m,QJ:()=>b,ic:()=>v,Jz:()=>g,VM:()=>h,CF:()=>O,Ju:()=>w,Fc:()=>E,gQ:()=>P});var n=r(91175),o=r.n(n),i=r(288306),a=r.n(i),l=r(800827),u=r(552259),s=r(737275);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){var n;return n=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==c(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(e){return e.maplayout&&e.maplayout.layout||{}},m=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},b=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},v=a()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=d(e),o=b(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){var i;return f(f({},e),{},y({},t,r&&null!==(i=o[t])&&void 0!==i?i:n[t]))}),{})||{}}),(function(e,t,r){return JSON.stringify(d(e))+JSON.stringify(b(e))+JSON.stringify(t)+(r?"_isDock":"")})),g=function(e){var t;return!(null===(t=d(e))||void 0===t||!t.rightPanel)},h=function(e){var t,r=s.ZP.getConfigProp("mapLayout")||u.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=d(e);return!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==r?void 0:r.bottom.sm)&&void 0!==t?t:0,type:"not"}])},O=function(e){var t=(0,l.Od)(e),r=m(e);return r&&t&&t.size&&{left:(0,u.pb)(r.left,t.size.width),bottom:(0,u.pb)(r.bottom,t.size.height),right:(0,u.pb)(r.right,t.size.width),top:(0,u.pb)(r.top,t.size.height)}},w=function(e){var t,r;return null!==(t=null==e||null===(r=e.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==t?t:{left:[],right:[]}},E=function(e){return v(e,{height:!0,right:!0},!0)},P=function(e){return v(e,{right:!0},!0)}},469842:(e,t,r)=>{"use strict";r.d(t,{By:()=>y,qh:()=>d,GK:()=>m,Nl:()=>b,vE:()=>v,gC:()=>g,hI:()=>h,Vc:()=>O,BU:()=>w,Vx:()=>E,a8:()=>P,IM:()=>S,G$:()=>j});var n=r(227361),o=r.n(n),i=r(22222),a=r(675110),l=r(308316),u=r(86638);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var c=["title"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==s(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){return o()(e,"queryform.map")},d=function(e){return o()(e,"queryform.crossLayerFilter")},m=function(e){return((0,a.l2)(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.group;return"wms"===t&&"background"!==r})).map((function(t){var r=t.title;return f(f({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,c)),{},{title:(0,u.MZ)((0,l.Pz)(e),r)})}))},b=function(e){return o()(e,"queryform.spatialField.geometry")},v=function(e){return o()(e,"queryform.spatialField")},g=(0,i.P1)((function(e){return o()(e,"queryform.attributePanelExpanded")}),(function(e){return o()(e,"queryform.spatialPanelExpanded")}),(function(e){return o()(e,"queryform.crossLayerExpanded")}),(function(e,t,r){return{attributePanelExpanded:e,spatialPanelExpanded:t,crossLayerExpanded:r}})),h=function(e){return o()(e,"layerFilter.persisted")},O=function(e){return o()(e,"layerFilter.applied")},w=function(e){return o()(e,"queryform.spatialField.method")},E=function(e){return o()(e,"queryform.maxFeaturesWPS")},P=function(e){return b(e)&&b(e).type||"Polygon"},S=function(e){return b(e)&&b(e).projection||"EPSG =4326"},j=function(e){return b(e)&&b(e).coordinates||[]}},401757:(e,t,r)=>{"use strict";r.d(t,{E2:()=>w,YI:()=>S,JT:()=>j,GW:()=>F,TK:()=>T,zm:()=>x,lF:()=>C,Jb:()=>D,E5:()=>R,YR:()=>I,jx:()=>L,zA:()=>A,r0:()=>q,xI:()=>M,ie:()=>k,p:()=>G,yZ:()=>U,hF:()=>B,Xu:()=>Z,nA:()=>z,Wo:()=>V,um:()=>W,h9:()=>H,md:()=>$,Nx:()=>Q,f0:()=>Y}),r(313311);var n=r(227361),o=r.n(n),i=r(984596),a=r.n(i),l=r(385564),u=r.n(l),s=r(800827),c=r(675110),p=r(324684),f=r(557579),y=r(246781),d=r(367306),m=r(22222),b=r(784715);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){var n;return n=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==v(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(196958);var w=function(e){return o()(e,"widgets.builder.settings")},E=function(e){return o()(e,"widgets.dependencies")||{}},P=function(e){return Object.keys(E(e)).map((function(t){return E(e)[t]}))},S=function(e){return o()(e,"widgets.builder.editor")},j=function(e){var t,r=S(e)||{},n=r.layer,o=r.charts,i=r.selectedChartId,a=r.selectedTraceId;return o?null===(t=(0,y.Sk)({selectedChartId:i,selectedTraceId:a,charts:o}))||void 0===t?void 0:t.layer:n},F=(0,m.P1)(j,c.Iz,(function(e){return(0,d.Wy)(e)&&(0,d.i$)(e)}),(function(e,t,r){return e||!r&&t})),T=function(e){var t,r;return(null===(t=S(e))||void 0===t||null===(r=t.charts)||void 0===r?void 0:r.map((function(e){return e.layer})))||[]},x=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].widgets"))},C=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].collapsed"))},D=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].maximized"))},R=(0,m.P1)(x,C,D,(function(e,t,r){if(e){if(null!=r&&r.widget)return e.filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id===r.widget.id}));if(t)return e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return!t[e]}))}return e})),I=(0,m.P1)(C,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),N=function(e){return(x(e)||[]).filter((function(){return"map"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).widgetType}))},_=function(e){return(x(e)||[]).filter((function(){return"table"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).widgetType}))},L=(0,m.P1)(N,_,s.Od,p.F,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return{availableDependencies:u()(e.map((function(e){var t=e.id,r=e.maps;return(void 0===r?[]:r).map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mapId;return"widgets[".concat(t,"].maps[").concat(e,"].map")}))}))).concat(a()(r).map((function(){return"map"}))).concat(a()(t).filter((function(){return-1===n.indexOf("viewer")})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),A=(0,m.P1)(N,_,s.Od,p.F,S,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return{availableDependencies:u()(e.map((function(e){var t=e.id,r=e.maps;return(void 0===r?[]:r).map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mapId;return"widgets[".concat(t,"].maps[").concat(e,"].map")}))}))).concat(a()(r).map((function(){return r?"map":null}))).filter((function(e){return e})).concat(a()(t).filter((function(){return-1===n.indexOf("viewer")})).filter((function(e){return(0,y.t3)(o,e)})).filter((function(e){return o&&o.id!==e.id})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),q=function(e){return o()(w(e),"".concat(f.jv))},M=function(e){return o()(q(e),"active")},k=(0,m.P1)(x,(function(e){return(0,y.Ug)(e)})),G=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].layouts"))},U=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].layout"))},B=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].widgets"))},Z=function(e){return o()(e,"widgets.tray")},z=function(e){return o()(e,"widgets.containers[".concat(f.VR,"].layouts"))},V=function(e){return o()(e,"widgets.builder.editor.returnToFeatureGrid",!1)},W=function(e){var t=(0,y.Oe)(S(e));return o()(t,"filter")},H=(0,b.y1)(E,P,(function(e){return P(e).map((function(t){return 0===t.indexOf("map.")?o()((0,s.Od)(e),t.slice(4)):t.match(f.oU)?(0,y.D6)(t,x(e),N(e)):o()(e,t)}))}),(function(e,t,r){return t.reduce((function(t,n,o){return h(h({},t),{},O({},Object.keys(e)[o],r[o]))}),{})})),$=(0,m.zB)({widgets:x,layouts:G,catalogs:d.CN}),Q=function(e){var t=S(e)||{},r=t.selectedChartId,n=t.charts,o=void 0===n?[]:n,i=t.selectedTraceId;if(!r)return"filter";var a=(0,y.Sk)({selectedChartId:r,selectedTraceId:i,charts:o});return"charts[".concat(r,"].traces[").concat(null==a?void 0:a.id,"].filter")},Y=function(e){var t=(x(e)||[]).filter((function(){return"table"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).widgetType}));return!(null==t||!t.find((function(e){var t;return null===(t=e.dependencies)||void 0===t?void 0:t.zoomLoader})))}},577215:(e,t,r)=>{"use strict";r.d(t,{oL:()=>m,F0:()=>b,cP:()=>v,Br:()=>g,rD:()=>h});var n=r(944908),o=r.n(n),i=r(513218),a=r.n(i),l=r(984596),u=r.n(l),s=r(125376),c=r(916651);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==p(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=["image/png","image/gif","image/jpeg","image/png8","image/png; mode=8bit","image/png; mode=24bit","image/vnd.jpeg-png","image/vnd.jpeg-png8"],m=function(){return o()(Object.values((0,s.eq)()))},b=function(e){return d.includes(e)},v=function(e){return m().includes(e)},g=function(e){var t,r,n,o,i;return a()(e)?{capabilities:e,description:e.Abstract,boundingBox:null!=e&&e.EX_GeographicBoundingBox?{minx:null===(t=e.EX_GeographicBoundingBox)||void 0===t?void 0:t.westBoundLongitude,miny:null===(r=e.EX_GeographicBoundingBox)||void 0===r?void 0:r.southBoundLatitude,maxx:null===(n=e.EX_GeographicBoundingBox)||void 0===n?void 0:n.eastBoundLongitude,maxy:null===(o=e.EX_GeographicBoundingBox)||void 0===o?void 0:o.northBoundLatitude}:null==e||null===(i=e.LatLonBoundingBox)||void 0===i?void 0:i.$,availableStyles:(null==e?void 0:e.Style)&&u()(e.Style).map((function(e){return y(y(y({name:e.Name},e.Title&&{title:e.Title}),e.Abstract&&{_abstract:e.Abstract}),e.LegendURL&&{legendURL:u()(e.LegendURL).map((function(e){var t,r,n,o,i,a;return y({width:null!=e&&null!==(t=e.$)&&void 0!==t&&t.width?parseFloat(e.$.width):void 0,height:null!=e&&null!==(r=e.$)&&void 0!==r&&r.height?parseFloat(e.$.height):void 0,format:null==e?void 0:e.Format},(null==e||null===(n=e.OnlineResource)||void 0===n||null===(o=n.$)||void 0===o?void 0:o["xlink:type"])&&(null==e||null===(i=e.OnlineResource)||void 0===i||null===(a=i.$)||void 0===a?void 0:a["xlink:href"])&&{onlineResource:{type:e.OnlineResource.$["xlink:type"],href:e.OnlineResource.$["xlink:href"]}})}))})}))}:{}},h=function(e){var t=e.tileGrids,r=void 0===t?[]:t,n=e.projection,o=e.tileSize,i=void 0===o?256:o;return r.find((function(e){var t,r,o;return(0,c.normalizeSRS)(e.crs)===(0,c.normalizeSRS)(n)&&!(((null===(t=e.tileSizes)||void 0===t||null===(r=t[0])||void 0===r?void 0:r[0])||(null===(o=e.tileSize)||void 0===o?void 0:o[0]))!==i)}))}},284069:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(86686),i=o.isFilterValid,a=o.toOGCFilterParts,l=r(102245)({}).and;e.exports={getWpsPayload:function(e){var t,r=e.layerName,o=e.layerFilter,u=e.attribute,s=e.maxFeatures,c=e.startIndex,p=e.value,f=p?'<ogc:PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">   <ogc:PropertyName>'+u+"</ogc:PropertyName>   <ogc:Literal>*"+p+"*</ogc:Literal></ogc:PropertyIsLike>":"",y=o&&!o.disabled&&i(o)?a(o,"1.1.0","ogc"):[];return'<wps:Execute xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0.0" service="WPS" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">  <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">gs:PagedUnique</ows:Identifier>  <wps:DataInputs>    <wps:Input>      <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Identifier>      <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Title>      <wps:Data />      <wps:Reference xmlns:xlink="http://www.w3.org/1999/xlink" mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST">        <wps:Body>         <wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0">           <wfs:Query typeName="'+r+'">'+(f.length>0||y.length>0?'<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+l.apply(void 0,(t=y,function(e){if(Array.isArray(e))return n(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([f]))+"</ogc:Filter>":"")+'             <ogc:SortBy xmlns:ogc="http://www.opengis.net/ogc">               <ogc:SortProperty>                 <ogc:PropertyName>'+u+'</ogc:PropertyName>               </ogc:SortProperty>             </ogc:SortBy>           </wfs:Query>         </wfs:GetFeature>       </wps:Body>     </wps:Reference>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Title>     <wps:Data>       <wps:LiteralData>'+u+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Title>     <wps:Data>       <wps:LiteralData>'+s+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Title>     <wps:Data>       <wps:LiteralData>'+c+'</wps:LiteralData>     </wps:Data>   </wps:Input> </wps:DataInputs> <wps:ResponseForm>   <wps:RawDataOutput mimeType="application/json">     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">result</ows:Identifier>   </wps:RawDataOutput> </wps:ResponseForm></wps:Execute>'}}},949469:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(923645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,"",""]);const i=o}}]);
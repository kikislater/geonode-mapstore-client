(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[62933,80717,96958,66287,92579,66113,30049,93546,61771],{271317:e=>{"use strict";e.exports=JSON.parse('{"glass":"f000","music":"f001","search":"f002","envelope-o":"f003","heart":"f004","star":"f005","star-o":"f006","user":"f007","film":"f008","th-large":"f009","th":"f00a","th-list":"f00b","check":"f00c","times":"f00d","search-plus":"f00e","search-minus":"f010","power-off":"f011","signal":"f012","cog":"f013","trash-o":"f014","home":"f015","file-o":"f016","clock-o":"f017","road":"f018","download":"f019","arrow-circle-o-down":"f01a","arrow-circle-o-up":"f01b","inbox":"f01c","play-circle-o":"f01d","repeat":"f01e","refresh":"f021","list-alt":"f022","lock":"f023","flag":"f024","headphones":"f025","volume-off":"f026","volume-down":"f027","volume-up":"f028","qrcode":"f029","barcode":"f02a","tag":"f02b","tags":"f02c","book":"f02d","bookmark":"f02e","print":"f02f","camera":"f030","font":"f031","bold":"f032","italic":"f033","text-height":"f034","text-width":"f035","align-left":"f036","align-center":"f037","align-right":"f038","align-justify":"f039","list":"f03a","outdent":"f03b","indent":"f03c","video-camera":"f03d","picture-o":"f03e","pencil":"f040","map-marker":"f041","adjust":"f042","tint":"f043","pencil-square-o":"f044","share-square-o":"f045","check-square-o":"f046","arrows":"f047","step-backward":"f048","fast-backward":"f049","backward":"f04a","play":"f04b","pause":"f04c","stop":"f04d","forward":"f04e","fast-forward":"f050","step-forward":"f051","eject":"f052","chevron-left":"f053","chevron-right":"f054","plus-circle":"f055","minus-circle":"f056","times-circle":"f057","check-circle":"f058","question-circle":"f059","info-circle":"f05a","crosshairs":"f05b","times-circle-o":"f05c","check-circle-o":"f05d","ban":"f05e","arrow-left":"f060","arrow-right":"f061","arrow-up":"f062","arrow-down":"f063","share":"f064","expand":"f065","compress":"f066","plus":"f067","minus":"f068","asterisk":"f069","exclamation-circle":"f06a","gift":"f06b","leaf":"f06c","fire":"f06d","eye":"f06e","eye-slash":"f070","exclamation-triangle":"f071","plane":"f072","calendar":"f073","random":"f074","comment":"f075","magnet":"f076","chevron-up":"f077","chevron-down":"f078","retweet":"f079","shopping-cart":"f07a","folder":"f07b","folder-open":"f07c","arrows-v":"f07d","arrows-h":"f07e","bar-chart":"f080","twitter-square":"f081","facebook-square":"f082","camera-retro":"f083","key":"f084","cogs":"f085","comments":"f086","thumbs-o-up":"f087","thumbs-o-down":"f088","star-half":"f089","heart-o":"f08a","sign-out":"f08b","linkedin-square":"f08c","thumb-tack":"f08d","external-link":"f08e","sign-in":"f090","trophy":"f091","github-square":"f092","upload":"f093","lemon-o":"f094","phone":"f095","square-o":"f096","bookmark-o":"f097","phone-square":"f098","twitter":"f099","facebook":"f09a","github":"f09b","unlock":"f09c","credit-card":"f09d","rss":"f09e","hdd-o":"f0a0","bullhorn":"f0a1","bell":"f0f3","certificate":"f0a3","hand-o-right":"f0a4","hand-o-left":"f0a5","hand-o-up":"f0a6","hand-o-down":"f0a7","arrow-circle-left":"f0a8","arrow-circle-right":"f0a9","arrow-circle-up":"f0aa","arrow-circle-down":"f0ab","globe":"f0ac","wrench":"f0ad","tasks":"f0ae","filter":"f0b0","briefcase":"f0b1","arrows-alt":"f0b2","users":"f0c0","link":"f0c1","cloud":"f0c2","flask":"f0c3","scissors":"f0c4","files-o":"f0c5","paperclip":"f0c6","floppy-o":"f0c7","square":"f0c8","bars":"f0c9","list-ul":"f0ca","list-ol":"f0cb","strikethrough":"f0cc","underline":"f0cd","table":"f0ce","magic":"f0d0","truck":"f0d1","pinterest":"f0d2","pinterest-square":"f0d3","google-plus-square":"f0d4","google-plus":"f0d5","money":"f0d6","caret-down":"f0d7","caret-up":"f0d8","caret-left":"f0d9","caret-right":"f0da","columns":"f0db","sort":"f0dc","sort-desc":"f0dd","sort-asc":"f0de","envelope":"f0e0","linkedin":"f0e1","undo":"f0e2","gavel":"f0e3","tachometer":"f0e4","comment-o":"f0e5","comments-o":"f0e6","bolt":"f0e7","sitemap":"f0e8","umbrella":"f0e9","clipboard":"f0ea","lightbulb-o":"f0eb","exchange":"f0ec","cloud-download":"f0ed","cloud-upload":"f0ee","user-md":"f0f0","stethoscope":"f0f1","suitcase":"f0f2","bell-o":"f0a2","coffee":"f0f4","cutlery":"f0f5","file-text-o":"f0f6","building-o":"f0f7","hospital-o":"f0f8","ambulance":"f0f9","medkit":"f0fa","fighter-jet":"f0fb","beer":"f0fc","h-square":"f0fd","plus-square":"f0fe","angle-double-left":"f100","angle-double-right":"f101","angle-double-up":"f102","angle-double-down":"f103","angle-left":"f104","angle-right":"f105","angle-up":"f106","angle-down":"f107","desktop":"f108","laptop":"f109","tablet":"f10a","mobile":"f10b","circle-o":"f10c","quote-left":"f10d","quote-right":"f10e","spinner":"f110","circle":"f111","reply":"f112","github-alt":"f113","folder-o":"f114","folder-open-o":"f115","smile-o":"f118","frown-o":"f119","meh-o":"f11a","gamepad":"f11b","keyboard-o":"f11c","flag-o":"f11d","flag-checkered":"f11e","terminal":"f120","code":"f121","reply-all":"f122","star-half-o":"f123","location-arrow":"f124","crop":"f125","code-fork":"f126","chain-broken":"f127","question":"f128","info":"f129","exclamation":"f12a","superscript":"f12b","subscript":"f12c","eraser":"f12d","puzzle-piece":"f12e","microphone":"f130","microphone-slash":"f131","shield":"f132","calendar-o":"f133","fire-extinguisher":"f134","rocket":"f135","maxcdn":"f136","chevron-circle-left":"f137","chevron-circle-right":"f138","chevron-circle-up":"f139","chevron-circle-down":"f13a","html5":"f13b","css3":"f13c","anchor":"f13d","unlock-alt":"f13e","bullseye":"f140","ellipsis-h":"f141","ellipsis-v":"f142","rss-square":"f143","play-circle":"f144","ticket":"f145","minus-square":"f146","minus-square-o":"f147","level-up":"f148","level-down":"f149","check-square":"f14a","pencil-square":"f14b","external-link-square":"f14c","share-square":"f14d","compass":"f14e","caret-square-o-down":"f150","caret-square-o-up":"f151","caret-square-o-right":"f152","eur":"f153","gbp":"f154","usd":"f155","inr":"f156","jpy":"f157","rub":"f158","krw":"f159","btc":"f15a","file":"f15b","file-text":"f15c","sort-alpha-asc":"f15d","sort-alpha-desc":"f15e","sort-amount-asc":"f160","sort-amount-desc":"f161","sort-numeric-asc":"f162","sort-numeric-desc":"f163","thumbs-up":"f164","thumbs-down":"f165","youtube-square":"f166","youtube":"f167","xing":"f168","xing-square":"f169","youtube-play":"f16a","dropbox":"f16b","stack-overflow":"f16c","instagram":"f16d","flickr":"f16e","adn":"f170","bitbucket":"f171","bitbucket-square":"f172","tumblr":"f173","tumblr-square":"f174","long-arrow-down":"f175","long-arrow-up":"f176","long-arrow-left":"f177","long-arrow-right":"f178","apple":"f179","windows":"f17a","android":"f17b","linux":"f17c","dribbble":"f17d","skype":"f17e","foursquare":"f180","trello":"f181","female":"f182","male":"f183","gratipay":"f184","sun-o":"f185","moon-o":"f186","archive":"f187","bug":"f188","vk":"f189","weibo":"f18a","renren":"f18b","pagelines":"f18c","stack-exchange":"f18d","arrow-circle-o-right":"f18e","arrow-circle-o-left":"f190","caret-square-o-left":"f191","dot-circle-o":"f192","wheelchair":"f193","vimeo-square":"f194","try":"f195","plus-square-o":"f196","space-shuttle":"f197","slack":"f198","envelope-square":"f199","wordpress":"f19a","openid":"f19b","university":"f19c","graduation-cap":"f19d","yahoo":"f19e","google":"f1a0","reddit":"f1a1","reddit-square":"f1a2","stumbleupon-circle":"f1a3","stumbleupon":"f1a4","delicious":"f1a5","digg":"f1a6","pied-piper-pp":"f1a7","pied-piper-alt":"f1a8","drupal":"f1a9","joomla":"f1aa","language":"f1ab","fax":"f1ac","building":"f1ad","child":"f1ae","paw":"f1b0","spoon":"f1b1","cube":"f1b2","cubes":"f1b3","behance":"f1b4","behance-square":"f1b5","steam":"f1b6","steam-square":"f1b7","recycle":"f1b8","car":"f1b9","taxi":"f1ba","tree":"f1bb","spotify":"f1bc","deviantart":"f1bd","soundcloud":"f1be","database":"f1c0","file-pdf-o":"f1c1","file-word-o":"f1c2","file-excel-o":"f1c3","file-powerpoint-o":"f1c4","file-image-o":"f1c5","file-archive-o":"f1c6","file-audio-o":"f1c7","file-video-o":"f1c8","file-code-o":"f1c9","vine":"f1ca","codepen":"f1cb","jsfiddle":"f1cc","life-ring":"f1cd","circle-o-notch":"f1ce","rebel":"f1d0","empire":"f1d1","git-square":"f1d2","git":"f1d3","hacker-news":"f1d4","tencent-weibo":"f1d5","qq":"f1d6","weixin":"f1d7","paper-plane":"f1d8","paper-plane-o":"f1d9","history":"f1da","circle-thin":"f1db","header":"f1dc","paragraph":"f1dd","sliders":"f1de","share-alt":"f1e0","share-alt-square":"f1e1","bomb":"f1e2","futbol-o":"f1e3","tty":"f1e4","binoculars":"f1e5","plug":"f1e6","slideshare":"f1e7","twitch":"f1e8","yelp":"f1e9","newspaper-o":"f1ea","wifi":"f1eb","calculator":"f1ec","paypal":"f1ed","google-wallet":"f1ee","cc-visa":"f1f0","cc-mastercard":"f1f1","cc-discover":"f1f2","cc-amex":"f1f3","cc-paypal":"f1f4","cc-stripe":"f1f5","bell-slash":"f1f6","bell-slash-o":"f1f7","trash":"f1f8","copyright":"f1f9","at":"f1fa","eyedropper":"f1fb","paint-brush":"f1fc","birthday-cake":"f1fd","area-chart":"f1fe","pie-chart":"f200","line-chart":"f201","lastfm":"f202","lastfm-square":"f203","toggle-off":"f204","toggle-on":"f205","bicycle":"f206","bus":"f207","ioxhost":"f208","angellist":"f209","cc":"f20a","ils":"f20b","meanpath":"f20c","buysellads":"f20d","connectdevelop":"f20e","dashcube":"f210","forumbee":"f211","leanpub":"f212","sellsy":"f213","shirtsinbulk":"f214","simplybuilt":"f215","skyatlas":"f216","cart-plus":"f217","cart-arrow-down":"f218","diamond":"f219","ship":"f21a","user-secret":"f21b","motorcycle":"f21c","street-view":"f21d","heartbeat":"f21e","venus":"f221","mars":"f222","mercury":"f223","transgender":"f224","transgender-alt":"f225","venus-double":"f226","mars-double":"f227","venus-mars":"f228","mars-stroke":"f229","mars-stroke-v":"f22a","mars-stroke-h":"f22b","neuter":"f22c","genderless":"f22d","facebook-official":"f230","pinterest-p":"f231","whatsapp":"f232","server":"f233","user-plus":"f234","user-times":"f235","bed":"f236","viacoin":"f237","train":"f238","subway":"f239","medium":"f23a","y-combinator":"f23b","optin-monster":"f23c","opencart":"f23d","expeditedssl":"f23e","battery-full":"f240","battery-three-quarters":"f241","battery-half":"f242","battery-quarter":"f243","battery-empty":"f244","mouse-pointer":"f245","i-cursor":"f246","object-group":"f247","object-ungroup":"f248","sticky-note":"f249","sticky-note-o":"f24a","cc-jcb":"f24b","cc-diners-club":"f24c","clone":"f24d","balance-scale":"f24e","hourglass-o":"f250","hourglass-start":"f251","hourglass-half":"f252","hourglass-end":"f253","hourglass":"f254","hand-rock-o":"f255","hand-paper-o":"f256","hand-scissors-o":"f257","hand-lizard-o":"f258","hand-spock-o":"f259","hand-pointer-o":"f25a","hand-peace-o":"f25b","trademark":"f25c","registered":"f25d","creative-commons":"f25e","gg":"f260","gg-circle":"f261","tripadvisor":"f262","odnoklassniki":"f263","odnoklassniki-square":"f264","get-pocket":"f265","wikipedia-w":"f266","safari":"f267","chrome":"f268","firefox":"f269","opera":"f26a","internet-explorer":"f26b","television":"f26c","contao":"f26d","500px":"f26e","amazon":"f270","calendar-plus-o":"f271","calendar-minus-o":"f272","calendar-times-o":"f273","calendar-check-o":"f274","industry":"f275","map-pin":"f276","map-signs":"f277","map-o":"f278","map":"f279","commenting":"f27a","commenting-o":"f27b","houzz":"f27c","vimeo":"f27d","black-tie":"f27e","fonticons":"f280","reddit-alien":"f281","edge":"f282","credit-card-alt":"f283","codiepie":"f284","modx":"f285","fort-awesome":"f286","usb":"f287","product-hunt":"f288","mixcloud":"f289","scribd":"f28a","pause-circle":"f28b","pause-circle-o":"f28c","stop-circle":"f28d","stop-circle-o":"f28e","shopping-bag":"f290","shopping-basket":"f291","hashtag":"f292","bluetooth":"f293","bluetooth-b":"f294","percent":"f295","gitlab":"f296","wpbeginner":"f297","wpforms":"f298","envira":"f299","universal-access":"f29a","wheelchair-alt":"f29b","question-circle-o":"f29c","blind":"f29d","audio-description":"f29e","volume-control-phone":"f2a0","braille":"f2a1","assistive-listening-systems":"f2a2","american-sign-language-interpreting":"f2a3","deaf":"f2a4","glide":"f2a5","glide-g":"f2a6","sign-language":"f2a7","low-vision":"f2a8","viadeo":"f2a9","viadeo-square":"f2aa","snapchat":"f2ab","snapchat-ghost":"f2ac","snapchat-square":"f2ad","pied-piper":"f2ae","first-order":"f2b0","yoast":"f2b1","themeisle":"f2b2","google-plus-official":"f2b3","font-awesome":"f2b4","handshake-o":"f2b5","envelope-open":"f2b6","envelope-open-o":"f2b7","linode":"f2b8","address-book":"f2b9","address-book-o":"f2ba","address-card":"f2bb","address-card-o":"f2bc","user-circle":"f2bd","user-circle-o":"f2be","user-o":"f2c0","id-badge":"f2c1","id-card":"f2c2","id-card-o":"f2c3","quora":"f2c4","free-code-camp":"f2c5","telegram":"f2c6","thermometer-full":"f2c7","thermometer-three-quarters":"f2c8","thermometer-half":"f2c9","thermometer-quarter":"f2ca","thermometer-empty":"f2cb","shower":"f2cc","bath":"f2cd","podcast":"f2ce","window-maximize":"f2d0","window-minimize":"f2d1","window-restore":"f2d2","window-close":"f2d3","window-close-o":"f2d4","bandcamp":"f2d5","grav":"f2d6","etsy":"f2d7","imdb":"f2d8","ravelry":"f2d9","eercast":"f2da","microchip":"f2db","snowflake-o":"f2dc","superpowers":"f2dd","wpexplorer":"f2de","meetup":"f2e0"}')},603475:(e,t,r)=>{"use strict";r.d(t,{h:()=>P,Z:()=>j});var n=r(375875),o=r.n(n),i=r(737275),a=r(472500),c=r.n(a),l=r(727418),u=r.n(l),s=r(505055),f=r.n(s),p=r(984596),d=r.n(p),y=r(916651),m=r(707294);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==b(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={},O=function(e){var t=c().parse(e,!0);return c().format(u()({},t,{search:null},{query:u()({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetCapabilities"},t.query)}))},w=function(e,t,r,n,o){for(var i=e.Capabilities.Contents,a=(0,m.G6)(e),c=(0,m.s5)(e),l=i.TileMatrixSet&&d()(i.TileMatrixSet)||[],s=[],f=l.length,p=0;p<f;p++)s.push((0,y.getEPSGCode)(l[p]["ows:SupportedCRS"]));var b=i.Layer,v=d()(b).filter((function(e){return!n||-1!==e["ows:Identifier"].toLowerCase().indexOf(n.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:v.length,numberOfRecordsReturned:Math.min(r,v.length),nextRecord:t+Math.min(r,v.length)+1,records:v.filter((function(e,n){return n>=t-1&&n<t-1+r})).map((function(e){return u()({},e,{SRS:s,TileMatrixSet:l,queryable:!!(0,m.b4)(a,"GetFeatureInfo","KVP"),requestEncoding:c,style:(0,m.EN)(e),format:(0,m.JY)(e),formats:d()(e.Format),GetTileURL:(0,m.b4)(a,"GetTile",c),capabilitiesURL:o})}))}},S={parseUrl:O,getRecords:function(e,t,r,n){var a=h[e];return a&&(new Date).getTime()<a.timestamp+1e3*((0,i.u8)("cacheExpire")||60)?new Promise((function(o){o(w(a.data,t,r,n,e))})):o().get(O(e)).then((function(o){var i;return f().parseString(o.data,{explicitArray:!1},(function(e,t){i=t})),h[e]={timestamp:(new Date).getTime(),data:i},w(i,t,r,n,e)}))},getCapabilities:function(e,t){null!=t&&t.force&&h[e]&&delete h[e];var r=h[e];return r&&(new Date).getTime()<r.timestamp+1e3*((0,i.u8)("cacheExpire")||60)?new Promise((function(e){e(r.data)})):o().get(O(e)).then((function(t){var r;return f().parseString(t.data,{explicitArray:!1},(function(e,t){r=t})),h[e]={timestamp:(new Date).getTime(),data:r},r}))},textSearch:function(e,t,r,n){return S.getRecords(e,t,r,n)},reset:function(){Object.keys(h).forEach((function(e){delete h[e]}))}},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;return S.getCapabilities(e,{force:null==r?void 0:r.force}).then((function(e){var r,n,o,i,a=t.split(":"),c=d()((null==e||null===(r=e.Capabilities)||void 0===r||null===(n=r.Contents)||void 0===n?void 0:n.Layer)||[]).find((function(e){return e["ows:Identifier"]===a[1]||e["ows:Identifier"]===t})),l=d()((null==c?void 0:c.TileMatrixSetLink)||[]).map((function(e){return e.TileMatrixSet})),u=d()((null==e||null===(o=e.Capabilities)||void 0===o||null===(i=o.Contents)||void 0===i?void 0:i.TileMatrixSet)||[]).filter((function(e){return l.includes(e["ows:Identifier"])})),s=u.map((function(e){var t=e.TileMatrix.map((function(e){return e.TopLeftCorner.split(" ").map(parseFloat)})),r=e.TileMatrix.map((function(e){return[parseFloat(e.TileWidth),parseFloat(e.TileHeight)]})),n=t[0],o=r[0],i=t.every((function(e){return n[0]===e[0]&&n[1]===e[1]})),a=r.every((function(e){return o[0]===e[0]&&o[1]===e[1]}));return g(g({id:e["ows:Identifier"],crs:(0,y.getEPSGCode)(e["ows:SupportedCRS"]),scales:e.TileMatrix.map((function(e){return parseFloat(e.ScaleDenominator)}))},i?{origin:n}:{origins:t}),a?{tileSize:o}:{tileSizes:r})}));return{tileMatrixSets:u,tileMatrixSetLinks:l,tileGrids:s,styles:d()((null==c?void 0:c.Style)||[]).map((function(e){return e["ows:Identifier"]})),formats:d()((null==c?void 0:c.Format)||[])}}))};const j=S},735913:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i),c=r(480681),l=r(950966),u=r(805346);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function p(e,t,r){return t=y(t),function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:String(t)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,t,arguments)}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.className?" "+this.props.className:"",r=a().createElement(c.Glyphicon,{className:"toc-layer-tool"+t,style:this.props.style,glyph:this.props.glyph,onClick:function(){return e.props.onClick(e.props.node)}});return this.props.tooltip?a().createElement(l.Z,{placement:"bottom",overlay:a().createElement(c.Tooltip,{id:"Tooltip-"+this.props.tooltip},a().createElement("strong",null,a().createElement(u.Z,{msgId:this.props.tooltip,msgParams:this.props.msgParams})))},r):r}}])&&f(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(a().Component);b(g,"propTypes",{node:o().object,onClick:o().func,style:o().object,glyph:o().string,tooltip:o().string,msgParams:o().object,className:o().string}),b(g,"defaultProps",{onClick:function(){}});const h=g},497844:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),c=r(1036),l=r(414293),u=r.n(l),s=r(701469),f=r.n(s);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function y(e,t,r){return t=b(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,t,arguments)}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return o().createElement("div",{className:"mapstore-slider ".concat(this.props.hideTooltip?"":"with-tooltip"),onClick:function(e){e.stopPropagation()}},this.props.hideTooltip&&o().createElement(c.Z,{disabled:this.props.disabled,start:[u()(this.props.opacity)?100:Math.round(100*this.props.opacity)],range:{min:0,max:100},onChange:function(t){f()(t)&&t[0]&&e.props.onChange(parseFloat(t[0].replace(" %","")/100))}})||o().createElement(c.Z,{disabled:this.props.disabled,start:[u()(this.props.opacity)?100:Math.round(100*this.props.opacity)],tooltips:[!0],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" %"}},range:{min:0,max:100},onChange:function(t){return e.props.onChange(parseFloat(t[0].replace(" %",""))/100)}}))}}])&&d(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);g(O,"propTypes",{opacity:a().number,disabled:a().bool,hideTooltip:a().bool,onChange:a().func}),g(O,"defaultProps",{opacity:1,onChange:function(){},visibility:!0});const w=O},359294:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i),c=r(480681),l=r(950966),u=r(359112),s=r(893379),f=r.n(s),p=r(161253);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function b(e,t,r){return t=g(t),function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(e,v()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function w(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:String(t)}f()(p.Z,{insert:"head",singleton:!1}),p.Z.locals;var P=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return w(h(e=b(this,t,[].concat(n))),"getFilteredTitle",(function(t){var r=new RegExp(e.props.filterText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi"),n=t.match(r);return e.props.filterText&&n?t.split(r).map((function(e,t){return t<n.length?[].concat(function(e){if(Array.isArray(e))return y(e)}(r=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[a().createElement("strong",{key:t},n[t])]):e;var r})):t})),w(h(e),"renderTitle",(function(){var t=(0,u.BC)(e.props).title;return a().createElement("div",{className:"toc-title",onClick:e.props.onClick?function(t){return e.props.onClick(e.props.node.id,"layer",t.ctrlKey)}:function(){},onContextMenu:function(t){t.preventDefault(),e.props.onContextMenu(e.props.node)}},e.getFilteredTitle(t))})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=(0,u.BC)(this.props).tooltipText;return this.props.tooltip&&e?a().createElement(l.Z,{placement:this.props.node.tooltipPlacement||"top",overlay:a().createElement(c.Tooltip,{id:"tooltip-layer-title"},e)},this.renderTitle()):this.renderTitle()}}])&&m(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(a().Component);w(P,"propTypes",{node:o().object,onClick:o().func,onContextMenu:o().func,currentLocale:o().string,filterText:o().string,tooltip:o().bool,tooltipOptions:o().object}),w(P,"defaultProps",{onClick:function(){},onContextMenu:function(){},currentLocale:"en-US",filterText:"",tooltip:!1,tooltipOptions:{maxLength:807,separator:" - "}});const j=P},262770:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),c=r(441609),l=r.n(c),u=r(281763),s=r.n(u),f=r(490079);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function m(e,t,r){return t=v(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(e,b()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function O(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}var S=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(g(r=m(this,t,[e])),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),O(g(r),"canShow",(function(e){return e.visibility||!r.props.showOnlyIfVisible})),O(g(r),"useLegendOptions",(function(){return!l()(r.props.node.legendOptions)&&s()(r.props.node.legendOptions.legendHeight)&&s()(r.props.node.legendOptions.legendWidth)})),O(g(r),"setOverflow",(function(){return r.useLegendOptions()&&r.props.node.legendOptions.legendWidth>r.state.containerWidth})),r.containerRef=o().createRef(),r}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,r=t&&this.useLegendOptions();return t?o().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},o().createElement(f.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:r&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:r&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}],n&&y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);O(S,"propTypes",{node:a().object,legendContainerStyle:a().object,legendStyle:a().object,showOnlyIfVisible:a().bool,currentZoomLvl:a().number,scales:a().array,WMSLegendOptions:a().string,scaleDependent:a().bool,language:a().string,legendWidth:a().number,legendHeight:a().number}),O(S,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0});const P=S},490079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),c=r(414293),l=r.n(c),u=r(727418),s=r.n(u),f=r(675263),p=r.n(f),d=r(124852),y=r.n(d),m=r(233044),b=r(805346);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function h(e,t,r){return t=w(t),function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(e,O()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function j(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:String(t)}var T=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return j(S(e=h(this,t,[].concat(n))),"state",{error:!1}),j(S(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),j(S(e),"getScale",(function(e){if(e.scales&&void 0!==e.currentZoomLvl&&e.scaleDependent){var t,r=Math.round(e.currentZoomLvl),n=null!==(t=e.scales[r])&&void 0!==t?t:e.scales[e.scales.length-1];return Math.round(n)}return null})),j(S(e),"getUrl",(function(t,r){if(t.layer&&"wms"===t.layer.type&&t.layer.url){var n=t.layer,i=l()(r)?a()(n.url)&&Math.floor(Math.random()*n.url.length):r,c=a()(n.url)?n.url[i]:n.url.replace(/[?].*$/g,""),u=o().parse(c),f=(0,m.clearNilValuesForParams)(n.params),p=e.getScale(t),d=s()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:t.legendHeight,width:t.legendWidth,layer:n.name,style:n.style||null,version:n.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:t.legendOptions},n.legendParams||{},t.language&&n.localizedLayerStyles?{LANGUAGE:t.language}:{},(0,m.addAuthenticationToSLD)(f||{},t.layer),f&&f.SLD_BODY?{SLD_BODY:f.SLD_BODY}:{},null!==p?{SCALE:p}:{});return(0,m.addAuthenticationParameter)(c,d),o().format({host:u.host,protocol:u.protocol,pathname:u.pathname,query:d})}return""})),j(S(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?y().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):y().createElement(b.Z,{msgId:"layerProperties.legenderror"})}}])&&g(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(y().Component);j(T,"propTypes",{layer:p().object,legendHeight:p().number,legendWidth:p().number,legendOptions:p().string,style:p().object,currentZoomLvl:p().number,scales:p().array,scaleDependent:p().bool,language:p().string}),j(T,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const C=T},911766:(e,t,r)=>{"use strict";r.d(t,{H:()=>j,Z:()=>E});var n=r(124852),o=r.n(n),i=r(212961),a=r(513218),c=r.n(a),l=r(717621),u=r.n(l),s=r(480681),f=r(38560),p=r(725288),d=r(145869),y=r(805346),m=r(615402),b=r(815135),v=["boxShadow","MozBoxShadow","WebkitBoxShadow"];function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){var n;return n=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==g(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=(0,b.Z)(f.Z);function P(e){var t=e.themeStyle,r=e.disableBackgroundPicker,a=void 0!==r&&r,c=e.disableBackgroundAlpha,l=e.disableTextColor,f=e.disableShadow,b=e.onChange,g=void 0===b?function(){}:b,h=e.onOpen,w=void 0===h?function(){}:h,P=e.placement,j=(0,n.useRef)(),E=null==t?void 0:t.backgroundColor,T=null==t?void 0:t.color,C=!l&&E&&T&&!u().isReadable(T,E)?u().mostReadable(E,[T,"#000000","#ffffff"],{includeFallbackColors:!0}).toHexString():null;return o().createElement(o().Fragment,null,!a&&o().createElement("div",{className:"ms-custom-theme-picker-field"},o().createElement("div",null,o().createElement(y.Z,{msgId:"geostory.customizeTheme.backgroundColorLabel"})),o().createElement("div",null,o().createElement(i.Z,{placement:P,key:E,onOpen:w,color:E,format:c?"hex":"rgb",disableAlpha:c,presetColors:[],onChangeColor:function(e){var r=u()(e).isLight()?u()(e).darken(10).toHexString():u()(e).lighten(15).toHexString(),n=!l&&!(null!=t&&t.color)&&{color:u().mostReadable(e,["#000000","#ffffff"],{includeFallbackColors:!0}).toHexString()};g(O(O({},t),{},{backgroundColor:e,borderColor:r},!l&&n))}}))),!l&&o().createElement("div",{className:"ms-custom-theme-picker-field"},o().createElement("div",null,o().createElement("div",null,o().createElement(y.Z,{msgId:"geostory.customizeTheme.textColorLabel"})),o().createElement(p.Z,{className:"ms-custom-theme-picker-popover",ref:function(e){e&&(j.current=e.trigger)},placement:"top",content:o().createElement(o().Fragment,null,o().createElement(m.Z,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:C}}),o().createElement(S,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,r;g(O(O({},t),{},{color:C})),null===(e=j.current)||void 0===e||null===(r=e.hide)||void 0===r||r.call(e)}},o().createElement(y.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},C&&o().createElement(S,{className:"square-button-md no-border",style:{display:C?"block":"none"}},o().createElement(s.Glyphicon,{glyph:"exclamation-mark"}))||o().createElement("div",null))),o().createElement("div",null,o().createElement(i.Z,{placement:P,key:T,color:T,onOpen:w,format:"hex",disableAlpha:!0,presetColors:[],onChangeColor:function(e){g(O(O({},t),{},{color:e}))}}))),!f&&o().createElement("div",{className:"ms-custom-theme-picker-field"},o().createElement("div",null,o().createElement(y.Z,{msgId:"geostory.customizeTheme.shadowLabel"})),o().createElement("div",null,o().createElement(d.Z,{checked:null==t?void 0:t.boxShadow,onChange:function(){var e=t||{},r=e.boxShadow,n=(e.MozBoxShadow,e.WebkitBoxShadow,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,v));g(r?O({},n):O(O({},n),{},{boxShadow:"0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)"}))}}))))}function j(e){var t=e.selected,r=e.value,n=e.storyTheme,i=e.onUpdate,a=e.onActive,l=e.disableBackgroundAlpha,u=e.disableTextColor,f=e.disableShadow,p=function(e,n){var o=c()(t)&&t;return i("theme",O(O({},o),{},n?w({value:e},r,O({},n)):{value:e}))},d=n||{},m=d.color,b=d.backgroundColor,v=b&&{backgroundColor:b},g=O(O({},!u&&m&&{color:m}),v),h=(null==t?void 0:t.value)===r,j=(null==t?void 0:t[r])||g;return o().createElement(o().Fragment,null,h?o().createElement("div",{className:"ms-custom-theme-picker-menuitem-header"},o().createElement("div",null,o().createElement(y.Z,{msgId:"geostory.contentToolbar.customizeThemeLabel"})),o().createElement(S,{tooltipId:"geostory.contentToolbar.customizeThemeRemoveLabel",className:"square-button-md no-border",onClick:function(e){e.stopPropagation(),p("")}},o().createElement(s.Glyphicon,{glyph:"trash"}))):o().createElement(o().Fragment,null,o().createElement(s.MenuItem,{active:h,onClick:function(){return p(r,j)}},o().createElement(y.Z,{msgId:"geostory.contentToolbar.customizeThemeLabel"}))),h&&o().createElement("div",{className:"ms-custom-theme-picker-menuitem"},o().createElement(P,{disableBackgroundAlpha:l,disableTextColor:u,disableShadow:f,themeStyle:j,onChange:function(e){return p(r,e)},onOpen:a})))}const E=P},725288:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),c=r(480681),l=r(737275);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function f(e,t,r){return t=d(t),function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(e,p()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:String(t)}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return b(y(e=f(this,t,[].concat(n))),"getContainerNode",(function(t){return t?document.body:e.parentNode||document.querySelector("."+(l.ZP.getConfigProp("themePrefix")||"ms2")+" > div")||document.body})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.getContainerNode(this.props.useBody);return o().createElement("div",{ref:function(t){e.parentNode=t&&t.parentNode},className:this.props.className,style:this.props.style},o().createElement(c.OverlayTrigger,{ref:function(t){e.trigger=t},trigger:["click"],container:t,placement:this.props.placement,rootClose:!0,overlay:o().createElement(c.Popover,{id:this.props.id,title:this.props.title,className:this.props.popoverClassName},this.props.content)},this.props.children))}}])&&s(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);b(g,"propTypes",{id:a().string,style:a().object,className:a().string,popoverClassName:a().string,placement:a().string,title:a().node,content:a().node,useBody:a().bool}),b(g,"defaultProps",{id:"",useBody:!1});const h=g},323010:(e,t,r)=>{"use strict";r.d(t,{d:()=>x,Z:()=>D});var n=r(124852),o=r.n(n),i=r(867076),a=r(423570),c=r.n(a),l=r(747359),u=r(1979),s=r(618446),f=r.n(s),p=r(624262),d=r(125376),y=r(49977),m=r(249243),b=r(313311),v=r.n(b),g=r(171703),h=r(134990),O=r(866113);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}var S=["rawPos"],P=["PopupSupport","tools"];function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(this,arguments)}function E(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==w(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e){return e&&0===e.indexOf("geostory-vector")}var x=(0,i.compose)((0,g.connect)((function(e){return{sections:(0,O.NR)(e)}}),{onClickMarker:h.Vx}),(0,i.withHandlers)({onClickMarker:function(e){var t=e.onClickMarker,r=void 0===t?function(){}:t;return function(e,t,n){var i=v()(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.queryParams,n=(void 0===r?{}:r).request,o=e.layerMetadata,i=(void 0===o?{}:o).layerId;return!n&&i.toLowerCase()===t}))||{},a=i.response,c=(void 0===a?{}:a).features,l=k(void 0===c?[]:c,1)[0],u={popups:[]};if(null!=l&&l.properties){var s=null==l?void 0:l.properties,f=s.sectionId,p=s.contentId,d=s.title;r('sections[{"id":"'.concat(f,'"}].contents[{"id":"').concat(p,'"}].carouselToggle'),!0),d&&(u={popups:n.map((function(e){return C(C({},e),{},{component:function(){return o().createElement("div",{className:"ms-geostory-carousel-viewer"},d)}})}))})}return u}}})),M=(0,i.mapPropsStream)((function(e){var t=(0,i.createEventHandler)(),r=t.stream,n=t.handler;return r.withLatestFrom(e.map((function(e){return{map:e.map,layers:e.layers,options:e.options}})).distinctUntilChanged((function(e,t){return f()(e,t)}))).switchMap((function(e){var t=k(e,2),r=t[0],n=r.point,o=r.layerInfo,i=t[1],a=i.map,l=i.layers,s=void 0===l?[]:l,f=i.options,b=(void 0===f?{}:f).mapOptions,v=(void 0===b?{}:b).mapInfoFormat,g=void 0===v?(0,u.GA)():v,h=s.filter((function(e){return(0,p.T4)(e,a.resolution)&&(0,d.y_)(e)}));A(o)&&(h=h.filter((function(e){var t=e.id;return o===t})));var O=["SLD_BODY"],w=["buffer","cql_filter","filter","propertyName"];return 0===h.length?y.Observable.of({requests:[{}],responses:[{response:{features:[]}}],validResponses:[]}):y.Observable.from(h).mergeMap((function(e){var t=(0,d.Fm)(e,{format:g,map:a,point:n,currentLocale:"en-US"}),r=t.url,o=t.request,i=t.metadata,l=r,u=o,s=C(C({},(0,d.K7)(e,w,O)),u),f=c()();return(r?(0,m.y)(l,s,e).map((function(e){return e.data.exceptions?{reqId:f,exceptions:e.data.exceptions,queryParams:u,layerMetadata:i}:{data:e.data,reqId:f,queryParams:u,layerMetadata:C(C({},i),{},{features:e.features,featuresCrs:e.featuresCrs})}})):y.Observable.empty()).catch((function(e){return{error:e.data||e.statusText||e.status,reqId:f,queryParams:u,layerMetadata:i}})).startWith({start:!0,reqId:f,request:s})})).scan((function(e,t){var r=e.requests,n=e.responses,i=e.validResponses;if(t.start){var a=t.reqId,c=t.request;return{requests:r.concat({reqId:a,request:c}),responses:n,validResponses:i}}var l=t.data,u=t.queryParams,s=t.layerMetadata,f=(0,d.Te)(g),p=n.concat({response:l,queryParams:u,layerMetadata:s});return{requests:r,validResponses:f.getValidResponses(p),responses:p,layerInfo:o}}),{requests:[],responses:[],validResponses:[],layerInfo:o})})).startWith({requests:[],responses:[]}).combineLatest(e,(function(e){return C(C({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{},{mapInfo:e,getFeatureInfoHandler:n})}))}));const D=(0,i.branch)((function(e){var t=e.map,r=(void 0===t?{}:t).mapInfoControl,n=void 0!==r&&r;return!e.isDrawEnabled&&n}),(0,i.compose)(M,(0,i.withStateHandlers)({popups:[]},{onClick:function(e,t){var r=t.getFeatureInfoHandler,n=void 0===r?function(){}:r,o=t.map,i=(void 0===o?{}:o).mapInfoControl;return function(e,t){var r=e.rawPos,o=void 0===r?[]:r,a=E(e,S);return A(t)||i?(n({point:a,layerInfo:t}),{popups:[{position:{coordinates:o},id:c()()}]}):{popups:[]}}},onPopupClose:function(){return function(){return{popups:[]}}}}),(0,i.withPropsOnChange)(["mapInfo","popups"],(function(e){var t=e.mapInfo,r=e.popups,n=e.options,i=(void 0===n?{}:n).mapOptions,a=(void 0===i?{}:i).mapInfoFormat,c=void 0===a?(0,u.GA)():a,s=e.onClickMarker,f=void 0===s?function(){}:s,p=t.responses,d=t.requests,y=t.validResponses,m=t.layerInfo;return A(m)?f(y,m,r):{popups:r.map((function(e){return C(C({},e),{},{component:function(){return o().createElement(l.Z,{renderValidOnly:!0,responses:p,requests:d,validResponses:y,format:c,showEmptyMessageGFI:!0,missingResponses:(d||[]).length-(p||[]).length})}})}))}})),(0,i.withPropsOnChange)(["plugins","onPopupClose","popups"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,r=e.popups,n=e.onPopupClose,i=t.PopupSupport,a=t.tools,c=void 0===a?{}:a,l=E(t,P);return i?{plugins:C(C({},l),{},{tools:C(C({},c),{},{popup:function(e){return o().createElement(i,j({},e,{popups:r,onPopupClose:n}))}})})}:{}}))))},81593:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(124852),o=r(945338);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){var n;return n=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==i(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const p=function(e){var t,r=e.direction,i=void 0===r?"horizontal":r,a=e.deltaScroll,p=e.width,d=e.height,y=e.transition,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],b=u((0,n.useState)(0),2),v=b[0],g=b[1],h=u((0,n.useState)(0),2),O=h[0],w=h[1],S=(0,n.useRef)({x:0,y:0}),P=u((0,n.useState)(!1),2),j=P[0],E=P[1],T=u((0,n.useState)("start"),2),C=T[0],k=T[1],I=u((0,n.useState)(),2),A=I[0],x=I[1],M=(0,n.useRef)(),D=(0,n.useRef)({});function _(e,t){x("move:start");var r=M.current,n=r.parentNode,o=r.getBoundingClientRect(),a=n.getBoundingClientRect();if("horizontal"===i){var c=e+o.width;e<0&&c>a.width?(g(e),S.current.x=e,k("center")):e>=0?(g(0),S.current.x=0,k("start")):c<=a.width&&(g(a.width-o.width),S.current.x=a.width-o.width,k("end"))}if("vertical"===i){var l=t+o.height;t<0&&l>a.height?(w(t),S.current.y=t,k("center")):t>=0?(w(0),S.current.y=0,k("start")):l<=a.height&&(w(a.height-o.height),S.current.y=a.height-o.height,k("end"))}setTimeout((function(){x("move:end")}),y)}function R(){var e=M.current,t=e.parentNode,r=e.getBoundingClientRect(),n=t.getBoundingClientRect();return!("horizontal"===i&&n.width>=r.width||"vertical"===i&&n.height>=r.height)}(0,n.useEffect)((function(){function e(e){e.preventDefault();var t=R();return E(R()),t?_(S.current.x-(e.deltaY>0?a:-a),S.current.y-(e.deltaY>0?a:-a)):null}var t=R();E(t);var r=M.current.parentNode;return t&&_(S.current.x,S.current.y),t&&r&&r.addEventListener&&r.addEventListener("wheel",e),function(){t&&r&&r.removeEventListener&&r.removeEventListener("wheel",e)}}),[p,d].concat(function(e){if(Array.isArray(e))return f(e)}(t=m)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));var Z=(0,o.QS)({onSwiping:function(e){e.event.stopPropagation();var t=R();return E(R()),t?_(v-e.deltaX*e.velocity,O-e.deltaY*e.velocity):null},trackTouch:!0,trackMouse:!0});function F(e){var t=D.current[e];if(t){var r=M.current,n=(r&&r.parentNode).getBoundingClientRect(),o=t.getBoundingClientRect();if("horizontal"===i){var a=n.width,c=n.left,l=o.width,u=o.left,s=c+a,f=u+l;return c<=u&&s>=u||c<=f&&s>=f}}return!1}return{status:A,canSwipe:j,isStartControlActive:j&&("end"===C||"center"===C),isEndControlActive:j&&("start"===C||"center"===C),positionLabel:C,coordinates:{x:v,y:O},containerPropsHandlers:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{}:e;return c(c({},Z),{},{style:c({position:"relative",overflow:"hidden",width:"100%",height:"100%"},t)})},contentPropsHandlers:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{}:e;return{ref:M,style:c(c(c(c({position:"absolute",display:"flex"},y&&{transition:"transform ".concat(y,"ms ease 0s")}),{},{flexDirection:"horizontal"===i?"row":"column"},j&&"horizontal"===i&&{transform:"translateX(".concat(v,"px)")}),j&&"vertical"===i&&{transform:"translateY(".concat(O,"px)")}),t)}},itemPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.onClick;return c({key:t,ref:function(e){return e&&function(e,t){D.current=c(c({},D.current),{},l({},e,t))}(t,e)}},r?{onClick:r,tabindex:F(t)?0:-1,onKeyDown:function(e){"Enter"===e.key&&r()}}:{tabindex:-1})},updateCoordinates:_,moveItemInViewById:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).margin,r=void 0===t?0:t,n=D.current[e];if(n){var o=M.current,a=(o&&o.parentNode).getBoundingClientRect(),c=n.getBoundingClientRect();if("horizontal"===i){var l=a.width,u=a.left,s=c.width,f=c.left;u<=f&&u+l>=f+s||_(-(f-o.getBoundingClientRect().left)+r,void 0)}}},moveToDeltaSize:function(e){_(v+e,O+e)}}}},240986:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(124852),o=r(675263),i=r.n(o),a=r(916651),c=r(752043),l=r(898631);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t,r){var n;return n=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==u(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=s(s({},l.Bk.OPENLAYERS,{fit:function(e){var t,r=e.map,n=e.geometry,o=e.padding,i=e.geometryProjection,l=e.fixedZoom,u=e.maxZoom,s=e.duration,f=r.getView(),p=f.getProjection().getCode();if(2===n.length){var d=(0,a.reproject)(n,i,p),y=d.x,m=d.y;t=new c.Z([y,m])}else t=(0,a.reprojectBbox)(n,i,p);var b=o||{},v=b.top,g=void 0===v?0:v,h=b.right,O=void 0===h?0:h,w=b.bottom,S=void 0===w?0:w,P=b.left,j=void 0===P?0:P;f.fit(t,{padding:[g,O,S,j],maxZoom:l?f.getZoom():u,duration:s})}}),l.Bk.LEAFLET,{fit:function(e){var t,r,n,o=e.map,i=e.geometry,c=e.padding,l=e.geometryProjection,u=e.fixedZoom,s=e.maxZoom,p=e.duration,d=u?o.getZoom():s,y=c.top,m=void 0===y?0:y,b=c.right,v=void 0===b?0:b,g=c.bottom,h=void 0===g?0:g,O=c.left,w=void 0===O?0:O;if(2===i.length){var S=(0,a.reproject)(i,l,"EPSG:4326"),P=S.x,j=S.y;t=[[j,P],[j,P]]}else{var E=(r=(0,a.reprojectBbox)(i,l,"EPSG:4326"),n=4,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(r,n)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),T=E[0],C=E[1],k=E[2];t=[[C,T],[E[3],k]]}o.flyToBounds(t,{paddingTopLeft:[w,m],paddingBottomRight:[v,h],maxZoom:d,animate:!!p,duration:p/1e3})}});function d(e){var t=e.map,r=e.mapType,o=e.active,i=e.geometry,a=e.geometryProjection,c=void 0===a?"EPSG:4326":a,l=e.padding,u=e.maxZoom,s=e.fixedZoom,f=e.duration,d=(0,n.useRef)();return d.current=function(){t&&p[r]&&p[r].fit({map:t,geometry:i,padding:l,geometryProjection:c,maxZoom:u,fixedZoom:s,duration:f})},(0,n.useEffect)((function(){o&&i&&d.current()}),[i,o]),null}d.propTypes={id:i().string,map:i().object,mapType:i().string,active:i().bool,geometry:i().array,geometryProjection:i().string,padding:i().object,maxZoom:i().number,fixedZoom:i().bool,duration:i().number},d.defaultProps={geometryProjection:"EPSG:4326",padding:{top:0,right:0,bottom:0,left:0}};const y=d},743837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),c=r(706909),l=r(898631);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var s=["map","active","method","mapId","mapType","features","options","onChange"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==u(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e){var t,r,i=e.map,a=e.active,u=e.method,p=e.mapId,m=e.mapType,b=e.features,v=e.options,g=e.onChange,h=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s),O=(t=(0,n.useState)(null),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=O[0],S=O[1];return(0,n.useEffect)((function(){S(a?"drawOrEdit":"clean")}),[a]),m!==l.Bk.OPENLAYERS?null:o().createElement(c.Z,f({},h,{map:i,drawOwner:p,drawStatus:w,drawMethod:u,features:b,options:d({drawEnabled:a,addClickCallback:!0,editEnabled:!0,featureProjection:"EPSG:4326",geodesic:!1,stopAfterDrawing:!1,transformToFeatureCollection:!0,translateEnabled:!1,useSelectedStyle:!0},v),onDrawingFeatures:g.bind(null,p)}))}m.propTypes={active:a().bool,method:a().string,features:a().array,onChange:a().func,options:a().object},m.defaultProps={active:!1,method:"Point",features:[],onChange:function(){},options:{}};const b=m},916788:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),c=r(1206),l=r.n(c),u=r(196797),s=r.n(u),f=r(867076);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function b(e,t,r){return t=g(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function O(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,t,arguments)}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){s()(this._node)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.src!==this.props.src&&s()(this._node)}},{key:"render",value:function(){var e=this,t=this.props,r=t.id,n=t.src,i=t.fit,a=void 0===i?"cover":i,c=t.enableFullscreen,u=void 0===c||c,s=t.fullscreen,f=t.onClick,p=t.description,d=t.showCaption,m=t.caption,b=void 0===m?p:m,v=t.credits,g=t.loaderStyle,h=this.props.loaderComponent,O=this.props.errorComponent;return o().createElement("div",{id:r,className:"ms-media ms-media-image"},n&&"error"!==this.props.status&&o().createElement("img",{ref:function(t){e._node=t},src:n,onLoad:function(){return e.props.onChangeStatus("loaded")},onError:function(){return e.props.onChangeStatus("error")},onClick:u?function(){return f(!0)}:void 0,style:{objectFit:a,fontFamily:"object-fit: ".concat(a),cursor:u?"pointer":"default"}}),n&&!this.props.status&&h&&o().createElement(h,{style:y({},g)}),"error"===this.props.status&&O&&o().createElement(O,null),v&&o().createElement("div",{className:"ms-media-credits"},o().createElement("small",null,v)),d&&b&&o().createElement("div",{className:"ms-media-caption"},o().createElement("small",null,b)),u&&s?o().createElement(l(),{mainSrc:n,onCloseRequest:function(){return f(!1)}}):null)}}])&&m(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(n.Component);O(S,"propTypes",{src:a().string,id:a().string,fit:a().string,description:a().string,showCaption:a().bool,credits:a().string,altText:a().string,enableFullscreen:a().bool,fullscreen:a().bool,onClick:a().func,onChangeStatus:a().func,status:a().string,loaderComponent:a().oneOfType([a().element,a().func]),errorComponent:a().oneOfType([a().element,a().func]),caption:a().string,loaderStyle:a().object});const P=(0,f.compose)((0,f.withState)("fullscreen","onClick",!1),(0,f.withState)("status","onChangeStatus",""))(S)},437034:(e,t,r)=>{"use strict";r.d(t,{Z:()=>D});var n=r(124852),o=r.n(n),i=r(867076),a=r(480681),c=r(319180),l=r(91812),u=r(937981),s=r(469705),f=r(57068),p=r(1979),d=r(323010),y=r(461928);const m=(0,i.compose)(s.Z,(0,l.Z)(0),c.Z,d.Z,p.yM,u.Z,f.e)(y.Z);var b=r(192579),v=r(727693),g=r(399534),h=r(815135),O=r(580628),w=r(898631),S=r(38560);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}var j=["id","map","fit","editMap","onMapViewChanges","eventHandlers","expandable","active","setActive","width","height","size","showCaption","caption","mapType","onMapTypeLoaded","layers","children"],E=["layers","mapOptions","description"];function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T.apply(this,arguments)}function C(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==P(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var M=(0,h.Z)(S.Z);const D=(0,i.compose)((0,i.withState)("active","setActive",!1),O.Z)((function(e){var t=e.id,r=e.map,i=void 0===r?{layers:[v.D]}:r,c=e.fit,l=e.editMap,u=void 0!==l&&l,s=e.onMapViewChanges,f=e.eventHandlers,p=e.expandable,d=void 0!==p&&p,y=e.active,h=e.setActive,O=e.width,S=e.height,P=e.size,k=e.showCaption,I=e.caption,D=e.mapType,_=void 0===D?w.Bk.OPENLAYERS:D,R=e.onMapTypeLoaded,Z=e.layers,F=e.children,L=x(e,j),N=i.data?i.data:i,z=N.layers,B=void 0===z?[]:z,U=N.mapOptions,W=void 0===U?{}:U,G=N.description,q=x(N,E),H=I||G,V=d?y?{zoomControl:!1,interactive:!0,mapOptions:{scrollWheelZoom:!0,interactions:{mouseWheelZoom:!0,dragPan:!0}}}:{zoomControl:!1,interactive:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!1}}}:{mapOptions:W},Y=u?{mapOptions:A(A({},W),{},{interactions:A(A({},W.interactions),{},{mouseWheelZoom:q.zoomControl})})}:V,K=!L.isDrawEnabled&&q.mapInfoControl&&!(d&&!y),Q=o().createElement(o().Fragment,null,o().createElement(m,T({},L,{key:d?"overlay":"block",onMapViewChanges:s,eventHandlers:f,map:A(A({},q),{},{id:"media-".concat(t),resize:O+"-"+S+"_"+P,className:"aaaa",style:A({cursor:K?"pointer":"default"},d&&!y&&{pointerEvents:"none",touchAction:"none"})}),layers:Z?[].concat(C(B),C(Z)):B,tools:K?["popup"]:[],options:(0,b.kn)(Y),mapType:_,onMapTypeLoaded:R}),n.Children.map(F,(function(e){return e?(0,n.cloneElement)(e,{mapType:_}):null}))),d&&!u&&o().createElement(M,{className:"ms-expand-media-button",onClick:function(){return h(!y)},tooltipId:y?"geostory.closeFullscreenMap":"geostory.showFullscreenMap",tooltipPosition:"left"},o().createElement(a.Glyphicon,{glyph:y?"1-close":"1-full-screen"})));return o().createElement("div",{className:"ms-media ms-media-map ".concat(W.zoomPosition||""),style:{objectFit:c}},y&&d?o().createElement(g.Z,null,o().createElement("div",{className:"ms-expanded-media-container"},Q)):Q,k&&H&&o().createElement("div",{className:"ms-media-caption"},o().createElement("small",null,H)))}))},882017:(e,t,r)=>{"use strict";r.d(t,{Ln:()=>y,ZP:()=>b});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),c=r(916788),l=r(437034),u=r(452826),s=["debounceTime","mediaViewer","children"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=c.Z,y={image:c.Z,map:l.Z,video:u.Z},m=function(e){var t,r,i=e.debounceTime,a=e.mediaViewer,c=e.children,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s),u="".concat(l.id).concat(l.resourceId?"-".concat(l.resourceId):""),m=(t=(0,n.useState)({}),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],v=m[1],g=void 0===b[u]||b[u],h=a||y[l.mediaType||l.type]||d;return o().createElement(h,f({sectionType:l.sectionType,debounceTime:i,loading:b,isLoading:g,onLoad:v,loadingId:u},l),c)};m.propTypes={id:a().string,lazy:a().bool,mediaType:a().string,type:a().string,debounceTime:a().number},m.defaultProps={id:"",lazy:!0,mediaType:"",type:""};const b=m},393546:(e,t,r)=>{"use strict";r.d(t,{jF:()=>Re,Fc:()=>ke,EC:()=>De,C2:()=>Me,Cw:()=>xe,rm:()=>_e});var n=r(414293),o=r.n(n),i=r(92742),a=r.n(i),c=r(747037),l=r.n(c),u=r(701469),s=r.n(u),f=r(984596),p=r.n(f),d=r(91175),y=r.n(d),m=r(610928),b=r.n(m),v=r(313311),g=r.n(v),h=r(513218),O=r.n(h),w=r(421915),S=r(443143),P=r(916651),j=r(433506),E=r(281763),T=r.n(E),C=r(831219),k=r(639166),I=r(315565),A=r(898185),x=r(438097),M=r.n(x),D=j.Z.markers.extra,_=D.icons[0],R=D.icons[1],Z=D.size[1],F=j.Z.getGlyphs("fontawesome"),L=function(e,t){var r=e.highlight,n=e.rotation,o=void 0===n?0:n;return r?[new C.ZP({image:new k.Z({anchor:[.5,t],rotation:o,anchorXUnits:"fraction",anchorYUnits:"pixels",src:M(),scale:.5})})]:[]},N=function(e,t){var r,n,o=null==F?void 0:F[null==e||null===(r=e.style)||void 0===r?void 0:r.iconGlyph],i="FontAwesome",a=2;return null!=e&&null!==(n=e.style)&&void 0!==n&&n.iconText&&(o=e.style.iconText,i="sans-serif",a=1.6),new I.Z({rotation:t,text:o,font:"14px ".concat(i),offsetY:-Z*a/3,fill:new A.Z({color:"#FFFFFF"})})};const z={extra:{getIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o()(e.style&&e.style.rotation)?0:e.style.rotation;return[new C.ZP({image:new k.Z({rotation:t,anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:R,size:D.shadowSize})}),new C.ZP({image:new k.Z({rotation:t,src:_,anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",size:D.size,offset:[D.colors.indexOf(e.style.iconColor||"blue")*D.size[0],D.shapes.indexOf(e.style.iconShape||"circle")*D.size[1]]}),text:N(e,t)})].concat(L(e.style,2*(Z+15)))}},standard:{getIcon:function(e){var t=e.style,r=e.iconAnchor,n=o()(t&&t.rotation)?0:t.rotation,i=t.iconAnchor||r,a=[new C.ZP({image:new k.Z({anchor:i||[.5,1],anchorXUnits:t.anchorXUnits||(i||0===i?"pixels":"fraction"),anchorYUnits:t.anchorYUnits||(i||0===i?"pixels":"fraction"),size:s()(t.size)?t.size:T()(t.size)?[t.size,t.size]:void 0,rotation:n,anchorOrigin:t.anchorOrigin||"top-left",src:t.iconUrl||t.symbolUrlCustomized||t.symbolUrl})})];t.shadowUrl&&(a=[new C.ZP({image:new k.Z({anchor:[12,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:t.shadowUrl})}),a[0]]);var c=s()(t.size)?t.size[1]:T()(t.size)?t.size:0;return c=c>32?c+.75*c:Z+10,a.concat(L(t,c))}},html:{getIcon:function(){return null}}};var B=r(166287),U=r(409371),W=r(120767),G=r(752043),q=r(944538),H=r(882702),V=r(375875),Y=r.n(V),K=r(903918),Q=r.n(K),X=r(51205),J=r.n(X),$=r(727418),ee=r.n($),te=r(761868);function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==re(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ce=[0,153,255,1],le=new U.Z({radius:5,fill:null,stroke:new W.Z({color:"red",width:1})}),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,r=void 0===t?5:t,n=e.fillColor,o=void 0===n?"green":n,i=e.applyToPolygon,a=void 0!==i&&i;return new C.ZP({image:new U.Z({radius:r,fill:new A.Z({color:o})}),geometry:function(e){var t=e.getGeometry(),r=t.getType();if(!a&&"Polygon"===r)return null;var n="Polygon"===r?t.getCoordinates()[0]:t.getCoordinates();return n.length>1?new G.Z(y()(n)):null}})},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,r=void 0===t?5:t,n=e.fillColor,o=void 0===n?"red":n,i=e.applyToPolygon,a=void 0!==i&&i;return new C.ZP({image:new U.Z({radius:r,fill:new A.Z({color:o})}),geometry:function(e){var t=e.getGeometry(),r=t.getType();if(!a&&"Polygon"===r)return null;var n="Polygon"===r?t.getCoordinates()[0]:t.getCoordinates();return new G.Z(n.length>3?n[n.length-("Polygon"===r?2:1)]:b()(n))}})},fe=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),se(e)]},pe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new C.ZP({text:new I.Z({offsetY:void 0!==e.offsetY?e.offsetY:-4*Math.sqrt(e.fontSize),textAlign:e.textAlign||"center",textBaseline:e.verticalAlign||"middle",text:t||"",font:e.font,fill:new A.Z({color:(0,S.qq)(e.stroke||e.color||"#000000",e.opacity||1)}),stroke:e.labelOutlineColor?new W.Z({color:(0,S.qq)(e.labelOutlineColor,e.labelOutlineOpacity||1),width:e.labelOutlineWidth||1}):r?new W.Z({color:[255,255,255,1],width:2}):null,rotation:e.rotation?e.rotation*Math.PI/180:0}),image:r?new U.Z({radius:5,fill:null,stroke:new W.Z({color:(0,S.qq)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null})},de={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,radius:10},ye={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},me={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},be={Marker:{iconColor:"orange",iconShape:"circle",iconGlyph:"comment"},Text:{fontStyle:"normal",fontSize:"14",fontSizeUom:"px",fontFamily:"Arial",fontWeight:"normal",font:"14px Arial",textAlign:"center",color:"#000000",opacity:1},Circle:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2},Point:de,MultiPoint:de,LineString:ye,MultiLineString:ye,Polygon:me,MultiPolygon:me},ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"blue",width:3,lineDash:[6]};return{stroke:new W.Z(e.style?e.style.stroke||{color:e.style.color||t.color,lineDash:l()(e.style.dashArray)&&a()(e.style.dashArray).split(" ")||t.lineDash,width:e.style.weight||t.width,lineCap:e.style.lineCap||"round",lineJoin:e.style.lineJoin||"round",lineDashOffset:e.style.dashOffset||0}:ae({},t))}},ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"rgba(0, 0, 255, 0.1)"};return{fill:new A.Z(e.style?e.style.fill||{color:(0,S.qq)(e.style.fillColor,e.style.fillOpacity)||t.color}:ae({},t))}},he={Point:function(){return[new C.ZP({image:le})]},LineString:function(e){return[new C.ZP(ee()({},ve(e,{color:"blue",width:3})))]},MultiLineString:function(e){return[new C.ZP(ee()({},ve(e,{color:"blue",width:3})))]},MultiPoint:function(){return[new C.ZP({image:le})]},MultiPolygon:function(e){return[new C.ZP(ee()({},ve(e),ge(e)))]},Polygon:function(e){return[new C.ZP(ee()({},ve(e),ge(e)))]},GeometryCollection:function(e){return[new C.ZP(ee()({},ve(e),ge(e),{image:new U.Z({radius:10,fill:null,stroke:new W.Z({color:"magenta"})})}))]},Circle:function(){return[new C.ZP({stroke:new W.Z({color:"red",width:2}),fill:new A.Z({color:"rgba(255,0,0,0.2)"})})]},marker:function(e){return[new C.ZP({image:new k.Z({anchor:[14,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:J()})}),new C.ZP({image:new k.Z({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:Q()}),text:new I.Z({text:e.label,scale:1.25,offsetY:8,fill:new A.Z({color:"#000000"}),stroke:new W.Z({color:"#FFFFFF",width:2})})})]}},Oe=function(e,t){var r=e.getGeometry().getType();return he[r](t&&t.style&&t.style[r]&&{style:ae({},t.style[r])}||t||{})};function we(e){if(e.style.iconUrl)return z.standard.getIcon(e);var t=e.style.iconLibrary||"extra";return z[t]?z[t].getIcon(e):null}var Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{style:be},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=t.style[e]||t.style;if("MultiLineString"===e||"LineString"===e){var l=[new C.ZP({stroke:t.style.useSelectedStyle?new W.Z({color:[255,255,255,1],width:c.weight+2}):null}),new C.ZP(c?{stroke:new W.Z(c&&c.stroke?c.stroke:{color:(0,S.qq)(t.style&&c.color||"#0000FF",c.opacity||1),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),image:r?le:null}:{stroke:new W.Z(be[e]&&be[e].stroke?be[e].stroke:{color:(0,S.qq)(t.style&&be[e].color||"#0000FF",be[e].opacity||1),lineDash:t.style.highlight?[10]:[0],width:be[e].weight||1})})],u=t.style.useSelectedStyle?fe({radius:c.weight,applyToPolygon:!0},{radius:c.weight,applyToPolygon:!0}):[];return[].concat(ne(u),l)}if(("MultiPoint"===e||"Point"===e)&&(c.iconUrl||c.iconGlyph))return r?new C.ZP({image:le}):we({style:ae(ae({},c),{},{highlight:t.style.highlight||t.style.useSelectedStyle})});if("Circle"===e&&a)return[new C.ZP({stroke:t.style.useSelectedStyle?new W.Z({color:[255,255,255,1],width:c.weight+4}):null}),new C.ZP({stroke:new W.Z(c&&c.stroke?c.stroke:{color:t.style.useSelectedStyle?ce:(0,S.qq)(t.style&&c.color||"#0000FF",c.opacity||1),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),fill:new A.Z(c.fill?c.fill:{color:(0,S.qq)(t.style&&c.fillColor||"#0000FF",c.fillOpacity||.2)})}),new C.ZP({image:t.style.useSelectedStyle?new U.Z({radius:3,fill:new A.Z(c.fill?c.fill:{color:ce})}):null,geometry:function(e){var t=e.getGeometry();if("Circle"===t.getType()){var r=t.getCenter();return new G.Z(r)}return null}})];if("Text"===e&&c.font)return[pe(c,n[0],t.style.useSelectedStyle||t.style.highlight)];if("MultiPolygon"===e||"Polygon"===e){var s=[new C.ZP({stroke:t.style.useSelectedStyle?new W.Z({color:[255,255,255,1],width:c.weight+2}):null}),new C.ZP({stroke:new W.Z(c.stroke?c.stroke:{color:t.style.useSelectedStyle?ce:(0,S.qq)(t.style&&c.color||"#0000FF",o()(c.opacity)?1:c.opacity),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),image:r?le:null,fill:new A.Z(c.fill?c.fill:{color:(0,S.qq)(t.style&&c.fillColor||"#0000FF",o()(c.fillOpacity)?1:c.fillOpacity)})})],f=t.style.useSelectedStyle?fe({radius:c.weight,applyToPolygon:!0},{radius:c.weight,applyToPolygon:!0}):[];return[].concat(s,ne(f))}return i};function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Pe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Pe(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ce={white:[255,255,255,1],blue:[0,153,255,1],width:3},ke=function(e){if((0,B.isMarkerStyle)(e)){if(e.iconUrl)return z.standard.getIcon({style:e});var t=e.iconLibrary||"extra";if(z[t])return z[t].getIcon({style:e})}return null};(0,B.registerGeometryFunctions)("centerPoint",(function(e){var t=e.getGeometry(),r=e.getProperties().isGeodesic,n=void 0!==r&&r,o=t.getExtent(),i=n?(0,w.qg)(o):t.getCenter&&t.getCenter()||[o[2]-o[0],o[3]-o[1]];return new G.Z(i)}),"Point"),(0,B.registerGeometryFunctions)("lineToArc",(function(e){var t=e.getGeometry().getType();if("LineString"===t||"MultiPoint"===t){var r=e.getGeometry().getCoordinates();return r=(0,P.transformLineToArcs)(r.map((function(e){var t=(0,P.reproject)(e,"EPSG:3857","EPSG:4326");return[t.x,t.y]}))),new q.Z(r.map((function(e){var t=(0,P.reproject)(e,"EPSG:4326","EPSG:3857");return[t.x,t.y]})))}return e.getGeometry()}),"LineString"),(0,B.registerGeometryFunctions)("startPoint",(function(e){var t=e.getGeometry(),r="Polygon"===t.getType()?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new G.Z(y()(r)):null}),"Point"),(0,B.registerGeometryFunctions)("endPoint",(function(e){var t=e.getGeometry(),r=t.getType(),n="Polygon"===r?t.getCoordinates()[0]:t.getCoordinates();return new G.Z(n.length>3?n[n.length-("Polygon"===r?2:1)]:b()(n))}),"Point");var Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.geometry?function(t){var r=e.geometry||"centerPoint";return B.geometryFunctions[r].func(t)}:function(e){return e.getGeometry()}},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!o()(e.filtering)||e.filtering}(t,e);if(n){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,B.isStrokeStyle)(e)?new W.Z(e.stroke&&O()(e.stroke)?e.stroke:{color:e.highlight?Ce.blue:(0,S.qq)(e.color||e.stroke||"#0000FF",o()(e.opacity)?1:e.opacity),width:o()(e.weight)?1:e.weight,lineDash:l()(e.dashArray)&&a()(e.dashArray).split(" ")||s()(e.dashArray)&&e.dashArray||[0],lineCap:e.lineCap||"round",lineJoin:e.lineJoin||"round",lineDashOffset:e.dashOffset||0}):null}(t),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,B.isFillStyle)(e)?new A.Z(e.fill&&O()(e.fill)?e.fill:{color:(0,S.qq)(e.fillColor||"#0000FF",o()(e.fillOpacity)?1:e.fillOpacity)}):null}(t),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,B.isCircleStyle)(e)?new U.Z({stroke:t,fill:r,radius:e.radius||5}):null}(t,i,c);if((0,B.isMarkerStyle)(t))return ke(t).map((function(e){return e.setGeometry(Ie(t)),e}));if((0,B.isSymbolStyle)(t))return z.standard.getIcon({style:t}).map((function(e){return e.setGeometry(Ie(t)),e}));var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return(0,B.isTextStyle)(e)?new I.Z({fill:r,offsetY:e.offsetY||-4*Math.sqrt(e.fontSize),rotation:e.textRotationDeg?e.textRotationDeg/180*Math.PI:0,textAlign:e.textAlign||"center",text:e.label||n&&n.properties&&n.properties.valueText||"New",font:e.font||"Arial",stroke:e.highlight?new W.Z({color:[255,255,255,1],width:2}):t,image:e.highlight?new U.Z({radius:5,fill:null,stroke:new W.Z({color:(0,S.qq)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null}):null}(t,i,c,e),p=t.zIndex;return[new C.ZP({geometry:Ie(t),image:u,text:f,stroke:!f&&!u&&i||null,fill:!f&&!u&&c||null,zIndex:p})].concat(e&&e.properties&&e.properties.canEdit&&!e.properties.isCircle?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{radius:3,fillColor:"green",applyToPolygon:!0},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{radius:3,fillColor:"red",applyToPolygon:!0},n=[];return g()(e,(function(e){return"startPoint"===e.geometry&&e.filtering}))||n.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,r=void 0===t?5:t,n=e.fillColor,o=void 0===n?"green":n,i=e.applyToPolygon,a=void 0!==i&&i;return new C.ZP({image:new U.Z({radius:r,fill:new A.Z({color:o})}),geometry:function(e){var t=e.getGeometry(),r=t.getType();if(!a&&"Polygon"===r)return null;var n="Polygon"===r?t.getCoordinates()[0]:t.getCoordinates();return n.length>1?new G.Z(y()(n)):null}})}(Te({},t))),g()(e,(function(e){return"endPoint"===e.geometry&&e.filtering}))||n.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,r=void 0===t?5:t,n=e.fillColor,o=void 0===n?"red":n,i=e.applyToPolygon,a=void 0!==i&&i;return new C.ZP({image:new U.Z({radius:r,fill:new A.Z({color:o})}),geometry:function(e){var t=e.getGeometry(),r=t.getType();if(!a&&"Polygon"===r)return null;var n="Polygon"===r?t.getCoordinates()[0]:t.getCoordinates();return new G.Z(n.length>3?n[n.length-("Polygon"===r?2:1)]:b()(n))}})}(Te({},r))),n}(r):[])}return new C.ZP({})},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=e.style;if(t){var r=s()(t)?t:p()(t);return r.reduce((function(t,n){return t.concat(Ae(e,n,r))}),[])}return[]},Me=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.style&&e.style.url)return Y().get(e.style.url).then((function(t){return H.Promise.all([(0,B.getStyleParser)(e.style.format),(0,B.getStyleParser)("openlayers")]).then((function(e){var r,n,o=(n=2,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(r,n)||function(e,t){if(e){if("string"==typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?je(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return i.readStyle(t.data).then((function(e){return a.writeStyle(e)}))}))}));if(e.style&&"geostyler"===e.style.format)return(0,B.getStyleParser)("openlayers").then((function(t){return t.writeStyle(e.style.styleObj||e.style.body,{features:e.features})}));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.styleName&&!e.overrideOLStyle)return function(t){if("marker"===e.styleName)switch(t.getGeometry().getType()){case"Point":case"MultiPoint":return he.marker(e)}return he[e.styleName](e)};var n,i=e.nativeStyle,a=r,c=0,l=e.style&&e.style.type||(e.features&&e.features[0]&&e.features[0].geometry?e.features[0].geometry.type:void 0);if("FeatureCollection"===l||e.features&&e.features[0]&&"FeatureCollection"===e.features[0].type)return function(r){var o=this||r;n=o.getGeometry()&&o.getGeometry().getType();var i=o&&o.getProperties();i&&i.isCircle&&(n="Circle",c=i.radius),i&&i.isText&&(n="Text",a=[i.valueText]);var l=(0,te.t8)("style.useSelectedStyle",i.canEdit,e);return Se(n,l,t,a,null,c)};if(e&&e.properties&&e.properties.isText)return n="Text",a=[e.properties.valueText],Se(n,e,t,a,null,c);if(e&&e.properties&&e.properties.isCircle)return n="Circle",c=e.properties.radius,Se(n,e,t,a,null,c);if(!i&&e.style){if(i={stroke:new W.Z(e.style.stroke?e.style.stroke:{color:(0,S.qq)(e.style&&e.style.color||"#0000FF",o()(e.style.opacity)?1:e.style.opacity),lineDash:e.style.lineDash||(e.style.highlight?[10]:[0]),width:e.style.weight||1}),fill:new A.Z(e.style.fill?e.style.fill:{color:(0,S.qq)(e.style&&e.style.fillColor||"#0000FF",o()(e.style.fillOpacity)?1:e.style.fillOpacity)})},"Point"!==l&&"MultiPoint"!==l||(i={image:new U.Z(ee()({},i,{radius:e.style.radius||5}))}),e.style.iconUrl||e.style.iconGlyph){var u=we(e);return function(t){var r=this||t;switch(n=r.getGeometry().getType()){case"Point":case"MultiPoint":return u;default:return Oe(r,e)}}}return i=new C.ZP(i),"GeometryCollection"===l?i=function(o){var i,a=this||o;n=a.getGeometry().getType();var c=a.get("textGeometriesIndexes")||[],l=a.get("circles")||[],u=a.get("textValues");return"GeometryCollection"===a.getGeometry().getType()?a.getGeometry().getGeometries().reduce((function(o,a,f){if(("Point"===(n=a.getType())||"MultiPoint"===n)&&c.length&&-1!==c.indexOf(f)){var p=Se("Text",e,t,[u[c.indexOf(f)]]);return p.setGeometry(a),o.concat([p])}if("Polygon"===n&&l.length&&-1!==l.indexOf(f)){var d=Se("Circle",e,t,[]);return d.setGeometry(a),o.concat([d])}if("Point"===n||"MultiPoint"===n)return i=we({style:ae(ae({},e.style[n]),{},{highlight:e.style.highlight})}),o.concat(i.map((function(e){return e.setGeometry(a),e})));var y=Se(n,e,t,r);return s()(y)?y.forEach((function(e){return e.setGeometry(a)})):y.setGeometry(a),o.concat([y])}),[]):"Point"===n||"MultiPoint"===n?(i=we({style:ae(ae({},e.style[n]),{},{highlight:e.style.highlight})}),t?new C.ZP({image:le,geometry:a.getGeometry()}):i.map((function(e){return e.setGeometry(a.getGeometry()),e}))):Se(n,e,t,r)}:("Circle"===l&&(c=e.features&&e.features.length&&e.features[0].properties&&e.features[0].properties.radius||10),Se(l,e,t,r,i,c))}return i||Oe}(e,t,r);return e.asPromise?new H.Promise((function(e){e(n)})):n},De=we,_e=fe,Re=be},771335:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),c=r(805346),l=r(913718),u=r(314068);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return t=m(t),function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(e,y()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:String(t)}var O={FORMAT:o().createElement(c.Z,{msgId:"map.errorFormat"}),SIZE:o().createElement(c.Z,{msgId:"map.errorSize"})},w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return g(b(e=d(this,t,[].concat(n))),"state",{}),g(b(e),"getThumbnailUrl",(function(){return e.props.map&&e.props.map.newThumbnail&&"NODATA"!==e.props.map.newThumbnail?decodeURIComponent(e.props.map.newThumbnail):null})),g(b(e),"getDataUri",(function(e,t){var r=e;if(r&&r.length>0){var n=r[0],o=new FileReader;return o.onload=function(e){return t(e.target.result,n.size)},o.readAsDataURL(n)}return t(null)})),g(b(e),"getThumbnailDataUri",(function(t){e.getDataUri(e.files,t)})),g(b(e),"generateUUID",(function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)}))})),g(b(e),"processUpdateThumbnail",(function(t,r,n){var o=e.generateUUID(),i="THUMBNAIL";!e.props.map||n||!e.props.map.thumbnail||e.refs.imgThumbnail||r||e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!0),e.props.map&&!n&&e.props.map.newThumbnail&&!e.refs.imgThumbnail&&r&&(e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,r,o,n,i,e.props.map.id)),e.props.map.newThumbnail&&n&&e.refs.imgThumbnail&&(e.deleteThumbnail(e.props.map.thumbnail,null,!1),e.props.onSaveAll(t,r,o,n,i,e.props.map.id)),e.props.map.newThumbnail&&!n&&e.refs.imgThumbnail&&e.props.onSaveAll(t,r,o,n,i,e.props.map.id),e.props.map.newThumbnail||n||e.refs.imgThumbnail||(e.props.map.thumbnail&&r&&e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,r,o,n,i,e.props.map.id))})),g(b(e),"updateThumbnail",(function(t,r){e.props.map.errors&&e.props.map.errors.length||e.getDataUri(e.files,(function(n){return e.processUpdateThumbnail(t,r,n),n}))})),g(b(e),"deleteThumbnail",(function(t,r){if(t&&-1!==t.indexOf("geostore")){var n=(0,l.C)(t);n&&e.props.onDeleteThumbnail(n,r)}})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),r=t,(n=[{key:"renderThumbnailErrors",value:function(){return this.props.thumbnailErrors&&this.props.thumbnailErrors.length>0?o().createElement("div",{className:"dropzone-errorBox alert-danger"},o().createElement("p",null,o().createElement(c.Z,{msgId:"map.error"})),this.props.thumbnailErrors.map((function(e){return o().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},O[e])}))):null}},{key:"render",value:function(){var e=this;return o().createElement(u.Z,f({ref:"imgThumbnail",thumbnail:this.getThumbnailUrl(),className:null,checkOriginalFileSize:this.props.checkOriginalFileSize,dropZoneProps:{className:"dropzone alert alert-info",rejectClassName:"alert-danger"},loading:this.props.loading,maxFileSize:this.props.maxFileSize,style:{pointerEvents:this.props.map.saving?"none":"auto"},label:this.props.withLabel&&o().createElement("label",{className:"control-label"},o().createElement(c.Z,{msgId:"map.thumbnail"})),:!0,message:o().createElement(o().Fragment,null,this.props.message,o().createElement("br",null),this.props.suggestion),error:this.renderThumbnailErrors(),onUpdate:function(t,r){var n;e.props.onError([],e.props.map.id),e.files=r,e.props.onUpdate(t,null==r||null===(n=r[0])||void 0===n?void 0:n.preview)},onError:function(t,r){e.props.onError(t,e.props.map.id),e.files=r,e.props.onUpdate(null,null)},onRemove:function(){e.files=null,e.props.onUpdate(null,null),e.props.onRemoveThumbnail(),e.props.onError([],e.props.map.id)}},this.props.thumbnailOptions&&{thumbnailOptions:this.props.thumbnailOptions}))}}])&&p(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o().Component);g(w,"propTypes",{glyphiconRemove:a().string,style:a().object,thumbnailErrors:a().array,loading:a().bool,withLabel:a().bool,map:a().object,maxFileSize:a().number,thumbnailOptions:a().object,onDrop:a().func,onError:a().func,onUpdate:a().func,onSaveAll:a().func,onCreateThumbnail:a().func,onDeleteThumbnail:a().func,onRemoveThumbnail:a().func,message:a().oneOfType([a().string,a().element]),suggestion:a().oneOfType([a().string,a().element]),checkOriginalFileSize:a().bool}),g(w,"contextTypes",{messages:a().object}),g(w,"defaultProps",{loading:!1,withLabel:!0,glyphiconRemove:"remove-circle",maxFileSize:5e5,onDrop:function(){},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemoveThumbnail:function(){},onCreateThumbnail:function(){},onDeleteThumbnail:function(){},message:o().createElement(c.Z,{msgId:"map.message"}),suggestion:o().createElement(c.Z,{msgId:"map.suggestion"}),map:{},thumbnailErrors:[],thumbnailOptions:null});const S=w},38560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(480681),o=r(124852),i=r.n(o),a=r(294184),c=r.n(a),l=["disabled","className","onClick"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}var s=r(815135);const f=(p=n.Button,i().forwardRef((function(e,t){var r=e.disabled,n=e.className,o=e.onClick,a=void 0===o?function(){}:o,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return i().createElement(p,u({ref:t,className:r?c()("disabled",n):n,onClick:function(){r||a.apply(void 0,arguments)}},s),s.children)})));var p;(0,s.Z)(n.Button)},638445:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(124852),o=r.n(n),i=r(480681),a=r(697111),c=r(993451),l=["debounceTime"],u=["fallbackValue"];function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var y=(0,a.Z)("onChange","value")((0,c.Z)("placeholder")((function(e){e.debounceTime;var t=d(e,l);return o().createElement(i.FormControl,p({},t,{onChange:function(e){return t.onChange(e.target.value)}}))})));const m=function(e){var t,r,i=e.fallbackValue,a=d(e,u),c=s((0,n.useState)(null!==(t=a.value)&&void 0!==t?t:i),2),l=c[0],f=c[1],m=s((0,n.useState)(null!==(r=a.value)&&void 0!==r?r:i),2),b=m[0],v=m[1],g=s((0,n.useState)(0),2),h=g[0],O=g[1],w=(0,n.useRef)(!1),S=(0,n.useRef)();function P(e){var t=!isNaN(parseFloat(e));return t&&void 0!==a.min&&e<a.min?{changed:!0,value:a.min}:t&&void 0!==a.max&&e>a.max?{changed:!0,value:a.max}:{changed:!1,value:t?parseFloat(e):e}}return S.current=l,(0,n.useEffect)((function(){var e;S.current!==a.value&&f(null!==(e=a.value)&&void 0!==e?e:i)}),[a.value]),o().createElement(y,p({},a,{key:h,value:l,onChange:function(e){if(w.current){var t=e,r=!0;if("number"===a.type){var n=P(t).changed;(""===t||n)&&(r=!1)}f(t),r&&a.onChange(t)}},onChangeNoDebounce:v,onBlur:function(){if("number"===a.type)if(""===b)a.onChange(void 0),f(i),O((function(e){return e+1}));else{var e=P(b).value;a.onChange(e),O((function(e){return e+1})),f(e)}w.current=!1},onFocus:function(){w.current=!0}}))}},487320:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i),c=r(125376),l=r(743129),u=r(480681),s=r(352595);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){var t,r,i=e.text,a=e.placement,c=e.bsStyle,l=e.left,p=e.top,d=e.title,y=e.glyph,m=e.id,b=(0,n.useRef)(),v=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],h=v[1];return o().createElement("span",{className:"mapstore-info-popover",onMouseLeave:function(){return h(!1)}},o().createElement(u.Glyphicon,{onMouseEnter:function(){h(!0)},ref:function(e){b.current=e},className:"text-".concat(c),glyph:y}),o().createElement(s.Z,{placement:a,show:g,target:function(){return b.current}},o().createElement(u.Popover,{id:m,placement:a,positionLeft:l,positionTop:p,title:d},o().createElement("div",{style:{display:"flex"}},i))))};p.propTypes={id:a().string,title:a().string,text:a().string,glyph:a().string,bsStyle:a().string,placement:a().string,left:a().number,top:a().number,trigger:a().oneOfType([a().array,a().bool])},p.defaultProps={id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info"};const d=p;var y=r(615402);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){var n;return n=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==m(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=e.id,r=e.label,n=e.infoFormat,i=e.availableInfoFormat,a=e.popoverMessage,c=e.disabled,s=e.onInfoFormatChange,f=e.selectProps,p=Object.keys(i).reduce((function(e,t){return Object.keys(e).map((function(t){return e[t]})).some((function(e){return e===i[t]}))?e:g(g({},e),{},h({},t,i[t]))}),{}),m=Object.keys(p).map((function(e){return{value:p[e],label:e}})),v=o().createElement(o().Fragment,null,"  ",a&&o().createElement(d,{text:o().createElement(y.Z,{msgId:a})}),o().createElement(l.ZP,b({},f,{id:t,value:n,clearable:!1,disabled:c,options:m,onChange:function(e){return s(null==e?void 0:e.value)}})));return r?o().createElement(u.FormGroup,{bsSize:"small"},o().createElement(u.ControlLabel,null,r),v):v}O.propTypes={id:a().string,label:a().oneOfType([a().func,a().string,a().object]),availableInfoFormat:a().object,infoFormat:a().string,popoverMessage:a().string,onInfoFormatChange:a().func,disabled:a().bool,selectProps:a().object},O.defaultProps={id:"mapstore-feature-format-selector",availableInfoFormat:(0,c.eq)(),infoFormat:(0,c.wR)(),popoverMessage:"",onInfoFormatChange:function(){},selectProps:{}};const w=O},532425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=function(e){return e>100?"full":e>40?"medium":"small"},f=function(e){var t=e.size,r=e.style,n=void 0===r?{}:r,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:u({width:t,height:t,overflow:"hidden"},n)},!i&&a().createElement("div",{className:"mapstore-".concat(s(t),"-size-loader")}))};f.propTypes={size:o().number,className:o().string,style:o().object};const p=f},843614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(727418),o=r.n(n),i=r(480681),a=r(461365);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:String(t)}function s(e,t,r){return t=p(t),function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),r=t,(n=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&l(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Modal);const m=o()((0,a.Z)(y),{Body:i.Modal.Body,Dialog:i.Modal.Dialog,Footer:i.Modal.Footer,Header:i.Modal.Header,Title:i.Modal.Title})},1036:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(618446),o=r.n(n);const i=(0,r(867076).shouldUpdate)((function(e,t){return!o()(e.start,t.start)||e.disabled!==t.disabled}))(r(185552))},61018:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(124852),o=r.n(n),i=r(807472),a=r(480681);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var l=["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const p=function(e){var t=e.show,r=e.style,n=void 0===r?{}:r,c=e.modal,s=e.draggable,p=void 0!==s&&s,d=e.closeGlyph,y=void 0===d?"1-close":d,m=e.closable,b=void 0===m||m,v=e.onClose,g=void 0===v?function(){}:v,h=e.title,O=e.header,w=e.footer,S=e.children,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return t?o().createElement(i.Z,u({modal:c,onClickOut:b&&c?function(){return g()}:null,style:f(f({},n),{},{display:t?"block":"none"}),draggable:p},P),o().createElement("span",{role:"header"},h||O||o().createElement("span",null,""),b?o().createElement("button",{onClick:function(){return g()},className:"settings-panel-close close"},o().createElement(a.Glyphicon,{glyph:y})):null),o().createElement("span",{role:"body"},S),w?o().createElement("span",{role:"footer"},w):null):null}},212610:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n),i=r(867076),a=r(957557),c=r.n(a),l=r(815135);const u=(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,r=e.noTooltipWhenDisabled;return!(void 0!==r&&r&&t)}),l.Z,(function(e){return function(t){return o().createElement(e,c()(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},625311:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(124852),o=r.n(n),i=r(590937),a=r(867076),c=["connectDragSource","connectDragPreview","connectDropTarget","isDragging","isOver"];function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var f={beginDrag:function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==l(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}};const p=(0,a.branch)((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isDraggable}),(0,a.compose)((0,i.Ej)("row",f,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging(),draggingItem:t.getItem()||null}})),(0,i.GR)("row",{drop:function(e,t){var r=t.getItem();r.sortId!==e.sortId&&e.onSort(e.sortId,r.sortId,{id:e.id,containerId:e.containerId},{id:r.id,containerId:r.containerId})}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})),(function(e){return function(t){var r=t.connectDragSource,n=t.connectDragPreview,i=t.connectDropTarget,a=t.isDragging,l=t.isOver,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,c),f=s.draggingItem&&s.draggingItem.sortId<s.sortId,p=s.draggingItem&&s.draggingItem.containerId===s.containerId,d=p&&a?" ms-dragging":"",y=p&&l?" ms-over":"",m=p&&f?" ms-above":" ms-below";return n(i(o().createElement("div",{className:"ms-dragg".concat(d).concat(y," ").concat(m)},o().createElement("div",null,o().createElement(e,u({},s,{connectDragSource:r,isDragging:a,isOver:l,onDrop:function(e){return e.stopPropagation()}}))))))}})))},245567:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(124852),o=r.n(n),i=r(867076);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var c=["onSort","isDraggable","items","containerId"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){var n,o,i,c;n=e,o=t,i=r[t],c=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==a(c)?c:String(c))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const f=(0,i.compose)((0,i.branch)((function(e){var t=e.isDraggable;return void 0===t||t}),(function(e){return function(t){var r=t.onSort,n=t.isDraggable,i=t.items,a=void 0===i?[]:i,u=t.containerId,f=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,c),p=a.map((function(e,t){return s(s({},e),{},{onSort:r,isDraggable:n,sortId:t,key:e.id||t,containerId:u})}));return o().createElement(e,l({},s(s({},f),{},{isDraggable:n}),{items:p}))}})))},617252:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(124852),o=r.n(n),i=r(867076),a=r(675263),c=r.n(a),l=r(957557),u=r.n(l),s=r(480681),f=r(950966);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function y(e,t,r){return t=b(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}const O=(0,i.branch)((function(e){return e.popover}),(function(e){var t;return t=function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),y(this,r,arguments)}var n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(r,t),n=r,(a=[{key:"renderPopover",value:function(){return o().createElement(s.Popover,u()(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=(0,i.toClass)(e);return o().createElement(t,u()(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return o().createElement("span",null,o().createElement(f.Z,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&d(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),r}(o().Component),g(t,"propTypes",{popover:c().object}),g(t,"defaultProps",{popover:{trigger:!0}}),t}))},80717:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(124852),o=r.n(n),i=r(819081),a=r.n(i),c=r(480681),l=r(90085),u=["visible","Element","renderButton"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,r=void 0===t?[]:t,n=e.btnGroupProps,i=void 0===n?{}:n,f=e.btnDefaultProps,p=void 0===f?{}:f,d=e.transitionProps,y=void 0===d?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:d,m=function(){return r.map((function(e,t){var r=e.visible,n=void 0===r||r,i=e.Element,a=e.renderButton,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,u);return n?a||i&&o().createElement(i,s({key:c.key||t},c))||o().createElement(l.Z,s({key:c.key||t},p,c)):null}))};return o().createElement(c.ButtonGroup,i,y?o().createElement(a(),y,m()):m())}},90085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(124852),o=r.n(n),i=r(867076),a=r(805346),c=r(957557),l=r.n(c),u=r(480681),s=r(532425),f=r(212610),p=r(617252),d=r(38560),y=["glyph","loading","text","textId","glyphClassName","loaderProps","children"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}const b=(0,i.compose)(f.Z,p.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,r=e.loading,n=e.text,i=void 0===n?"":n,c=e.textId,f=e.glyphClassName,p=void 0===f?"":f,b=e.loaderProps,v=void 0===b?{}:b,g=e.children,h=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,y);return o().createElement(d.Z,l()(h,["pullRight","confirmNo","confirmYes"]),t&&!r?o().createElement(u.Glyphicon,{glyph:t,className:p}):null,c?o().createElement(a.Z,{msgId:c}):i,r?o().createElement(s.Z,m({className:"ms-loader".concat(h.bsStyle&&" ms-loader-"+h.bsStyle||"").concat(h.bsSize&&" ms-loader-"+h.bsSize||"")},v)):null,g)}))},808224:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(124852),o=r.n(n),i=r(480681),a=r(830049);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p={Line:function(e){var t=e.symbolizer,r=0===t.width?1:t.width>7?7:t.width;return o().createElement("svg",{viewBox:"0 0 50 50"},o().createElement("path",{d:"M ".concat(r," ").concat(r," L ").concat(50-r," ").concat(50-r),stroke:t.color,strokeWidth:r,strokeDasharray:t.dasharray?"18 18":null,strokeLinecap:t.cap,strokeLinejoin:t.join,strokeOpacity:t.opacity}))},Fill:function(e){var t=e.symbolizer;return o().createElement("svg",{viewBox:"0 0 50 50"},o().createElement("path",{d:"M 1 1 L 1 49 L 49 49 L 49 1 L 1 1",fill:t.color,opacity:t.fillOpacity,stroke:t.outlineColor,strokeWidth:t.outlineWidth,strokeOpacity:t.outlineOpacity}))},Circle:function(e){var t=e.symbolizer;return o().createElement("svg",{viewBox:"0 0 50 50"},o().createElement("circle",{cx:"25",cy:"25",r:"25",fill:t.color,opacity:t.opacity,stroke:t.outlineColor,strokeWidth:t.outlineWidth,strokeOpacity:t.outlineOpacity}))},Mark:function(e){var t=e.symbolizer,r=s((0,n.useState)(null),2),i=r[0],c=r[1],l=(0,n.useRef)();(0,n.useEffect)((function(){return l.current=!0,function(){l.current=!1}}),[]),(0,n.useEffect)((function(){(0,a.$O)(t).then((function(e){l.current&&c(e)}))}),[t]);var u=t.rotate,f=t.opacity,p={transform:"rotate(".concat(u,"deg)"),opacity:f};return o().createElement("svg",{viewBox:"0 0 50 50",style:p},i&&o().createElement("image",{href:i.src,height:"50",width:"50"}))},Icon:function(e){var t=e.symbolizer,r=s((0,n.useState)(null),2),a=r[0],c=r[1],l=(0,n.useRef)();return(0,n.useEffect)((function(){return l.current=!0,function(){l.current=!1}}),[]),(0,n.useEffect)((function(){if(null!=t&&t.image){var e=new Image;e.onload=function(){l.current&&c(e)},e.onerror=function(){l.current&&c(null)},e.src=t.image}}),[null==t?void 0:t.image]),a?o().createElement("svg",{viewBox:"0 0 50 50",style:{transform:"rotate(".concat(t.rotate,"deg)"),opacity:t.opacity}},o().createElement("image",{href:a.src,height:"50",width:"50"})):o().createElement(i.Glyphicon,{glyph:"point"})},Model:function(){return o().createElement(i.Glyphicon,{glyph:"model"})},Text:function(e){var t,r=e.symbolizer;return o().createElement("svg",{viewBox:"0 0 16 16"},o().createElement("text",{x:"8",y:"8","text-anchor":"middle","alignment-baseline":"middle",style:u({fontSize:r.size<14?r.size:14,fill:r.color,fontFamily:null==r||null===(t=r.font)||void 0===t?void 0:t.join(", "),fontStyle:r.fontStyle,fontWeight:r.fontWeight},r.haloWidth&&r.haloColor&&{paintOrder:"stroke",stroke:r.haloColor,strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"})},"T"))}};const d=function(e){var t,r=e.rule,n=(0,a.mL)((null==r||null===(t=r.symbolizers)||void 0===t?void 0:t[0])||{},{properties:{}}),i=p[n.kind];return i?o().createElement("div",{className:"ms-rule-legend-icon"},o().createElement(i,{symbolizer:n})):null}},589919:(e,t,r)=>{"use strict";r.d(t,{hP:()=>u});var n=r(984596),o=r.n(n),i=r(49977),a=r.n(i);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.startWith.apply(e,function(e){if(Array.isArray(e))return c(e)}(t=r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},u=function(e,t,r){return function(n){return(r?l(n,o()(e)).catch(r):l(n,o()(e))).concat(a().Observable.from(o()(t)))}}},159817:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$a});var n={};r.r(n),r.d(n,{cleanUpEmptyStoryContainers:()=>ve,closeShareOnGeostoryChangeMode:()=>Se,editMediaForBackgroundEpic:()=>ye,editWebPageComponent:()=>fe,exportGeostory:()=>ke,handlePendingGeoStoryChanges:()=>Pe,hideCarouselItemsOnUpdateCurrentPage:()=>Oe,importGeostory:()=>Ie,inlineEditorEditMap:()=>we,loadGeostoryEpic:()=>me,loadStoryOnHistoryPop:()=>Te,openMediaEditorForNewMedia:()=>le,openWebPageComponentCreator:()=>se,reloadGeoStoryOnLoginLogout:()=>be,saveGeoStoryResource:()=>pe,scrollOnLoad:()=>Ee,scrollSideBar:()=>Ce,scrollToContentEpic:()=>de,setFocusOnMapEditing:()=>he,sortContentEpic:()=>ge,urlUpdateOnScroll:()=>je});var o=r(124852),i=r.n(o),a=r(171703),c=r(22222),l=r(375933),u=r.n(l),s=r(322843),f=r(192579),p=r(86638),d=r(531398),y=r(134990),m=r(93848),b=r(49977),v=r(91175),g=r.n(v),h=r(807654),O=r.n(h),w=r(747037),S=r.n(w),P=r(414293),j=r.n(P),E=r(595825),T=r.n(E),C=r(158748),k=r.n(C),I=r(227361),A=r.n(I),x=r(701469),M=r.n(x),D=r(441609),_=r.n(D),R=r(275982),Z=r(423570),F=r.n(Z),L=r(375875),N=r.n(L),z=r(291312),B=r(782904),U=r(197395),W=r(263516),G=r(274621),q=r(866113),H=r(107501),V=r(589919),Y=r(988753),K=r(727693),Q=r(282385);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}var J=["status","statusText","data","message"],$=["data","isStatic"];function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=X(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==X(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function oe(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ce=function(e,t,r){return function(n){return n.ofType(m.AQ).switchMap((function(n){var o=n.resource,i=void 0===o?{}:o,a=[],c=e.getState(),l=(0,H.hb)(c),u=(0,H.IQ)(c),s=g()((0,q.jq)(c).filter((function(e){return e.data&&(u!==K.r.GEOSTORY&&e.data.id||e.id)===i.id}))),p=i.id;s?p=s.id:_()(i)?a=[].concat(oe(a),[(0,y.Od)("".concat(t)),(0,m.Cp)()]):(p=i.id||F()(),a=[].concat(oe(a),[(0,y.rp)(p,l,i.data?i.data:i)]));var d=l===f.Tr.MAP?{resourceId:p,type:l,map:void 0}:{resourceId:p,type:l},v=[(0,y.Vx)("".concat(t),d,"merge")];return r===f.ID.CAROUSEL&&v.push((0,y.Vx)("".concat(t,".map"),{mapInfoControl:!0},"merge")),a=[].concat(oe(a),v,[(0,m.Cp)()]),b.Observable.from(a)}))}},le=function(e,t){return e.ofType(y.D7).filter((function(e){var t=e.element,r=void 0===t?{}:t;return r.type===f.bT.MEDIA||(0,f.lt)(r)})).switchMap((function(r){var n=r.path,o=r.element,i="";(0,f.lt)(o)&&"sections"===n&&(i=".contents[0].contents[0]");var a="".concat(n,'[{"id":"').concat(o.id,'"}]').concat(i),c=(0,q.X6)(t.getState());return b.Observable.of((0,m.$Z)("geostory",c)).merge(e.let(ce(t,a)),e.ofType(m.B8).switchMap((function(){return b.Observable.of((0,y.Od)(a))})).takeUntil(e.ofType(y.wb))).takeUntil(e.ofType(m.wd))}))},ue=function(e){return function(t){return t.ofType(y.Hb).switchMap((function(t){var r=t.src;return b.Observable.of((0,y.Vx)("".concat(e),{src:r,editURL:!1},"merge"))}))}},se=function(e){return e.ofType(y.D7).filter((function(e){var t=e.element,r=void 0===t?{}:t;return r.type===f.bT.WEBPAGE&&!1!==r.editURL||(0,f.NC)(r)})).switchMap((function(t){var r=t.path,n=t.element,o="";(0,f.NC)(n)&&"sections"===r&&(o=".contents[0].contents[0]");var i="".concat(r,'[{"id":"').concat(n.id,'"}]').concat(o);return b.Observable.of((0,y.Vx)(i,{editURL:!0},"merge")).merge(e.let(ue(i))).takeUntil(e.ofType(y.cc))}))},fe=function(e){return e.ofType(y.cc).switchMap((function(t){var r=t.path;return b.Observable.of((0,y.Vx)(r,{editURL:!0},"merge")).merge(e.let(ue(r))).takeUntil(e.ofType(y.D7))}))},pe=function(e){return e.ofType(y.LE).exhaustMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resource,r=e.delay,n=void 0===r?1e3:r;return(t.id?(0,z.id)(t):(0,z.SN)(t)).switchMap((function(e){return b.Observable.of((0,y.GD)(e),(0,y.g5)(f.ZX.SHOW_SAVE,!1),t.id?(0,y.wJ)(e):(0,R.VF)("/geostory/".concat(e))).merge(b.Observable.of((0,U.$Z)({id:"STORY_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(t.id?0:n))})).let((0,V.hP)((0,y.YP)(!0,"loading"),(0,y.YP)(!1,"loading"))).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,r=e.statusText,n=e.data,o=e.message,i=ne(e,J);return b.Observable.of((0,y.y6)(t?{status:t,statusText:r,data:n}:o||i),(0,y.YP)(!1,"loading"))}))}))},de=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(y.D7).switchMap((function(e){var t=e.path,n=e.element;return b.Observable.of(n).switchMap((function(){if(document.getElementById(n.id)){var e=(0,f.u0)(t).sectionId,o=(0,q.I0)(e)(r())?e:n.id;return(0,f.M1)(o,{behavior:"auto",block:"center"}),b.Observable.empty()}throw new Error("Item not mounted yet")})).retryWhen((function(e){return e.delay(200).take(10)}))}))},ye=function(e,t){return e.ofType(m.wd).switchMap((function(r){var n=r.path,o=r.owner,i=r.sectionType,a=(0,q.vv)(n)(t.getState()),c=(0,q.Tr)(a)(t.getState());return b.Observable.of((0,H.hb)(t.getState())).filter((function(e){return c&&c.type!==e})).map((function(){return(0,m.y5)(c.type)})).merge(b.Observable.of((0,m.$Z)(o,(0,q.X6)(t.getState())),(0,m.Gh)(a),(0,m.Tk)(i===f.ID.CAROUSEL?["image","video"]:[])).merge(e.let(ce(t,n,i)).takeUntil(e.ofType(m.B8,y.D7))))}))},me=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(y.XH).switchMap((function(e){var t=e.id;return b.Observable.defer((function(){return t&&O()(parseInt(t,10))?N().get("configs/".concat(t,".json")).then((function(e){var t=e.data,r=t.sections,n=M()(r)&&r.map((function(e){return re(re({},e),{},{id:F()()})}));return{data:n.length?re(re({},t),{},{sections:n}):t,isStatic:!0,canEdit:!0}})):(0,z.RX)(t)})).do((function(e){if(!e.data)throw Error("Wrong data format");return!0})).switchMap((function(e){var r=e.data,o=e.isStatic,i=void 0!==o&&o,a=ne(e,$),c=n(),l=(0,G.qg)(c),u=(0,G.jl)(c),s=S()(r)?JSON.parse(r):r;if(!u&&O()(parseInt(t,10)))return b.Observable.of((0,y.Ct)({status:403}));var p=(0,q.eK)(c)===f.nl.EDIT;return b.Observable.from([].concat(oe(i||p?[(0,y.D_)(a&&a.canEdit||l)]:[]),[(0,y.OS)(t),(0,y.K0)(s),(0,y.DF)(a)]))})).let((0,V.hP)((0,y.YP)(!0,"loading"),(0,y.YP)(!1,"loading"),(function(e){var t=(0,f.of)(),r=t+".errors.loading.unknownError";return 403===e.status?(r=t+".errors.loading.pleaseLogin",((0,G.jl)(n())||(0,q.JM)(n()))&&(r=t+".errors.loading.geostoryNotAccessible")):404===e.status?r=t+".errors.loading.geostoryDoesNotExist":j()(e.status)&&(r=e.message),b.Observable.of((0,U.vU)({title:t+".errors.loading.title",message:r}),(0,y.K0)({}),(0,y.Ct)(re(re({},e),{},{messageId:r})))}))).startWith((0,y.K0)({}))}))},be=function(e){return e.ofType(y.XH).switchMap((function(t){var r=t.id;return e.ofType(W.XP,W.Nv).switchMap((function(){return b.Observable.of((0,y.wJ)(r)).delay(500)})).takeUntil(e.ofType(R.nk))}))},ve=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(y.Dq).switchMap((function(e){var t=e.path,r=(0,f.Ll)(t,(0,q.Kg)(n())),o=T()(r,"contents");if(o>0){var i=r.splice(0,o),a=(0,q.$F)(i.join("."))(n());if(a&&a.contents&&0===a.contents.length)return b.Observable.of((0,y.Od)(i.join(".")))}return b.Observable.empty()}))},ge=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(y.tP).switchMap((function(e){var t=e.source,r=e.target,o=e.position,i=n(),a=(0,q.$F)(t)(i);return b.Observable.from([(0,y.Od)(t),(0,y.IH)(r,o,a)])}))},he=function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(y.wb).filter((function(e){var t=e.path;return(void 0===t?"":t).endsWith("editMap")})).switchMap((function(e){var t=e.path,r=e.element,o=(0,f.ln)(t,(0,q.Kg)(n())),i=o.flatPath,a=o.path,c=1===i.length,l=c?i[0]:i.pop(),u=c?i[0]:i.shift(),s="background"===a[a.length-2],p=s&&"#".concat(u.id," .ms-section-background-container")||"#".concat(l.id);return(0,f.M1)(l.id),b.Observable.from([(0,y.$A)(r,l,p,s,t.replace(".editMap",""))])}))},Oe=function(e,t){var r=t.getState;return e.ofType(y.wb).filter((function(e){var t=e.path,r=e.element;return t&&t.endsWith("carouselToggle")&&r})).switchMap((function(e){var t=e.path,n=(0,f.u0)(t)||{},o=n.sectionId,i=n.contentId,a=(0,q.eB)(o)(r())||[];return i&&!_()(a)?b.Observable.from([(0,y.fD)(o,i)]).concat(b.Observable.of((0,y.Vx)(t,!1))):b.Observable.empty()}))},we=function(e,t){var r=t.getState;return e.ofType(Q.nr).filter((function(e){var t=e.owner,r=e.map;return"inlineEditor"===t&&!!r})).switchMap((function(){return e.ofType(Q.LE).switchMap((function(t){var n=t.map,o=(0,q.FW)(r()).path;return b.Observable.of((0,y.Vx)("".concat(o,".map"),n,"merge"),(0,y.Vx)("".concat(o,".editMap"),!1),(0,Q.Cp)()).takeUntil(e.ofType(Q.B8))}))}))},Se=function(e){return e.ofType(y.vb).switchMap((function(){return b.Observable.of((0,B.Xg)("share","enabled",!1))}))},Pe=function(e){return b.Observable.merge(e.ofType(y.XH).switchMap((function(){return e.ofType(y.Zf)}))).switchMap((function(){return e.ofType(y.D7,y.wb,y.Dq,y.mN,y.QK,y.km).take(1).switchMap((function(){return b.Observable.of((0,y.c0)(!0)).concat(e.ofType(y.si,R.nk,W.Nv).take(1).switchMap((function(){return b.Observable.of((0,y.c0)(!1))})))}))}))},je=function(e,t){var r=t.getState;return e.ofType(y.un).let(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(n){return n.withLatestFrom(e.startWith(t)).filter((function(e){var t=ee(e,2)[1];return r(t)})).map((function(e){return ee(e,1)[0]}))}}(e.ofType(y.Gx).map((function(e){return!e.status})).startWith(!0))).debounceTime(50).switchMap((function(e){var t=e.sectionId,n=e.columnId;if("edit"!==(0,q.eK)(r())&&(n||t)&&(0,q.bU)(r())){var o,i,a=A()(r(),"geostory.resource.id"),c=(0,f.NP)(window.location.href,null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.hash,a,t,n);c&&history.pushState(null,"",c)}return b.Observable.empty()}))},Ee=function(e){return e.ofType(y.ij).switchMap((function(e){var t,r,n,o=e.delay,i=void 0===o?2e3:o,a=null===(t=window)||void 0===t||null===(r=t.location)||void 0===r||null===(n=r.hash)||void 0===n?void 0:n.split("/");return b.Observable.of(a).do((function(){var e,t,r;null!==(e=window)&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&null!==(r=t.hash)&&void 0!==r&&r.includes("shared")?(0,f.M1)(a[7]||a[5],{block:"start",behavior:"auto"}):a.length>5?(0,f.M1)(a[6],{block:"start",behavior:"auto"}):5===a.length&&(0,f.M1)(a[4],{block:"start",behavior:"auto"})})).ignoreElements().startWith((0,y.WE)(!0)).concat(b.Observable.of((0,y.WE)(!1)).delay(i))}))},Te=function(e){return e.ofType(R.nk).switchMap((function(e){var t,r=e.payload;if((null==r||null===(t=r.location)||void 0===t?void 0:t.pathname.includes("/geostory/"))&&"POP"===r.action&&!r.isFirstRendering){var n,o=k()(null==r||null===(n=r.location)||void 0===n?void 0:n.pathname);return o.find((function(e){return"shared"===e}))?b.Observable.of((0,y.wJ)(o[2])).delay(500):b.Observable.of((0,y.wJ)(o[1])).delay(500)}return b.Observable.empty()}))},Ce=function(e,t){var r=t.getState;return e.ofType(y.un).filter((function(e){var t=e.columnId,n=e.sectionId;return!("edit"!==(0,q.eK)(r())||!t&&!n)})).debounceTime(50).switchMap((function(){return b.Observable.of(Array.from(document.querySelectorAll(".ms-geostory-builder .mapstore-side-card.ms-highlight")).pop()).filter((function(e){return!!e})).withLatestFrom(b.Observable.of(document.querySelector(".ms-geostory-builder .ms2-border-layout-body")).filter((function(e){return!!e}))).map((function(e){var t=ee(e,2),r=t[0],n=t[1];return function(){var e=r.getBoundingClientRect(),t=e.top,o=e.bottom,i=n.getBoundingClientRect(),a=i.top,c=i.bottom;t<a?n.scrollBy({top:t-a-10,behavior:"smooth"}):o>c&&n.scrollBy({top:o-c+10,behavior:"smooth"})}})).do((function(e){return window.requestAnimationFrame(e)})).ignoreElements()}))},ke=function(e){return e.ofType(y.U3).switchMap((function(e){var t=e.data,r=e.fileName;return b.Observable.of([JSON.stringify(re({},t)),r,"application/json"]).do((function(e){return Y.LR.apply(void 0,oe(e))})).map((function(){return(0,y.g5)("export",!1)}))}))},Ie=function(e){return e.ofType(y.aF).switchMap((function(e){var t=e.file;return b.Observable.defer((function(){return(0,Y.zr)(t[0]).then((function(e){return e}))})).switchMap((function(e){return b.Observable.of((0,y.K0)(e),(0,y.g5)("import",!1))})).catch((function(e){return b.Observable.of((0,U.vU)({title:"dashboard.errors.loading.title"}),(0,y.Ct)(re({},e)))}))}))},Ae=r(308316),xe=r(166190),Me=r(965539),De=r(496259),_e=r(867076),Re=r(828878);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ze(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}(0,_e.setObservableConfig)(Re.Z);var ze=(0,_e.compose)((0,_e.mapPropsStream)((function(e){var t=(0,_e.createEventHandler)(),r=t.handler,n=t.stream,o="EMPTY",i="EMPTY";return b.Observable.combineLatest(e,n.filter((function(e){var t=e.columnId,r=e.sectionId;return t&&o!==t?(o=t,!0):!(!r||i===r||(i=r,0))})).withLatestFrom(e.pluck("updateCurrentPage")).do((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return i&&i(o)})).ignoreElements().startWith({}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Le(Le({},t.reduce((function(){var e=arguments.length>1?arguments[1]:void 0;return Le(Le({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e)}),{})),{},{updateCurrentPage:r})}))}))),Be=r(982030),Ue=r(322762),We=r.n(Ue);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e,t,r){var n;return n=function(e,t){if("object"!=Ge(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ge(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,_e.setObservableConfig)(Re.Z);const Ye=(0,_e.compose)((0,_e.mapPropsStream)((function(e){var t=(0,_e.createEventHandler)(),r=t.handler,n=t.stream;return b.Observable.combineLatest(e,function(e,t){return t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{interceptorTime:e.interceptorTime,updateCurrentPage:e.updateCurrentPage}})).distinctUntilKeyChanged("interceptorTime").switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.interceptorTime,n=void 0===r?100:r,o=t.updateCurrentPage;return e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.id,n=t.visible,o=t.entry;return He(He({},e),{},Ve({},r,{visible:n,entry:o}))}),{}).debounceTime(n).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return We()(Object.keys(e),(function(t){return e[t].visible?A()(e[t],"entry.boundingClientRect.top"):1/0}))})).do((function(e){o&&o({sectionId:e})})).ignoreElements()}))}(n,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return He(He({},t.reduce((function(){var e=arguments.length>1?arguments[1]:void 0;return He(He({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e)}),{})),{},{onVisibilityChange:r})}))})));var Ke=r(675263),Qe=r.n(Ke),Xe=r(218291),Je=r(882017),$e=r(61018),et=r(480681),tt=r(38560),rt=r(805346),nt=r(399534),ot=(0,_e.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,r=void 0===t?"":t,n=e.viewHeight,o=e.size;return!r||!n||!o}),(0,Be.Z)((function(){return!0}),(function(){return{glyph:"code"}})));const it=(0,_e.compose)(ot)((function(e){var t=e.src,r=e.size,n=e.viewHeight;return i().createElement("div",{className:"ms-webpage-wrapper"},i().createElement("iframe",{src:t,height:"".concat((0,f.t4)(r,n),"px")}))}));var at=r(611847),ct=r(737275),lt=r(748759),ut=r(23279),st=r.n(ut);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=ft(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==ft(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mt=function(e){var t,r,n=e.id,a=e.onLoad,c=e.loading,l=e.debounceTime,u=e.children,s=e.loaderComponent,f=e.loaderStyle,p=(t=(0,lt.YD)(),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yt(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=p[0],y=p[1],m=(0,o.useRef)(null),b=s;return(0,o.useEffect)((function(){return m.current=st()((function(e){a(e)}),l),function(){m.current.cancel()}}),[]),(0,o.useEffect)((function(){y&&c&&m.current(n),!y&&c&&m.current.cancel()}),[y,c,n]),i().createElement("div",{ref:d,className:"ms-visibility-container"},c?b?i().createElement(b,{style:dt({},f)}):null:(0,o.cloneElement)(u,{inView:y}))};mt.propTypes={id:Qe().string,debounceTime:Qe().number,loading:Qe().bool,onLoad:Qe().func,loaderComponent:Qe().oneOfType([Qe().element,Qe().func])},mt.defaultProps={id:"",debounceTime:300,loading:!0,onLoad:function(){},loaderComponent:null};const bt=mt;var vt=r(532425);function gt(e){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(e)}function ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tt(n.key),n)}}function Ot(e,t,r){return t=St(t),function(e,t){if(t&&("object"===gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pt(e)}(e,wt()?Reflect.construct(t,r||[],St(e).constructor):t.apply(e,r))}function wt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wt=function(){return!!e})()}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jt(e,t)}function Et(e,t,r){return(t=Tt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tt(e){var t=function(e,t){if("object"!=gt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gt(t)?t:String(t)}var Ct=function(){return i().createElement("div",{className:"ms-media-loader"},i().createElement(vt.Z,{size:52}))},kt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Et(Pt(e=Ot(this,t,[].concat(n))),"state",{url:e.props.src||"",error:!1,loading:!0}),Et(Pt(e),"updateURL",(function(t){var r=t.target.value;e.setState({url:r})})),Et(Pt(e),"save",(function(){var t=e.state.url,r=!(0,at.K2)(t,(0,ct.u8)("GeoStoryValidIframeURLRegex"));e.setState({error:r}),r||e.props.onChange(t)})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props,r=t.onClose,n=t.editURL,o=this.state,a=o.url,c=o.error;return i().createElement(i().Fragment,null,i().createElement(nt.Z,null,i().createElement($e.Z,{modal:!0,show:n,onClickOut:function(e){return e.preventDefault()&&e.stopPropagation()},title:i().createElement(rt.Z,{msgId:"geostory.webPageCreator.title"}),onClose:r,id:"web-page-creator",footer:i().createElement(tt.Z,{bsSize:"small",onClick:this.save},i().createElement(rt.Z,{msgId:"geostory.webPageCreator.saveButton"}))},c&&i().createElement("div",{className:"dropzone-errorBox alert-danger"},i().createElement(rt.Z,{msgId:"geostory.webPageCreator.error"})),i().createElement(et.FormGroup,{controlId:"WEBPAGE_URL",validationState:c&&"error"},i().createElement(et.ControlLabel,null,i().createElement(rt.Z,{msgId:"geostory.webPageCreator.url.label"})),i().createElement(et.FormControl,{label:"URL",type:"text",value:a,onChange:this.updateURL,required:!0})))),this.props.lazy?i().createElement(bt,{key:this.props.id,id:this.props.id,debounceTime:this.props.debounceTime,loading:this.state.loading,onLoad:function(){return e.setState({loading:!1})},loaderComponent:Ct},i().createElement(it,this.props)):i().createElement(it,this.props))}}])&&ht(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(i().PureComponent);Et(kt,"propTypes",{editURL:Qe().bool,onClose:Qe().func,onChange:Qe().func,src:Qe().string,id:Qe().string,debounceTime:Qe().number,lazy:Qe().bool}),Et(kt,"defaultProps",{lazy:!0});var It=(0,_e.compose)((0,_e.withHandlers)({onClose:function(e){var t=e.update,r=void 0===t?function(){}:t;return function(){return r("editURL",!1,"merge")}}}))(kt);const At=(0,a.connect)(null,{onChange:y.YM})(It);var xt=["type"];function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mt.apply(this,arguments)}var Dt=(0,Xe.Z)()((0,o.lazy)((function(){return Promise.all([r.e(82515),r.e(60808),r.e(25972)]).then(r.bind(r,325972))}))),_t=function(e){var t=e.type;return i().createElement("div",{className:"ms-content ms-content-unknown"},'warning: unknown content type "'.concat(t,'"'))};const Rt=function(e){var t=e.type,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,xt),n=function(e){switch(e){case f.bT.TEXT:return Dt;case f.bT.MEDIA:case f.Tr.IMAGE:case f.Tr.MAP:case f.Tr.VIDEO:return Je.ZP;case f.bT.WEBPAGE:return At;default:return _t}}(t);return i().createElement(n,Mt({type:t},r))};var Zt=r(725288),Ft=r(80717),Lt=["onClick"];function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(r),!0).forEach((function(t){Vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yt(n.key),n)}}function Wt(e,t,r){return t=qt(t),function(e,t){if(t&&("object"===Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gt()?Reflect.construct(t,r||[],qt(e).constructor):t.apply(e,r))}function Gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gt=function(){return!!e})()}function qt(e){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qt(e)}function Ht(e,t){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ht(e,t)}function Vt(e,t,r){return(t=Yt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yt(e){var t=function(e,t){if("object"!=Nt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nt(t)?t:String(t)}var Kt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wt(this,t,arguments)}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ht(e,t)}(t,e),r=t,n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.trigger||e.containerWidth===this.props.containerWidth&&e.containerHeight===this.props.containerHeight||this.trigger.hide()}},{key:"render",value:function(){var e=this;return i().createElement(Zt.Z,{className:"add-bar",popoverClassName:"add-bar-popover",content:i().createElement(Ft.Z,{btnDefaultProps:{className:"square-button btn-tray"},buttons:this.props.buttons.map((function(t){var r=t.onClick,n=void 0===r?function(){}:r;return Bt(Bt({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,Lt)),{},{onClick:function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n.apply(void 0,r),e.trigger.hide(),r[0]&&r[0].preventDefault&&r[0].preventDefault()}})}))}),ref:function(t){t&&(e.trigger=t.trigger)},placement:"top"},i().createElement(tt.Z,{className:this.props.addButtonClassName},i().createElement(et.Glyphicon,{glyph:"plus"})))}}],n&&Ut(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(i().Component);Vt(Kt,"propTypes",{id:Qe().string,type:Qe().string,buttons:Qe().array,containerWidth:Qe().oneOfType([Qe().number,Qe().string]),containerHeight:Qe().oneOfType([Qe().number,Qe().string]),addButtonClassName:Qe().string}),Vt(Kt,"defaultProps",{id:"",type:"",buttons:[],containerWidth:0,containerHeight:0,addButtonClassName:""});const Qt=Kt;function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}var Jt=["id"];function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Xt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Xt(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rr(){return rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rr.apply(this,arguments)}const nr=function(e){var t=e.viewWidth,r=e.viewHeight,n=e.className,o=e.contentProps,a=void 0===o?{}:o,c=e.addButtons,l=void 0===c?[]:c,u=e.tools,s=void 0===u?[]:u,p=e.contents,d=void 0===p?[]:p,y=e.ContentComponent,m=void 0===y?Rt:y,b=e.mode,v=e.sectionType,g=e.editMedia,h=void 0===g?function(){}:g,O=e.editWebPage,w=void 0===O?function(){}:O,S=e.add,P=void 0===S?function(){}:S,j=e.update,E=void 0===j?function(){}:j,T=e.remove,C=void 0===T?function(){}:T,k=e.bubblingTextEditing,I=void 0===k?function(){}:k,A=e.storyTheme,x=e.sections,M=void 0===x?[]:x,D=e.storyFonts,_=e.innerRef;return i().createElement("div",{ref:_,className:n},d.reduce((function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,c=o.id,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(o,Jt),p=[i().createElement(m,rr({id:c,key:"".concat(c,"-content"),mode:b,viewWidth:t,sectionType:v,viewHeight:r,editMedia:function(e){for(var t=e.path,r=void 0===t?"":t,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return h.apply(void 0,[{path:'contents[{"id": "'.concat(c,'"}]')+r}].concat(o))},editWebPage:function(e){for(var t=e.path,r=void 0===t?"":t,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return w.apply(void 0,[{path:'contents[{"id": "'.concat(c,'"}]')+r}].concat(o))},add:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return P.apply(void 0,['contents[{"id": "'.concat(c,'"}].')+e].concat(r))},update:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return E.apply(void 0,['contents[{"id": "'.concat(c,'"}].')+e].concat(r))},remove:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return C.apply(void 0,['contents[{"id": "'.concat(c,'"}]')+(e?"."+e:"")].concat(r))}},a,u,{storyTheme:A,storyFonts:D,bubblingTextEditing:I,tools:s&&s[u.type],sections:M}))];return b===f.nl.EDIT&&l.length>0&&p.push(i().createElement(Qt,{key:"".concat(c,"-content-add-buttons"),containerWidth:t,containerHeight:r,buttons:l.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tr(tr({},e),{},{onClick:function(){return P("contents",c,e.template)}})}))})),[].concat(function(e){if(Array.isArray(e))return $t(e)}(e=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $t(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$t(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p)}),[]))};r(966337);var or=["onVisibilityChange","rootSelector"],ir=["intersectionObserverOptions","onVisibilityChange"];function ar(){return ar=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ar.apply(this,arguments)}function cr(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const lr=function(e){return(0,_e.compose)((0,_e.withHandlers)({onVisibilityChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.onVisibilityChange,n=void 0===r?function(){}:r;return function(e,r){return n({id:t,visible:e,entry:r})}}}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onVisibilityChange,r=(e.rootSelector,cr(e,or));return function(e){return function(n){var o=n.intersectionObserverOptions,a=void 0===o?{}:o,c=n.onVisibilityChange,l=cr(n,ir),u=t||c;return i().createElement(lt.df,ar({},r,a,{onChange:u}),(function(t){var r=t.inView,n=t.ref,o=t.entry;return i().createElement(e,ar({},l,{inView:r,inViewRef:n,inViewEntry:o}))}))}}}(e))};var ur=r(90085),sr=r(212610),fr=r(313311),pr=r.n(fr),dr=r(623560),yr=r.n(dr),mr=r(618446),br=r.n(mr);function vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var hr=(0,sr.Z)(et.DropdownButton);function Or(e){var t=e.value,r=e.options,n=void 0===r?[]:r,a=e.onSelect,c=void 0===a?function(){}:a,l=e.glyph,u=void 0===l?"":l,s=e.tooltipId,f=e.pullRight,p=void 0!==f&&f,d=e.className,y=void 0===d?"square-button-md no-border":d,m=e.disabled,b=e.noTooltipWhenDisabled,v=void 0!==b&&b,g=e.hideMenuItem,h=void 0===g?function(){return!1}:g,O=e.shouldClose,w=e.showSelectionInTitle,S=void 0===w||w,P=vr((0,o.useState)(!1),2),E=P[0],T=P[1],C=vr((0,o.useState)(!1),2),k=C[0],I=C[1],A=(pr()(n,(function(e){return br()(e.value,t)}))||{}).glyph;return(0,o.useEffect)((function(){m&&T(!1)}),[m]),i().createElement(hr,{noCaret:!0,open:E,noTooltipWhenDisabled:v,tooltipId:s,pullRight:p,className:y,disabled:m,title:i().createElement(et.Glyphicon,{glyph:S&&A||u}),onToggle:function(e,r,n){return k||"select"===(null==n?void 0:n.source)||O&&!O(t,r)?null:T(e)}},n.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(null==e?void 0:e.Component)||et.MenuItem;return h(t,e)?null:i().createElement(r,{key:e.value,selected:t,value:e.value,active:yr()(null==e?void 0:e.isActive)&&e.isActive(t)||!j()(t)&&t===e.value,onClick:null!=e&&e.Component?c:function(){return c(e.value)},onActive:function(e){return I(e)}},e.label)})))}var wr=r(312122),Sr=r(911766),Pr=r(513218),jr=r.n(Pr);function Er(e){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(e)}function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Er(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Er(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kr(){return kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kr.apply(this,arguments)}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ar=(0,wr.Z)(ur.Z),xr={primary:"btn-primary",default:"btn-default"},Mr=function(e){var t=e.editMap,r=void 0!==t&&t,n=e.align,o=e.sectionType,a=e.size,c=e.update,l=void 0===c?function(){}:c,u=e.filterOptions,s=e.pullRight,f=e.sizeType,p=function(e,t){var r,n,o="horizontal",i="",a=(r=e&&e.split(",")||[],n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(r,n)||function(e,t){if(e){if("string"==typeof e)return Ir(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ir(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],l=a[1],u=e,s="resize-horizontal";return t===o?(i="h-",u=c):"vertical"===t&&(i="v-",u=l,s="resize-vertical"),{sizeProp:function(e){return t?"".concat(t===o?e:c,",").concat("vertical"===t?e:l):e},pre:i,_size:u,glyph:s}}(a,f),d=p.pre,y=p._size,m=p.glyph,b=p.sizeProp;return i().createElement(Or,kr({value:y,noTooltipWhenDisabled:!0,disabled:r,glyph:m,pullRight:s||("right"===n||y==="".concat(d,"full")||y==="".concat(d,"large"))&&!o,tooltipId:"geostory.contentToolbar.contentSize",options:[{value:"".concat(d,"small"),glyph:"size-small",label:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.smallSizeLabel"})},{value:"".concat(d,"medium"),glyph:"size-medium",label:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.mediumSizeLabel"})},{value:"".concat(d,"large"),glyph:"size-large",label:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.largeSizeLabel"})},{value:"".concat(d,"full"),glyph:"size-extra-large",label:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.fullSizeLabel"})}].filter((function(e){return!u||u(e)})),onSelect:function(e){return l("size",b(e))}},f&&{showSelectionInTitle:!1}))},Dr=function(e){var t=e.editMap,r=void 0!==t&&t,n=e.align,o=e.sectionType,a=e.size,c=e.update,l=void 0===c?function(){}:c;return i().createElement(Or,{value:n,noTooltipWhenDisabled:!0,disabled:"full"===a||r,glyph:"align-center",pullRight:("right"===n||"full"===a||"large"===a)&&!o,tooltipId:"geostory.contentToolbar.contentAlign",options:[{value:"left",label:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.leftAlignLabel"}),glyph:"align-left"},{value:"center",label:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.centerAlignLabel"}),glyph:"align-center"},{value:"right",label:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.rightAlignLabel"}),glyph:"align-right"}],onSelect:function(e){return l("align",e)}})},_r=function(e){var t=e.editMap,r=void 0!==t&&t,n=e.theme,o=e.storyTheme,a=e.align,c=e.sectionType,l=e.update,u=void 0===l?function(){}:l,s=e.themeProps,f=e.size;return i().createElement(Or,{value:n,noTooltipWhenDisabled:!0,pullRight:("right"===a||"full"===f||"large"===f)&&!c,glyph:"dropper",tooltipId:"geostory.contentToolbar.contentTheme",disabled:r,shouldClose:function(e,t){var r,n;return jr()(e)&&"ms-color-picker-cover"!==(null==t||null===(r=t.target)||void 0===r||null===(n=r.getAttribute)||void 0===n?void 0:n.call(r,"class"))||S()(e)||void 0===e},hideMenuItem:function(e,t){return"custom"===(null==e?void 0:e.value)&&"custom"!==(null==t?void 0:t.value)},options:[{value:"",isActive:function(e){return void 0===e||""===e||jr()(e)&&(void 0===e.value||""===e.value)},label:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.defaultThemeLabel"})},{value:"bright",isActive:function(e){return"bright"===(null==e?void 0:e.value)||"bright"===e},label:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.brightThemeLabel"})},{value:"dark",isActive:function(e){return"dark"===(null==e?void 0:e.value)||"dark"===e},label:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.darkThemeLabel"})},{value:"custom",Component:function(e){return i().createElement(Sr.H,kr({},e,{disableBackgroundAlpha:null==s?void 0:s.disableBackgroundAlpha,disableShadow:null==s?void 0:s.disableShadow,disableTextColor:null==s?void 0:s.disableTextColor,onUpdate:u,storyTheme:o}))}}],onSelect:function(e){return u("theme",Cr(Cr({},jr()(n)&&n),{},{value:e}))}})},Rr=function(e){var t=e.editMap,r=void 0!==t&&t,n=e.forceDelBtnDisable,o=void 0!==n&&n,a=e.path,c=e.remove,l=void 0===c?function(){}:c,u=e.bsStyle;return i().createElement(Ar,{glyph:"trash",visible:!0,noTooltipWhenDisabled:!0,disabled:r||o,className:"".concat("square-button-md no-border"," ").concat(u&&xr[u]),tooltipId:"geostory.contentToolbar.remove",confirmTitle:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.removeConfirmTitle"}),confirmContent:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.removeConfirmContent"}),onClick:function(){l(a)}})},Zr=r(455877),Fr=r.n(Zr);function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}var Nr=["editMap","map","update"],zr=["tools","children"];function Br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Lr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Lr(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wr(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Gr={size:function(e){return{renderButton:i().createElement(Mr,e)}},align:function(e){return{renderButton:i().createElement(Dr,e)}},theme:function(e){return{renderButton:i().createElement(_r,e)}},fit:function(e){var t=e.editMap,r=void 0!==t&&t,n=e.fit,o=e.update,i=void 0===o?function(){}:o;return{value:n,glyph:"contain"===n?"fit-cover":"fit-contain",disabled:r,visible:!0,tooltipId:"contain"===n?"geostory.contentToolbar.cover":"geostory.contentToolbar.fit",onClick:function(){return i("fit","contain"===n?"cover":"contain")}}},cover:function(e){var t=e.editMap,r=void 0!==t&&t,n=e.cover,o=e.updateSection,i=void 0===o?function(){}:o;return{value:n,glyph:n?"height-auto":"height-view",visible:!0,disabled:r,tooltipId:n?"geostory.contentToolbar.contentHeightAuto":"geostory.contentToolbar.contentHeightView",onClick:function(){return i({cover:!n},"merge")}}},editMedia:function(e){var t=e.editMap,r=void 0!==t&&t,n=e.path,o=e.editMedia,i=void 0===o?function(){}:o,a=e.sectionType;return{glyph:"pencil","data-button":"pencil",visible:!0,disabled:r,tooltipId:"geostory.contentToolbar.editMedia",onClick:function(){i({path:n},n?a:"")}}},remove:function(e){return{renderButton:i().createElement(Rr,e)}},editMap:function(e){var t=e.editMap,r=void 0!==t&&t,n=e.map,o=e.update,i=void 0===o?function(){}:o,a=Wr(e,Nr);return{glyph:"map-edit",visible:!0,disabled:r,bsStyle:r?"success":"default",tooltipId:"geostory.contentToolbar.editMap",onClick:function(){var e=null!=n?n:a,t=e.center,o=e.zoom,c=e.resolution;i("editMap",!r),!r&&i("map",{center:t,zoom:o,mapStateSource:Fr()(),resolution:c,resetPanAndZoom:!1},"merge")}}},editURL:function(e){var t=e.editURL,r=void 0!==t&&t,n=e.path,o=e.editWebPage,i=void 0===o?function(){}:o;return{glyph:"pencil",visible:!0,disabled:r,bsStyle:r?"success":"default",tooltipId:"geostory.contentToolbar.editURL",onClick:function(){i({path:n})}}},muted:function(e){var t=e.update,r=e.muted;return{glyph:r?"muted":"audio",visible:!0,active:!r,tooltipId:r?"geostory.contentToolbar.enableAudio":"geostory.contentToolbar.disableAudio",onClick:function(){t("muted",!r)}}},autoplay:function(e){var t=e.update,r=e.autoplay;return{glyph:"play-circle",visible:!("cover"===e.fit),active:r,tooltipId:r?"geostory.contentToolbar.disableAutoplay":"geostory.contentToolbar.enableAutoplay",onClick:function(){t("autoplay",!r)}}},loop:function(e){var t=e.update,r=e.loop;return{glyph:"loop",visible:!("cover"===e.fit),active:r,tooltipId:r?"geostory.contentToolbar.disableLoop":"geostory.contentToolbar.enableLoop",onClick:function(){t("loop",!r)}}},showCaption:function(e){var t=e.editMap,r=void 0!==t&&t,n=e.update,o=e.showCaption,i=e.caption,a=e.description;return{glyph:"caption",visible:!(!i&&!a),disabled:r,active:!(!o||r),tooltipId:o?"geostory.contentToolbar.hideCaption":"geostory.contentToolbar.showCaption",onClick:function(){n("showCaption",!o)}}},add:function(e){var t=e.editMap,r=void 0!==t&&t,n=e.addDisabled,o=void 0!==n&&n,i=e.add,a=void 0===i?function(){}:i,c=e.bsStyle;return{glyph:"plus",visible:!0,bsStyle:void 0===c?"default":c,tooltipId:"geostory.contentToolbar.add",disabled:r||o,onClick:a}},edit:function(e){var t=e.editMap,r=void 0!==t&&t,n=e.edit,o=void 0===n?function(){}:n,i=e.bsStyle;return{glyph:"pencil",visible:!0,bsStyle:void 0===i?"default":i,tooltipId:"geostory.contentToolbar.edit",disabled:r,onClick:o}},marker:function(e){var t=e.editMap,r=void 0!==t&&t,n=e.markerDisabled,o=void 0!==n&&n,i=e.marker,a=void 0===i?function(){}:i,c=e.bsStyle;return{glyph:"map-marker",visible:!0,tooltipId:"geostory.contentToolbar.marker",bsStyle:void 0===c?"default":c,disabled:r||o,onClick:a}},closeDraw:function(e){var t=e.editMap,r=void 0!==t&&t,n=e.bsStyle,o=void 0===n?"default":n,i=e.update,a=void 0===i?function(){}:i,c=e.onEnableDraw,l=void 0===c?function(){}:c;return{glyph:"1-close",visible:!0,tooltipId:"geostory.contentToolbar.closeMapEditing",bsStyle:o,disabled:!r,onClick:function(){l(null),a("editMap",!r)}}}};function qr(e){var t=e.tools,r=void 0===t?[]:t,n=e.children,o=Wr(e,zr);return i().createElement("div",{className:"ms-content-toolbar"},i().createElement(Ft.Z,{btnDefaultProps:{className:"square-button-md no-border",noTooltipWhenDisabled:!0},buttons:r.filter((function(e){return(null==e?void 0:e.id)&&Gr[e.id]||Gr[e]})).map((function(e){return(null==e?void 0:e.id)&&Gr[e.id](Ur(Ur({},o),e))||Gr[e](o)}))}),n)}function Hr(e){return Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hr(e)}var Vr=["id","inViewRef","innerRef","children","type","contentWrapperStyle","contentToolbar","mode"];function Yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Hr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Hr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Hr(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Qr=function(e){var t=e.id,r=e.inViewRef,n=e.innerRef,o=e.children,a=e.type,c=e.contentWrapperStyle,l=e.contentToolbar,u=e.mode,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Vr),p=l||qr;return i().createElement("div",{id:t,ref:r,style:Kr(Kr({},c),s.hideContent&&{display:"none"}),className:"ms-content ms-content-".concat(a).concat((0,f.w)(s))},i().createElement("div",{className:"ms-content-body",ref:n,style:(0,f.cy)(s)},u===f.nl.EDIT&&i().createElement(p,s),o))};function Xr(e){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(e)}function Jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $r(e,t,r){var n;return n=function(e,t){if("object"!=Xr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Xr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var en=(0,_e.compose)(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return _e.nest.apply(void 0,t.concat([e]))}}(Qr),(0,_e.setDisplayName)("ColumnContent"))(Rt),tn=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(r),!0).forEach((function(t){$r(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})};const rn=(0,_e.compose)((0,_e.branch)((function(e){var t=e.type,r=e.sectionType;return[f.ID.IMMERSIVE,f.ID.CAROUSEL].includes(r)&&t===f.bT.COLUMN}),lr({threshold:[0,.25,.5,.75]})),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return _e.nest.apply(void 0,t.concat([e]))}}(Qr),(0,_e.setDisplayName)("SectionContent"),(0,_e.branch)((function(e){return e.type===f.bT.COLUMN}),(0,_e.renderComponent)((function(e){var t=e.viewWidth,r=e.viewHeight,n=e.contents,o=void 0===n?[]:n,a=e.mode,c=e.add,l=void 0===c?function(){}:c,u=e.editMedia,s=void 0===u?function(){}:u,p=e.editWebPage,d=void 0===p?function(){}:p,y=e.update,m=void 0===y?function(){}:y,b=e.remove,v=void 0===b?function(){}:b,g=e.bubblingTextEditing,h=void 0===g?function(){}:g,O=e.expandable,w=e.mediaViewer,S=e.contentToolbar,P=e.sections,j=void 0===P?[]:P,E=e.sectionType,T=e.overrideTools,C=void 0===T?function(e){return e}:T,k=e.storyFonts;return i().createElement(nr,{className:"ms-column-contents",ContentComponent:en,contents:o,mode:a,add:l,editMedia:s,editWebPage:d,update:m,remove:v,viewWidth:t,viewHeight:r,bubblingTextEditing:h,sectionType:E,contentProps:{expandable:O,mediaViewer:w,contentToolbar:S},sections:j,storyFonts:k,tools:C($r($r($r($r($r({},f.bT.TEXT,["remove"]),f.Tr.IMAGE,["editMedia",tn(),"showCaption","remove"]),f.Tr.MAP,["editMedia","editMap",tn(!0),"showCaption","remove"]),f.bT.WEBPAGE,[tn(!0,{sizeType:"horizontal"}),"editURL",tn(!0,{sizeType:"vertical",filterOptions:function(e){return"v-full"!==e.value}}),"remove"]),f.Tr.VIDEO,["editMedia","muted","autoplay","loop","showCaption","remove"])),addButtons:[{glyph:"sheet",tooltipId:"geostory.addTextContent",template:f.bT.TEXT},{glyph:"picture",tooltipId:"geostory.addMediaContent",template:f.bT.MEDIA},{glyph:"webpage",tooltipId:"geostory.addWebPageContent",template:f.bT.WEBPAGE}]})}))))(Rt),nn=(0,_e.compose)((0,_e.defaultProps)({ContentComponent:rn}),(0,_e.withHandlers)({editMedia:function(e){var t=e.editMedia,r=void 0===t?function(){}:t,n=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return r.apply(void 0,[{path:'sections[{"id": "'.concat(n,'"}].')+t}].concat(i))}},editWebPage:function(e){var t=e.editWebPage,r=void 0===t?function(){}:t,n=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return r.apply(void 0,[{path:'sections[{"id": "'.concat(n,'"}].')+t}].concat(i))}},add:function(e){var t=e.add,r=void 0===t?function(){}:t,n=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return r.apply(void 0,['sections[{"id": "'.concat(n,'"}].')+e].concat(o))}},update:function(e){var t=e.update,r=void 0===t?function(){}:t,n=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return r.apply(void 0,['sections[{"id": "'.concat(n,'"}].')+e].concat(o))}},remove:function(e){var t=e.remove,r=void 0===t?function(){}:t,n=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return r.apply(void 0,['sections[{"id": "'.concat(n,'"}].')+e].concat(o))}}}),(0,_e.setDisplayName)("SectionContents"))(nr);var on=r(630998),an=r.n(on),cn=r(84753),ln=r.n(cn);function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(r),!0).forEach((function(t){dn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dn(e,t,r){var n;return n=function(e,t){if("object"!=un(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==un(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,_e.setObservableConfig)(Re.Z);var yn=function(e,t){var r=an()(e,{id:t});return e[-1!==r&&r?r:0]},mn=(0,_e.withProps)((function(e){var t=e.id,r=e.backgroundId,n=e.contents,o=yn(void 0===n?[]:n,r)||{},i=o&&o.id;return{background:A()(o,"background")||{type:"none"},contentId:i,sectionId:t,path:'sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(i,'"}].background')}})),bn=(0,_e.withHandlers)({updateBackground:function(e){var t=e.sectionId,r=e.contentId,n=e.update,o=void 0===n?function(){}:n;return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return o.apply(void 0,['sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(r,'"}].background.')+e].concat(i))}},updateSection:function(e){var t=e.sectionId,r=e.update,n=void 0===r?function(){}:r;return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n.apply(void 0,['sections[{"id": "'.concat(t,'"}]')].concat(r))}}}),vn=(0,_e.compose)(mn,bn),gn=(0,_e.mapPropsStream)((function(e){var t=(0,_e.createEventHandler)(),r=t.handler,n=t.stream;return b.Observable.combineLatest(e,function(e,t){var r=e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.id,n=t.visible,o=t.entry;return pn(pn({},e),{},dn({},r,{visible:n,entry:o}))}),{}).debounceTime(100).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{maxItem:ln()(Object.keys(e),(function(t){return e[t].visible?A()(e[t],"entry.intersectionRatio"):-1/0})),items:e}}));return b.Observable.merge(r.pluck("maxItem").distinctUntilChanged().map((function(e){return{backgroundId:e}})),r.map((function(e){var t=e.maxItem,r=e.items;return 0===A()(r[t],"entry.intersectionRatio")?"EMPTY":t})).withLatestFrom(t.pluck("updateCurrentPage")).do((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return sn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sn(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return i&&i({columnId:o})})).ignoreElements())}(n,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pn(pn({},t.reduce((function(){var e=arguments.length>1?arguments[1]:void 0;return pn(pn({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e)}),{})),{},{onVisibilityChange:r})}))}));const hn=(0,_e.compose)(gn,vn);var On=r(689438);function wn(e){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(e)}function Sn(){return Sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sn.apply(this,arguments)}function Pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(r),!0).forEach((function(t){xn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function En(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mn(n.key),n)}}function Tn(e,t,r){return t=kn(t),function(e,t){if(t&&("object"===wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return In(e)}(e,Cn()?Reflect.construct(t,r||[],kn(e).constructor):t.apply(e,r))}function Cn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cn=function(){return!!e})()}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function An(e,t){return An=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},An(e,t)}function xn(e,t,r){return(t=Mn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mn(e){var t=function(e,t){if("object"!=wn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wn(t)?t:String(t)}var Dn=r(356936),_n=r(683255),Rn=r.n(_n);function Zn(e){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}function Fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(r),!0).forEach((function(t){qn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nn(){return Nn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nn.apply(this,arguments)}function zn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hn(n.key),n)}}function Bn(e,t,r){return t=Wn(t),function(e,t){if(t&&("object"===Zn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Un()?Reflect.construct(t,r||[],Wn(e).constructor):t.apply(e,r))}function Un(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Un=function(){return!!e})()}function Wn(e){return Wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wn(e)}function Gn(e,t){return Gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gn(e,t)}function qn(e,t,r){return(t=Hn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hn(e){var t=function(e,t){if("object"!=Zn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zn(t)?t:String(t)}var Vn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bn(this,t,arguments)}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gn(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=(0,f.cy)(this.props),t=!this.props.disableToolbarPortal&&this.refs&&this.refs.div&&this.refs.div.parentNode,r=this.props.sectionType===f.ID.TITLE?["editMedia","cover"]:["editMedia"],n=this.props.contentToolbar||qr,o=i().createElement(n,Nn({},this.props,{themeProps:{disableBackgroundAlpha:!0,disableTextColor:!0,disableShadow:!0},tools:this.props.tools&&this.props.type&&this.props.tools[this.props.type]||this.props.sectionType===f.ID.BANNER&&[].concat(r,["cover","remove"])||r}),this.props.contentToolbarChildren),a="".concat(this.props.sectionId||"ms","-media-").concat(this.props.id||this.props.resourceId);return i().createElement("div",{ref:"div",className:"ms-section-background",style:Ln({},this.props.style)},i().createElement("div",{className:"ms-section-background-container".concat((0,f.w)(this.props)),ref:this.props.innerRef,style:Ln(Ln({height:this.props.height},e),null!==Je.Ln&&void 0!==Je.Ln&&Je.Ln[this.props.type]?{}:this.props.backgroundPlaceholder)},i().createElement(Je.ZP,Nn({id:a},this.props,{enableFullscreen:!1,descriptionEnabled:!1,mediaViewer:this.props.mediaViewer,containerInView:this.props.inView}),this.props.children),this.props.mode===f.nl.EDIT&&(t?i().createElement(Dn.h_,{container:t},o):o)))}}])&&zn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component);qn(Vn,"propTypes",{id:Qe().string,resourceId:Qe().string,sectionId:Qe().string,mode:Qe().string,fit:Qe().string,size:Qe().string,path:Qe().string,credits:Qe().string,description:Qe().string,height:Qe().number,width:Qe().number,tools:Qe().object,style:Qe().object,add:Qe().func,editMedia:Qe().func,update:Qe().func,updateSection:Qe().func,remove:Qe().func,type:Qe().oneOf(f.lg.MediaTypes),disableToolbarPortal:Qe().bool,backgroundPlaceholder:Qe().object,sectionType:Qe().string,src:Qe().string,theme:Qe().string,mediaViewer:Qe().func,contentToolbar:Qe().func,inView:Qe().bool,sections:Qe().array,innerRef:Qe().oneOfType([Qe().func,Qe().object]),contentToolbarChildren:Qe().node}),qn(Vn,"defaultProps",{height:0,size:"full",width:0,style:{},backgroundPlaceholder:{background:"url(".concat(Rn(),")"),backgroundSize:"256px auto"}});const Yn=(Kn=Vn,Qn=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return xn(In(e=Tn(this,t,[].concat(n))),"state",{style:{}}),xn(In(e),"update",(function(t){if(e._stickybits){var r=document.querySelector(t);-1===e._stickybits.definePosition().indexOf("sticky")&&r&&(e._stickybits.update(),setTimeout((function(){var t=r.getBoundingClientRect(),n=t.top,o=t.left;e.setState({style:{top:n,left:o,width:r.scrollWidth-2}})})))}})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&An(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this._stickybits=this._node&&(0,On.Z)(this._node,{scrollEl:this.props.scrollContainerSelector,noStyles:!0,useGetBoundingClientRect:!0}),this.update(this.props.scrollContainerSelector)}},{key:"componentWillReceiveProps",value:function(e){!this._stickybits||e.viewWidth===this.props.viewWidth&&e.viewHeight===this.props.viewHeight||this.update(e.scrollContainerSelector)}},{key:"componentWillUnmount",value:function(){this._stickybits&&this._stickybits.cleanup()}},{key:"render",value:function(){var e=this;return i().createElement(Kn,Sn({ref:function(t){t&&t.refs&&t.refs[e.props.refId]&&(e._node=t.refs[e.props.refId])},style:jn({},this.state.style)},this.props),this.props.children)}}])&&En(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component),xn(Qn,"propTypes",{scrollContainerSelector:Qe().string,height:Qe().number,width:Qe().number,refId:Qe().string}),xn(Qn,"defaultProps",{scrollContainerSelector:"body",height:0,width:0,refId:"div"}),Qn);var Kn,Qn,Xn=r(911636),Jn=r.n(Xn);function $n(e){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(e)}function eo(){return eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eo.apply(this,arguments)}function to(e,t,r){var n;return n=function(e,t){if("object"!=$n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=$n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==$n(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ro=(0,_e.compose)(hn,(0,_e.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t=e.add,r=void 0===t?function(){}:t,n=e.editMedia,o=void 0===n?function(){}:n,a=e.editWebPage,c=void 0===a?function(){}:a,l=e.onVisibilityChange,u=void 0===l?function(){}:l,s=e.update,p=void 0===s?function(){}:s,d=e.updateBackground,y=void 0===d?function(){}:d,m=e.updateCurrentPage,b=void 0===m?function(){}:m,v=e.remove,g=void 0===v?function(){}:v,h=e.id,O=e.background,w=void 0===O?{}:O,S=e.path,P=e.contents,j=void 0===P?[]:P,E=e.mode,T=e.sectionType,C=e.inViewRef,k=e.viewWidth,I=e.viewHeight,x=e.focusedContent,M=e.contentId,D=e.bubblingTextEditing,_=void 0===D?function(){}:D,R=e.textEditorActiveClass,Z=void 0===R?"":R,F=e.expandableMedia,L=void 0!==F&&F,N=e.storyTheme,z=e.mediaViewer,B=e.contentToolbar,U=e.inView,W=e.sections,G=void 0===W?[]:W,q=e.storyFonts,H=x&&x.hideContent&&A()(x,"target.id")===M,V=H?"hidden":"visible",Y=L&&w&&"map"===w.type?" ms-expandable-background":"",K=(null==N?void 0:N.overlay)||{},Q=(null==N?void 0:N.general)||{};return i().createElement("section",{className:"ms-section ms-section-immersive".concat(Y),id:h,ref:C},i().createElement(Yn,eo({},w,{mode:E,disableToolbarPortal:!0,tools:to(to(to({},f.Tr.IMAGE,["editMedia","fit","size","align","theme"]),f.Tr.MAP,["editMedia","editMap","size","align","theme"]),f.Tr.VIDEO,["editMedia","fit","size","align","theme","muted","autoplay","loop"]),scrollContainerSelector:"#ms-sections-container",add:r,editMedia:o,expandable:L,path:S,update:y,updateCurrentPage:b,remove:g,sectionType:T,sectionId:h,backgroundId:w.id,key:w.id,width:k,height:I,backgroundPlaceholder:{background:"url(".concat(Jn(),")"),backgroundSize:"600px auto"},storyTheme:Q,mediaViewer:z,contentToolbar:B,inView:U})),i().createElement(nn,{tools:to({},f.bT.COLUMN,["size","align","theme"]),className:"ms-section-contents".concat(Z),contents:j,mode:E,add:r,updateCurrentPage:b,editMedia:o,editWebPage:c,update:p,remove:g,sectionId:h,viewWidth:k,viewHeight:I,contentProps:{onVisibilityChange:u,contentWrapperStyle:{minHeight:I,visibility:V},expandable:L,mediaViewer:z,contentToolbar:B},focusedContent:x,bubblingTextEditing:_,sectionType:T,storyTheme:K,sections:G,storyFonts:q}),E===f.nl.EDIT&&!H&&i().createElement(Qt,{containerWidth:k,containerHeight:I,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){r("sections",h,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){r("sections",h,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){r("sections",h,f.ID.PARAGRAPH)}},{glyph:"story-immersive-content",tooltipId:"geostory.addImmersiveContent",onClick:function(){r('sections[{"id": "'.concat(h,'"}].contents'),void 0,f.bT.COLUMN,"geostory.builder.defaults.titleImmersiveContent")}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){r("sections",h,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){r("sections",h,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){r("sections",h,f.tQ.WEBPAGE)}}]}))}));function no(e){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},no(e)}function oo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function io(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(r),!0).forEach((function(t){ao(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ao(e,t,r){var n;return n=function(e,t){if("object"!=no(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=no(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==no(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const co=function(e){var t=e.id,r=e.contents,n=e.mode,o=e.add,a=void 0===o?function(){}:o,c=e.update,l=void 0===c?function(){}:c,u=e.editMedia,s=void 0===u?function(){}:u,p=e.editWebPage,d=void 0===p?function(){}:p,y=e.remove,m=void 0===y?function(){}:y,b=e.inViewRef,v=e.viewWidth,g=e.viewHeight,h=e.expandableMedia,O=e.mediaViewer,w=e.contentToolbar,S=e.sections,P=void 0===S?[]:S,j=e.sectionType,E=e.storyFonts;return i().createElement("section",{className:"ms-section ms-section-paragraph",id:t,ref:b},i().createElement(nn,{className:"ms-section-contents",contents:r,mode:n,add:a,editMedia:s,editWebPage:d,update:l,remove:m,sectionId:t,viewWidth:v,viewHeight:g,sectionType:j,contentProps:{expandable:h,mediaViewer:O,contentToolbar:w,overrideTools:function(e){return io(io({},e),{},ao({},f.bT.TEXT,[(!0,{id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:true}),"remove"]))}},sections:P,storyFonts:E}),n===f.nl.EDIT&&i().createElement(Qt,{containerWidth:v,containerHeight:g,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){a("sections",t,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){a("sections",t,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){a("sections",t,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){a("sections",t,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){a("sections",t,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){a("sections",t,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){a("sections",t,f.tQ.WEBPAGE)}}]}))};var lo=r(875492),uo=r.n(lo);function so(e){return so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},so(e)}function fo(){return fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fo.apply(this,arguments)}function po(e,t,r){var n;return n=function(e,t){if("object"!=so(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=so(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==so(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const yo=(0,_e.compose)(vn,(0,_e.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t=e.id,r=e.background,n=void 0===r?{}:r,o=e.contents,a=void 0===o?[]:o,c=e.mode,l=e.contentId,u=e.path,s=e.sectionType,p=e.cover,d=e.viewWidth,y=e.viewHeight,m=e.inViewRef,b=e.add,v=void 0===b?function(){}:b,g=e.update,h=void 0===g?function(){}:g,O=e.updateSection,w=void 0===O?function(){}:O,S=e.remove,P=void 0===S?function(){}:S,j=e.updateBackground,E=void 0===j?function(){}:j,T=e.editMedia,C=void 0===T?function(){}:T,k=e.focusedContent,I=e.bubblingTextEditing,x=void 0===I?function(){}:I,M=e.textEditorActiveClass,D=void 0===M?"":M,_=e.expandableMedia,R=void 0!==_&&_,Z=e.storyTheme,F=e.mediaViewer,L=e.contentToolbar,N=e.inView,z=e.sections,B=void 0===z?[]:z,U=e.storyFonts,W=A()(k,"target.id")===l,G=W?"hidden":"visible",q=R&&n&&"map"===n.type?" ms-expandable-background":"",H=(null==Z?void 0:Z.overlay)||{},V=(null==Z?void 0:Z.general)||{};return i().createElement("section",{ref:m,className:"ms-section ms-section-title".concat(q),id:t},i().createElement(De.Z,null,(function(e){var t=e.height;return i().createElement(Yn,fo({},n,{scrollContainerSelector:"#ms-sections-container",key:n.id,mode:c,id:l,path:u,update:E,add:v,editMedia:C,expandable:R,updateSection:w,cover:p,remove:P,width:d,sectionType:s,backgroundPlaceholder:{background:"url(".concat(p?Rn():uo(),")"),backgroundSize:"".concat(p?64:600,"px auto")},tools:po(po(po({},f.Tr.IMAGE,["editMedia","cover","fit","size","align","theme"]),f.Tr.MAP,["editMedia","cover","editMap","size","align","theme"]),f.Tr.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop"]),height:t>=y?y:t,storyTheme:V,mediaViewer:F,contentToolbar:L,inView:N}))})),i().createElement(nn,{className:"ms-section-contents".concat(D),contents:a,mode:c,add:v,sectionType:s,update:h,remove:P,sectionId:t,contentProps:{contentWrapperStyle:p?{minHeight:y,visibility:G}:{visibility:G},mediaViewer:F,contentToolbar:L},tools:po({},f.bT.TEXT,["size","align","theme","remove"]),focusedContent:k,bubblingTextEditing:x,storyTheme:H,sections:B,storyFonts:U}),c===f.nl.EDIT&&!W&&i().createElement(Qt,{containerWidth:d,containerHeight:y,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){v("sections",t,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){v("sections",t,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){v("sections",t,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){v("sections",t,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){v("sections",t,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){v("sections",t,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){v("sections",t,f.tQ.WEBPAGE)}}]}))}));function mo(e){return mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mo(e)}function bo(){return bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bo.apply(this,arguments)}function vo(e,t,r){var n;return n=function(e,t){if("object"!=mo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=mo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==mo(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const go=(0,_e.compose)(vn,(0,_e.withStateHandlers)({textEditorActive:!1}))((function(e){var t=e.id,r=e.background,n=void 0===r?{}:r,o=e.mode,a=e.contentId,c=e.path,l=e.sectionType,u=void 0===l?f.ID.BANNER:l,s=e.cover,p=e.viewWidth,d=e.viewHeight,y=e.inViewRef,m=e.add,b=void 0===m?function(){}:m,v=e.updateSection,g=void 0===v?function(){}:v,h=e.remove,O=void 0===h?function(){}:h,w=e.updateBackground,S=void 0===w?function(){}:w,P=e.editMedia,j=void 0===P?function(){}:P,E=e.focusedContent,T=e.expandableMedia,C=void 0!==T&&T,k=e.storyTheme,I=e.mediaViewer,x=e.contentToolbar,M=e.inView,D=A()(E,"target.id")===a,_=C&&n&&"map"===n.type?" ms-expandable-background":"",R=c.replace(".background","");return i().createElement("section",{ref:y,className:"ms-section ms-section-banner".concat(_),id:t},i().createElement(De.Z,null,(function(e){var t=e.height;return i().createElement(Yn,bo({},n,{scrollContainerSelector:"#ms-sections-container",key:n.id,mode:o,id:a,path:c,update:S,add:b,editMedia:j,expandable:C,updateSection:g,cover:s,remove:function(){return O(R)},width:p,sectionType:u,backgroundPlaceholder:{background:"url(".concat(s?Rn():uo(),")"),backgroundSize:"".concat(s?64:600,"px auto")},tools:vo(vo(vo({},f.Tr.IMAGE,["editMedia","cover","fit","size","align","theme","remove"]),f.Tr.MAP,["editMedia","cover","editMap","size","align","theme","remove"]),f.Tr.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop","remove"]),height:t>=d?d:t,storyTheme:k,mediaViewer:I,contentToolbar:x,inView:M}))})),i().createElement("div",{style:{minHeight:s?d:300,pointerEvents:"none"}}),o===f.nl.EDIT&&!D&&i().createElement(Qt,{containerWidth:p,containerHeight:d,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){b("sections",t,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){b("sections",t,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){b("sections",t,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){b("sections",t,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){b("sections",t,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){b("sections",t,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){b("sections",t,f.tQ.WEBPAGE)}}]}))}));var ho=r(294184),Oo=r.n(ho),wo=r(771335),So=r(694745),Po=r(993451);function jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Eo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Eo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var To=(0,Po.Z)("placeholder")(et.FormControl);const Co=function(e){var t,r,n,a=jo((0,o.useState)([]),2),c=a[0],l=a[1],u=jo((0,o.useState)({data:null==e||null===(t=e.thumbnail)||void 0===t?void 0:t.image}),2),s=u[0],f=u[1],p=jo((0,o.useState)(null==e?void 0:e.title),2),d=p[0],y=p[1];return i().createElement(So.Z,{fitContent:!0,title:i().createElement(rt.Z,{msgId:e.editing?"geostory.carouselEditTitle":"geostory.carouselAddTitle"}),show:!0,fade:!0,clickOutEnabled:!1,bodyClassName:"ms-flex modal-properties-container background-dialog",onClose:e.onClose,buttons:e.loading?[]:[{text:i().createElement(rt.Z,{msgId:e.editing?"save":"backgroundDialog.add"}),bsStyle:"primary",onClick:function(){e.update("thumbnail",{image:s.data}),e.update("title",d),e.onClose()}}]},i().createElement(et.Form,{style:{width:"100%"}},(n={FORMAT:i().createElement(rt.Z,{msgId:"map.errorFormat"}),SIZE:i().createElement(rt.Z,{msgId:"map.errorSize"})},c.length>0?i().createElement("div",{className:"dropzone-errorBox alert-danger"},i().createElement("p",null,i().createElement(rt.Z,{msgId:"map.error"})),c.map((function(e){return i().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},n[e])}))):null),i().createElement(wo.Z,{onUpdate:function(e,t){return f({data:e,url:t})},onError:function(e){return l(e)},message:i().createElement(rt.Z,{msgId:"backgroundDialog.imageUploadMessage"}),suggestion:"",map:{newThumbnail:A()(s,"url")||(null===(r=e.thumbnail)||void 0===r?void 0:r.image)||"NODATA"},thumbnailOptions:{contain:!1,width:128,height:128,quality:1,type:"image/jpeg"}}),i().createElement(et.FormGroup,null,i().createElement(et.ControlLabel,null,i().createElement(rt.Z,{msgId:"layerProperties.title"})),i().createElement(To,{value:d,placeholder:"backgroundDialog.titlePlaceholder",onChange:function(e){return y(e.target.value)}}))))};var ko=r(625311),Io=r(245567),Ao=r(773723),xo=r.n(Ao),Mo=r(615402);const Do=function(e){return t=e.type,r="",n="","addMap"===t?(r="ms-carousel-map-info",n="geostory.carouselAddMapInfo"):"addMarker"===t?(r="ms-carousel-marker-info",n="geostory.carouselPlaceMarkerInfo"):(r="ms-carousel-add-info",n="geostory.carouselAddItemInfo"),i().createElement("div",{className:r},i().createElement(Mo.Z,{msgId:n}));var t,r,n};var _o=r(81593);function Ro(e){return Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ro(e)}var Zo=["title","thumbnail","index","isSelected"],Fo=["onSort","sectionId","contents","onEnableDraw","isEditMap","isDrawEnabled"];function Lo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function No(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Ro(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ro(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ro(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zo(){return zo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zo.apply(this,arguments)}function Bo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Uo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wo(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Go=(0,ko.Z)((function(e){var t=e.title,r=e.thumbnail,n=e.index,o=e.isSelected,a=Wo(e,Zo),c=i().createElement("div",{className:Oo()("ms-geo-carousel-item",{"ms-geo-carousel-item-selected":o}),onClick:a.onClick},i().createElement("div",{className:"ms-geo-carousel-item-inner-wrapper",style:{backgroundImage:"url(".concat((null==r?void 0:r.image)||xo(),")")}},i().createElement("span",{className:"ms-geo-carousel-item-inner"},t||"Item ".concat(n+1)),i().createElement("span",{className:"ms-geo-carousel-item-inner-index"},n+1)));return a.isDraggable&&a.connectDragSource?a.connectDragSource(c):c})),qo=(0,Io.Z)((function(e){var t=e.mode,r=e.add,n=e.update,a=void 0===n?function(){}:n,c=e.remove,l=e.sectionId,u=e.isMapBackground,s=e.contentId,p=e.items,d=e.contentToolbar,y=void 0===d?qr:d,m=e.cardComponent,b=e.containerWidth,v=e.isDrawEnabled,g=e.onEnableDraw,h=e.isEditMap,O=e.innerRef,w=e.deltaSwipeSize,S=void 0===w?200:w,P=e.transition,j=void 0===P?300:P,E=e.style,T=e.controlStyle,C=Bo((0,o.useState)(!1),2),k=C[0],I=C[1],A=Bo((0,o.useState)(void 0),2),x=A[0],M=A[1],D=Bo((0,o.useState)(""),2),R=D[0],Z=D[1],F=Bo((0,o.useState)({}),2),L=F[0],N=F[1],z=(0,_o.Z)({direction:"horizontal",width:b,deltaScroll:S,transition:j},[p.length]),B=z.isStartControlActive,U=z.isEndControlActive,W=z.containerPropsHandlers,G=z.contentPropsHandlers,q=z.itemPropsHandlers,H=z.moveToDeltaSize,V=z.moveItemInViewById,Y=t===f.nl.EDIT;(0,o.useEffect)((function(){s&&V(s,{margin:32})}),[s]);var K=!(u&&!pr()(p,(function(e){var t;return 0===((null==e||null===(t=e.features)||void 0===t?void 0:t.length)||0)})));return i().createElement(i().Fragment,null,i().createElement("div",{ref:O,style:E,className:"ms-geo-carousel"},Y&&1===p.length&&K&&!h&&i().createElement(Do,{type:"addInfo"}),h&&Y&&v&&!!pr()(p,(function(e){var t;return e.id===s&&0===((null==e||null===(t=e.features)||void 0===t?void 0:t.length)||0)}))&&i().createElement(Do,{type:"addMarker"}),Y&&i().createElement(y,{addDisabled:K,add:r,editMap:h,remove:function(){return c('sections[{"id":"'.concat(l,'"}]'))},tools:["add","remove"]}),i().createElement("div",zo({},W(),{className:"ms-horizontal-menu"}),i().createElement("div",G(),p.map((function(e,t){var n=q({id:e.id,onClick:h?void 0:function(){a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(e.id,'"}].carouselToggle'),!0)}});return i().createElement("div",zo({key:t},n,{className:"ms-geo-carousel-item-wrapper",style:h?{pointerEvents:"none"}:{}}),Y&&i().createElement(y,{editMap:h,markerDisabled:!u||(null==e?void 0:e.id)!==s,edit:function(t){t.stopPropagation(),function(e){M(null==e?void 0:e.id),I(!0),N(null==e?void 0:e.thumbnail),Z(null==e?void 0:e.title)}(e)},remove:function(){var r,n,o,i;return o=null==e?void 0:e.id,i=0===t&&p.length>0?null===(r=p[t+1])||void 0===r?void 0:r.id:null===(n=p[t-1])||void 0===n?void 0:n.id,c('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(o,'"}]')),void(s===o&&a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(i,'"}].hideContent'),!1))},forceDelBtnDisable:(null==e?void 0:e.id)===s,add:r,marker:function(t){t.stopPropagation(),g(e)},tools:["edit","remove","marker"]}),i().createElement(m,zo({key:t,index:t,items:p,update:a,sectionId:l,selectedId:s,isSelected:(null==e?void 0:e.id)===s},e)))}))),B&&i().createElement(tt.Z,{className:"square-button-md no-border ms-geo-carousel-control",style:No(No({},T),{},{position:"absolute"}),onClick:function(){return H(S)}},i().createElement(et.Glyphicon,{glyph:"chevron-left"})),U&&i().createElement(tt.Z,{className:"square-button-md no-border ms-geo-carousel-control",style:No(No({},T),{},{position:"absolute",right:0}),onClick:function(){return H(-S)}},i().createElement(et.Glyphicon,{glyph:"chevron-right"})))),k&&i().createElement(Co,{title:R,thumbnail:L,update:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace",o=_()(e)?"":".".concat(e);a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(r,'"}]')+o,t,n)},onClose:function(){return I(!1)}}))}));const Ho=function(e){var t=e.onSort,r=e.sectionId,n=e.contents,o=void 0===n?[]:n,a=e.onEnableDraw,c=void 0===a?function(){}:a,l=e.isEditMap,u=e.isDrawEnabled,s=Wo(e,Fo);return i().createElement(qo,zo({containerId:r,isDraggable:s.mode===f.nl.EDIT,onSort:function(e,n,o,i){if(o.containerId===i.containerId){var a='sections[{ "id": "'.concat(r,'" }].contents[{"id":"').concat(i.id,'"}]'),c='sections[{ "id": "'.concat(r,'" }].contents'),l=e,u=Fr()();t(a,c,l,u,'sections[{ "id": "'.concat(r,'" }].contents[{"id":"').concat(u,'"}]'))}}},No(No({},s),{},{sectionId:r}),{cardComponent:Go,items:o.map((function(e){var t=e.id,r=e.thumbnail;return{id:t,thumbnail:void 0===r?{}:r,features:e.features,title:e.title}})),isDrawEnabled:u,onEnableDraw:c,isEditMap:l}))};var Vo=r(743837),Yo=r(240986);const Ko=function(e){var t=e.currentIndex,r=e.contents,n=void 0===r?[]:r,o=e.onTraverseCard,a=void 0===o?function(){}:o;return i().createElement(i().Fragment,null,i().createElement(tt.Z,{className:"ms-carousel-slider left-arrow",disabled:0===t,onClick:function(){return a()}},i().createElement(et.Glyphicon,{style:{fontSize:22},glyph:"chevron-left"})),i().createElement(tt.Z,{className:"ms-carousel-slider right-arrow",onClick:function(){return a("right")},disabled:t===n.length-1},i().createElement(et.Glyphicon,{style:{fontSize:22},glyph:"chevron-right"})))};function Qo(e){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(e)}function Xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $o(){return $o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$o.apply(this,arguments)}function ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ti(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(r),!0).forEach((function(t){ri(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ei(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ri(e,t,r){var n;return n=function(e,t){if("object"!=Qo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Qo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Qo(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ni=(0,_e.compose)(gn,(function(e){return function(t){var r=yn(t.contents||[],t.backgroundId)||{},n=r&&r.id,o=pn(pn({},t),{},{contentId:n,sectionId:t.id,path:'sections[{"id": "'.concat(t.id,'"}].background')});return i().createElement(e,o)}}),(function(e){return function(t){var r=pn(pn({},t),{},{updateBackground:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.update.apply(t,['sections[{"id": "'.concat(t.sectionId,'"}].background.')+e].concat(n))},updateSection:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.update.apply(t,['sections[{"id": "'.concat(t.sectionId,'"}]')].concat(r))}});return i().createElement(e,r)}}),(function(e){return function(t){var r=Xo((0,o.useState)(""),2),n=r[0],a=r[1];return i().createElement(e,$o({},t,{textEditorActiveClass:n,bubblingTextEditing:function(e){return a(e?" ms-text-editor-active":"")}}))}}))((function(e){var t,r,n=e.add,a=void 0===n?function(){}:n,c=e.editMedia,l=void 0===c?function(){}:c,u=e.editWebPage,s=void 0===u?function(){}:u,p=e.onVisibilityChange,d=void 0===p?function(){}:p,y=e.update,m=void 0===y?function(){}:y,b=e.updateBackground,v=void 0===b?function(){}:b,g=e.updateCurrentPage,h=void 0===g?function(){}:g,O=e.remove,w=void 0===O?function(){}:O,S=e.id,P=e.background,j=void 0===P?{}:P,E=e.path,T=e.contents,C=void 0===T?[]:T,k=e.mode,I=e.sectionType,x=e.inViewRef,M=e.viewWidth,D=e.viewHeight,_=e.focusedContent,R=e.contentId,Z=e.bubblingTextEditing,F=void 0===Z?function(){}:Z,L=e.textEditorActiveClass,N=void 0===L?"":L,z=e.expandableMedia,B=void 0!==z&&z,U=e.storyTheme,W=e.mediaViewer,G=e.contentToolbar,q=e.inView,H=e.sections,V=void 0===H?[]:H,Y=e.storyFonts,K=e.onSort,Q=void 0===K?function(){}:K,X=e.onEnableDraw,J=void 0===X?function(){}:X,$=e.isDrawEnabled,ee=e.defaultMarkerStyle,te=void 0===ee?{iconColor:"cyan",iconShape:"circle"}:ee,re=e.highlightedMarkerStyle,ne=void 0===re?{iconColor:"green",iconShape:"circle"}:re,oe=(0,o.useRef)(),ie=(0,o.useRef)(),ae=(0,o.useRef)();function ce(e,t){return t-(e.left+e.right)<128?{top:0,left:0,bottom:0,right:0}:e}var le=_&&_.hideContent&&A()(_,"target.id")===S,ue=le?"hidden":"visible",se=B&&j&&"map"===j.type?" ms-expandable-background":"",fe=ti(ti({},null==U?void 0:U.overlay),k===f.nl.VIEW&&{maxHeight:D-350,overflowY:"auto"})||{},pe=(null==U?void 0:U.general)||{},de=D-(k===f.nl.EDIT?220:200),ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(pr()(C,{id:R})||{}).contents,r=void 0===t?[]:t;return e.filter((function(e){return f.ID.CAROUSEL===I&&1===r.length?"remove"!==e:e}))},me=(null==j?void 0:j.type)===f.Tr.MAP,be=(C.find((function(e){return e.id===R}))||{}).features,ve=void 0===be?[]:be,ge=an()(C,(function(e){var t=e.id;return R===t})),he=(0,f.Yh)({id:S,contents:C.filter((function(e){return e.id!==R})),featureStyle:function(e){var t=e.content,r=e.feature;return(0,f.c0)(te,C,t,R,r)}}),Oe=(0,f.Yh)({id:"".concat(S,"-highlighted"),contents:C.filter((function(e){return e.id===R})),featureStyle:function(e){var t=e.content,r=e.feature;return(0,f.c0)(ne,C,t,R,r)}});return i().createElement("section",{className:"ms-section ms-section-carousel".concat(se),id:S,ref:x},i().createElement(Yn,$o({},j,{mode:k,innerRef:oe,disableToolbarPortal:!0,tools:ri(ri(ri({},f.Tr.IMAGE,["editMedia","fit","size","align","theme"]),f.Tr.MAP,["editMedia","editMap","size","align","theme"].concat($?"closeDraw":[])),f.Tr.VIDEO,["editMedia","fit","size","align","theme","muted","autoplay","loop"]),scrollContainerSelector:"#ms-sections-container",add:a,editMedia:l,expandable:B,path:E,update:v,updateCurrentPage:h,remove:w,sectionType:I,sectionId:S,backgroundId:j.id,key:j.id,width:M,height:D,backgroundPlaceholder:{background:"url(".concat(Jn(),")"),backgroundSize:"600px auto"},storyTheme:pe,mediaViewer:W,contentToolbar:G,inView:q,layers:[he,Oe],isDrawEnabled:$,onEnableDraw:J,contentToolbarChildren:!me&&k===f.nl.EDIT&&i().createElement(Do,{type:"addMap"})}),i().createElement(Vo.Z,{active:$,features:ve,method:"Point",onChange:function(e,t){m('sections[{"id":"'.concat(S,'"}].contents[{"id":"').concat(R,'"}].features'),t)}}),i().createElement(Yo.Z,{active:!($||null!=j&&j.editMap),geometry:null==ve||null===(t=ve[0])||void 0===t||null===(r=t.geometry)||void 0===r?void 0:r.coordinates,padding:function(){var e={top:0,left:0,bottom:0,right:0},t=oe.current&&oe.current.querySelector(".ms-media-map"),r=ie.current&&ie.current.querySelector("[id='".concat(R,"']"));if(t&&r){var n=oe.current.getBoundingClientRect()||{},o=t.getBoundingClientRect()||{},i=r.getBoundingClientRect()||{};if(ae.current){var a=ae.current.getBoundingClientRect()||{};e.bottom=n.height-(a.top-n.top)}var c=o.left-n.left,l=c+o.width,u=i.left-n.left,s=u+i.width;if(u>=c&&s<=l){var f=u-c,p=l-s;return p>=f?e.left=f+i.width:e.right=p+i.width,ce(e,o.width)}if(s>=c&&s<=l)return e.left=s-c,ce(e,o.width);if(u>=c&&u<=l)return e.right=l-u,ce(e,o.width)}return e}(),fixedZoom:!0,duration:300})),i().createElement(nn,{innerRef:ie,tools:ri({},f.bT.COLUMN,["size","align","theme"]),className:"ms-section-contents".concat(N),contents:C,mode:k,add:a,updateCurrentPage:h,editMedia:l,editWebPage:s,update:m,remove:w,sectionId:S,viewWidth:M,viewHeight:D,contentProps:{onVisibilityChange:d,contentWrapperStyle:{minHeight:de,visibility:ue},expandable:B,mediaViewer:W,contentToolbar:G,overrideTools:function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Xo(e,2),r=t[0],n=t[1];return[r,ye(n)]})))}},focusedContent:_,bubblingTextEditing:F,sectionType:I,storyTheme:fe,sections:V,storyFonts:Y}),i().createElement(Ho,{innerRef:ae,style:null!=U&&U.overlay?ti({},U.overlay):{},controlStyle:pe?ti({},pe):{},sectionId:S,contentId:R,contents:C,update:m,remove:w,expandable:B,add:function(){return e=ti(ti({},(0,f.nq)(f.bT.COLUMN)),{},{title:"Item "+(C.length+1),background:{}}),a('sections[{"id": "'.concat(S,'"}].contents'),void 0,e,"geostory.builder.defaults.titleGeocarouselContent"),void m('sections[{"id":"'.concat(S,'"}].contents[{"id":"').concat(R,'"}].hideContent'),!0);var e},contentToolbar:G,mode:k,onSort:Q,isMapBackground:me,isEditMap:null==j?void 0:j.editMap,containerWidth:M,isDrawEnabled:$,onEnableDraw:function(e){m('sections[{"id":"'.concat(S,'"}].background.editMap'),!0,"replace"),J({contentId:e.id,sectionId:S})}}),k===f.nl.VIEW&&!B&&i().createElement(Ko,{currentIndex:ge,contents:C,onTraverseCard:function(){var e,t,r;e="left"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left")?null==C||null===(t=C[0===ge?0:ge-1])||void 0===t?void 0:t.id:null==C||null===(r=C[ge===C.length-1?ge:ge+1])||void 0===r?void 0:r.id,m('sections[{"id":"'.concat(S,'"}].contents[{"id":"').concat(e,'"}].carouselToggle'),!0)}}),k===f.nl.EDIT&&!le&&i().createElement(Qt,{containerWidth:M,containerHeight:D,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){a("sections",S,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){a("sections",S,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){a("sections",S,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){return a("sections",S,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){a("sections",S,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){a("sections",S,f.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){a("sections",S,f.tQ.WEBPAGE)}}]}))}));function oi(e){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oi(e)}function ii(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pi(n.key),n)}}function ai(e,t,r){return t=li(t),function(e,t){if(t&&("object"===oi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ui(e)}(e,ci()?Reflect.construct(t,r||[],li(e).constructor):t.apply(e,r))}function ci(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ci=function(){return!!e})()}function li(e){return li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},li(e)}function ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function si(e,t){return si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},si(e,t)}function fi(e,t,r){return(t=pi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pi(e){var t=function(e,t){if("object"!=oi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=oi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==oi(t)?t:String(t)}var di=fi(fi(fi(fi(fi(fi(fi(fi({},f.ID.IMMERSIVE,ro),f.ID.CAROUSEL,ni),f.ID.PARAGRAPH,co),f.tQ.MEDIA,co),f.tQ.WEBPAGE,co),f.ID.TITLE,yo),f.ID.BANNER,go),"UNKNOWN",(function(e){var t=e.type,r=e.inViewRef;return i().createElement("div",{ref:r,className:"ms-section ms-section-unknown"},"WARNING: unknown session of type ",t)})),yi=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fi(ui(e=ai(this,t,[].concat(n))),"state",{height:0}),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&si(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=di[this.props.type]||di.UNKNOWN;return i().createElement(e,{sectionType:this.props.type,id:this.props.id,add:this.props.add,update:this.props.update,inViewRef:this.props.inViewRef,editMedia:this.props.editMedia,expandableMedia:this.props.expandableMedia,editWebPage:this.props.editWebPage,updateCurrentPage:this.props.updateCurrentPage,remove:this.props.remove,mode:this.props.mode,cover:this.props.cover,contents:this.props.contents,viewWidth:this.props.viewWidth,viewHeight:this.props.viewHeight,focusedContent:this.props.focusedContent,storyTheme:this.props.storyTheme,mediaViewer:this.props.mediaViewer,contentToolbar:this.props.contentToolbar,inView:this.props.inView,sections:this.props.sections,storyFonts:this.props.storyFonts,onSort:this.props.onSort,isDrawEnabled:this.props.isDrawEnabled,background:this.props.background,onEnableDraw:this.props.onEnableDraw,defaultMarkerStyle:this.props.defaultMarkerStyle,highlightedMarkerStyle:this.props.highlightedMarkerStyle})}}])&&ii(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(i().Component);fi(yi,"propTypes",{id:Qe().string,type:Qe().oneOf(f.lg.SectionTypes),storyType:Qe().oneOf(f.lg.StoryTypes),add:Qe().func,update:Qe().func,editMedia:Qe().func,editWebPage:Qe().func,remove:Qe().func,updateCurrentPage:Qe().func,mode:Qe().oneOf(f.lg.Modes),contents:Qe().array,viewHeight:Qe().number,viewWidth:Qe().number,inViewRef:Qe().func,excludeClassName:Qe().string,cover:Qe().bool,focusedContent:Qe().object,expandableMedia:Qe().bool,storyTheme:Qe().object,mediaViewer:Qe().func,contentToolbar:Qe().func,inView:Qe().bool,sections:Qe().array,storyFonts:Qe().array,onSort:Qe().func,isDrawEnabled:Qe().bool,onEnableDraw:Qe().func,background:Qe().object,defaultMarkerStyle:Qe().object,highlightedMarkerStyle:Qe().object}),fi(yi,"defaultProps",{id:"",add:function(){},update:function(){},editMedia:function(){},editWebPage:function(){},updateCurrentPage:function(){},remove:function(){},onSort:function(){},storyType:f.Ln.CASCADE,viewHeight:0,viewWidth:0,mode:f.nl.VIEW,expandableMedia:!1,sections:[],storyFonts:[],onEnableDraw:function(){}});const mi=lr({threshold:[0,.25,.5,.75,1],rootMargin:"-200px 0px 0px 0px"})(yi);function bi(e){return bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(e)}function vi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ji(n.key),n)}}function gi(e,t,r){return t=Oi(t),function(e,t){if(t&&("object"===bi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wi(e)}(e,hi()?Reflect.construct(t,r||[],Oi(e).constructor):t.apply(e,r))}function hi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hi=function(){return!!e})()}function Oi(e){return Oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oi(e)}function wi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Si(e,t){return Si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Si(e,t)}function Pi(e,t,r){return(t=ji(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ji(e){var t=function(e,t){if("object"!=bi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=bi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bi(t)?t:String(t)}var Ei=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Pi(wi(e=gi(this,t,[].concat(n))),"getAdjustedSelector",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/#\d|^#-\d/g,(function(e,t){return t?"#\\"+t[1]+t[2]:"#\\3"+e[1]+" "}))})),Pi(wi(e),"getFocusedTarget",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.targets,r=e.props.padding,n=void 0===r?{}:r;return t.map((function(t){var r=t.selector,o=null;try{var i=window.document.querySelector(e.getAdjustedSelector(r));if(i){var a=i.getBoundingClientRect(),c=a.top,l=a.right,u=a.bottom,s=a.left;o={x:s-n,y:c-n,w:l-s+2*n,h:u-c+2*n}}}catch(e){console.warn(e)}finally{return o}})).filter((function(e){return e}))})),Pi(wi(e),"getHolePath",(function(t){var r=t.x,n=t.y,o=t.w,i=t.h,a=e.props.borderRadius,c=void 0===a?8:a;return"M ".concat(r," ").concat(n+c," q 0 -").concat(c," ").concat(c," -").concat(c," h ").concat(o-2*c," q ").concat(c," 0 ").concat(c," ").concat(c," v ").concat(i-2*c," q 0 ").concat(c," -").concat(c," ").concat(c," h-").concat(o-2*c," q -").concat(c," 0 -").concat(c," -").concat(c," v-").concat(i-2*c)})),Pi(wi(e),"getPath",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getFocusedTarget();return"M 0 0 h ".concat(r," v ").concat(t," h -").concat(r," v -").concat(t)+n.map(e.getHolePath).join(" ")})),e}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Si(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props,r=t.onMaskClicked,n=t.stopEventsOnTargets,o=void 0!==n&&n,a=t.targets,c=this.getFocusedTarget(a.filter((function(e){var t=e.stopEventsOnTarget;return o||t})));return i().createElement("div",{style:{position:"fixed",height:"100vh",width:"100vw",top:0,left:0,zIndex:1e6,pointerEvents:"none"}},i().createElement(De.Z,null,(function(t){var n=t.width,o=t.height;return i().createElement("svg",{width:n,height:o,xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:e.getPath(o,n),fill:"rgba(0,0,0,0.7)",fillRule:"evenodd",pointerEvents:"visiblePainted",onClick:r}),c.map((function(t,r){return i().createElement("path",{key:r,d:e.getHolePath(t),fill:"transparent",pointerEvents:"visiblePainted"})})))})))}}])&&vi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(i().Component);function Ti(e){return Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ti(e)}function Ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Ti(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ti(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ci(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Pi(Ei,"propTypes",{targets:Qe().arrayOf(Qe().shape({selector:Qe().string,stopEventsOnTarget:Qe().bool})),padding:Qe().number,borderRadius:Qe().number,onMaskClicked:Qe().func,stopEventsOnTargets:Qe().bool}),Pi(Ei,"defaultProps",{targets:[],padding:0,borderRadius:8,onMaskClicked:function(){},stopEventsOnTargets:!1});var Ii=(0,Be.Z)((function(e){var t=e.sections;return 0===(void 0===t?[]:t).length}),(function(e){var t=e.add,r=void 0===t?function(){}:t;return{iconFit:!1,style:{position:"relative",width:"50%",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},glyph:"geostory",title:i().createElement(rt.Z,{msgId:"geostory.emptyTitle"}),description:i().createElement(rt.Z,{msgId:"geostory.emptyDescription"}),content:i().createElement(Qt,{addButtonClassName:"square-button-md",containerWidth:"100%",containerHeight:"100%",buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){r("sections",0,f.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){r("sections",0,f.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){r("sections",0,f.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveContent",onClick:function(){r("sections",0,f.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselContent",onClick:function(){r("sections",0,f.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){r("sections",0,f.tQ.MEDIA)}},{glyph:"code",tooltipId:"geostory.addWebPageSection",onClick:function(){r("sections",0,f.tQ.WEBPAGE)}}]})}}))(De.Z),Ai=function(e){var t=e.width;return e.mode===f.nl.EDIT?"":t<640?"sm":t>=640&&t<1024?"md":""};const xi=(0,_e.compose)(ze,Ye,function(e){var t=e.showFocusMask,r=void 0===t?function(){}:t,n=e.defaultTargets,o=void 0===n?{selector:".ms-geostory-map-editor"}:n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=a.padding,l=void 0===c?0:c,u=a.borderRadius,s=void 0===u?8:u,f=a.stopEventsOnTargets,p=void 0!==f&&f,d=a.onMaskClicked,y=void 0===d?function(){}:d;return(0,_e.branch)(r,(function(e){return(0,_e.nest)((function(e){var t=e.focusedContent,r=e.children;return i().createElement(i().Fragment,null,r,i().createElement(Ei,{targets:[t,o],padding:l,borderRadius:s,stopEventsOnTargets:p,onMaskClicked:y}))}),e)}))}({showFocusMask:function(e){var t=e.focusedContent,r=(void 0===t?{}:t).target;return(void 0===r?{}:r).id}}))((function(e){var t=e.mode,r=void 0===t?f.nl.VIEW:t,n=e.sections,o=void 0===n?[]:n,a=e.add,c=void 0===a?function(){}:a,l=e.onVisibilityChange,u=void 0===l?function(){}:l,s=e.updateCurrentPage,p=void 0===s?function(){}:s,d=e.editMedia,y=void 0===d?function(){}:d,m=e.editWebPage,b=void 0===m?function(){}:m,v=e.update,g=void 0===v?function(){}:v,h=e.remove,O=void 0===h?function(){}:h,w=e.focusedContent,S=e.isContentFocused,P=void 0!==S&&S,j=e.getSize,E=void 0===j?Ai:j,T=e.theme,C=void 0===T?{}:T,k=e.mediaViewer,I=e.contentToolbar,A=e.storyFonts,x=e.onSort,M=void 0===x?function(){}:x,D=e.isDrawEnabled,_=void 0!==D&&D,R=e.onEnableDraw,Z=void 0===R?function(){}:R,F=e.defaultMarkerStyle,L=e.highlightedMarkerStyle;return i().createElement(Me.Z,{className:"ms-cascade-story ms-".concat(r)},i().createElement(Ii,{sections:o,add:c},(function(e){var t,n=e.width,a=e.height,l=E({width:n,height:a,mode:r}),s=l?" ms-".concat(l):"",f="sm"===l,d=C&&jr()(C)&&C||{};return i().createElement("div",{id:"ms-sections-container",className:"ms-sections-container".concat(s," ms-sections-hyperlinks"),style:ki(ki({},null==d?void 0:d.general),P&&{overflow:"hidden"})},(null==d||null===(t=d.link)||void 0===t?void 0:t.color)&&i().createElement("style",{dangerouslySetInnerHTML:{__html:"\n            .ms-sections-hyperlinks .ms-text-editor-main a,\n            .ms-sections-hyperlinks .ms-text-wrapper a,\n            .ms-sections-hyperlinks .ms-text-editor-main a:link,\n            .ms-sections-hyperlinks .ms-text-wrapper a:link,\n            .ms-sections-hyperlinks .ms-text-editor-main a:visited,\n            .ms-sections-hyperlinks .ms-text-wrapper a:visited,\n            .ms-sections-hyperlinks .ms-text-editor-main a:active,\n            .ms-sections-hyperlinks .ms-text-wrapper a:active {\n                color: ".concat(d.link.color,";\n                opacity: 1;\n            }\n            .ms-sections-hyperlinks .ms-text-editor-main a:hover,\n            .ms-sections-hyperlinks .ms-text-wrapper a:hover {\n                color: ").concat(d.link.color,";\n                opacity: 0.75;\n            }\n        ")}}),o.map((function(e){var t=e.contents,l=void 0===t?[]:t,s=e.id,m=e.type,v=e.cover,h=e.background;return i().createElement(mi,{focusedContent:w,onVisibilityChange:u,add:c,editMedia:y,expandableMedia:f,editWebPage:b,updateCurrentPage:p,update:g,remove:O,key:s,id:s,viewHeight:a,viewWidth:n,type:m,mode:r,contents:l,cover:v,storyTheme:d,mediaViewer:k,contentToolbar:I,sections:o,storyFonts:A,onSort:M,isDrawEnabled:_,onEnableDraw:Z,background:h,defaultMarkerStyle:F,highlightedMarkerStyle:L})})))})))}));var Mi=r(957557),Di=r.n(Mi),_i=r(648860);function Ri(e){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ri(e)}function Zi(e){return function(e){if(Array.isArray(e))return Fi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Fi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fi(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Li.apply(this,arguments)}function Ni(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Ri(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ri(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ni(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bi=(0,wr.Z)(ur.Z);const Ui=(0,_e.compose)((0,a.connect)((0,c.P1)(q.jq,q.z7,(function(e,t){return{resources:e,isContentFocused:t}}))),(0,_e.withProps)((function(e){var t=e.resources,r=e.resourceId,n=e.map,o=void 0===n?{}:n,i=zi(zi({},o),{},{layers:(o.layers||[]).map((function(e){return e||void 0}))}),a=pr()(t,{id:r})||{};return{map:(0,f.oH)(Di()(a.data,["context"]),i)}})));var Wi=(0,_e.compose)((0,a.connect)((0,c.P1)(q.GC,(function(){return{focusedEl:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))),(0,_e.withProps)((function(e){var t=e.focusedEl,r=void 0===t?{}:t,n=r.resourceId,o=r.map;return{map:o||{},resourceId:n,disableReset:!o}}))),Gi=(0,_e.withHandlers)({onChangeMap:function(e){var t=e.update,r=e.focusedContent,n=void 0===r?{}:r;return function(e,r){t("".concat(n.path,".map.").concat(e),r,"merge")}},onChange:function(e){var t=e.update,r=e.focusedContent,n=void 0===r?{}:r;return function(e,r){t(n.path+".".concat(e),r,"merge")}}}),qi=(0,_e.withHandlers)({toggleEditing:function(e){var t=e.editMap,r=e.update,n=e.focusedContent;return function(){return r(n.path+".editMap",!t)}},onReset:function(e){var t=e.update,r=e.focusedContent,n=(void 0===r?{}:r).path,o=void 0===n?"":n;return function(){t(o+".map",void 0)}}}),Hi=function(e){return i().createElement(Bi,Li({glyph:"repeat",bsStyle:"primary",className:"square-button-md no-border",tooltipId:"geostory.contentToolbar.resetMap",confirmTitle:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.resetMapConfirm"}),confirmContent:i().createElement(rt.Z,{msgId:"geostory.contentToolbar.resetConfirmContent"})},e))},Vi=(0,_e.compose)((0,_e.withProps)((function(e){var t=e.disableReset,r=e.onReset,n=e.buttonItems,o=void 0===n?[]:n,a=e.map;return{buttons:[{renderButton:i().createElement(Hi,{disabled:t,onClick:r})}].concat(Zi(o.map((function(e){var t=e.Component;return{renderButton:i().createElement(t,{map:a})}}))))}})),_i.Z,(0,_e.withStateHandlers)((function(){return{editNode:void 0}}),{setEditNode:function(){return function(e){return{editNode:e}}},closeNodeEditor:function(){return function(){return{editNode:void 0}}}}),(0,_e.branch)((function(e){return!!e.editNode}),(0,_e.withProps)((function(e){var t=e.selectedNodes,r=void 0===t?[]:t,n=e.closeNodeEditor,o=void 0===n?function(){}:n;return{buttons:[{visible:1===r.length,tooltipId:"close",glyph:"1-close",onClick:o}]}})),(0,_e.withProps)((function(e){var t=e.selectedNodes,r=void 0===t?[]:t,n=e.setEditNode,o=void 0===n?function(){}:n,i=e.buttons,a=void 0===i?[]:i;return{buttons:[{visible:1===r.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){o(r[0])}}].concat(Zi(a))}})))),Yi=(0,_e.compose)((0,_e.withPropsOnChange)(["focusedContent"],(function(e){var t=e.map,r=e.focusedEl;return{contentMap:(void 0===r?{}:r).map,lastSavedMap:t}})),(0,_e.withPropsOnChange)(["map"],(function(e){var t=e.map,r=e.lastSavedMap;return{pendingChanges:!br()(r,t)}}))),Ki=(0,_e.compose)((0,_e.withProps)((function(e){var t=e.toggleEditing;return{CloseBtn:function(e){return i().createElement(ur.Z,Li({onClick:t},e))}}}))),Qi=(0,_e.mapPropsStream)((function(e){var t=(0,_e.createEventHandler)(),r=t.stream,n=t.handler;return e.pluck("map").distinctUntilChanged((function(e,t){return br()(e,t)})).switchMap((function(e){return r.map((function(t){return{map:zi(zi({},e),t)}})).startWith({map:e})})).combineLatest(e,(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map;return zi(zi({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{},{onMapViewLocalChanges:n,map:e})}))})),Xi=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},Ji=(0,_e.withHandlers)({onMapViewChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.update,r=e.editMap,n=void 0!==r&&r,o=e.onMapViewLocalChanges,i=e.map,a=void 0===i?{}:i,c=a.center,l=void 0===c?{}:c,u=a.zoom,s=a.mapStateSource,f=a.resolution,p=a.resetPanAndZoom;return function(e){var r=e.center,i=void 0===r?{}:r,a=e.zoom,c=e.mapStateSource,d=e.resolution,y=Xi(l.x,i.x)&&Xi(l.y,i.y);!n||y&&u===a?p?t("map",{center:l,zoom:u,mapStateSource:s,resolution:f,resetPanAndZoom:!1},"merge"):o({center:i,zoom:a,mapStateSource:c,resolution:d}):t("map",{center:i,zoom:a,mapStateSource:Fr()(),resolution:d,resetPanAndZoom:!1},"merge")}}}),$i=r(5993),ea=r(75927),ta=r(651768),ra=r(815135),na=["tabs","activeTab","width","setActiveTab"];function oa(){return oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oa.apply(this,arguments)}var ia=(0,ra.Z)(et.NavItem);var aa=r(979105),ca=r(743129),la=r(898631),ua=r(145869),sa=r(487320),fa=["map","onChangeMap"];var pa=(0,Po.Z)(["placeholder","options"])(ca.ZP);const da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,r=void 0===t?{zoomControl:!0,mapInfoControl:!1}:t,n=e.onChangeMap,o=void 0===n?function(){}:n,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,fa),c=r&&r.mapOptions||{},l=(0,f.kn)({mapOptions:c,zoomControl:!!j()(r.zoomControl)||r.zoomControl,mapInfoControl:!j()(r.mapInfoControl)&&r.mapInfoControl}),u=(0,la.kq)(r);return i().createElement(et.Form,{className:"ms-geostory-map-controls"},!u&&i().createElement(et.FormGroup,null,i().createElement(et.ControlLabel,null,i().createElement(rt.Z,{msgId:"geostory.mapEditor.zoom"})),i().createElement(ua.Z,{onChange:function(){var e=!l.zoomControl;o("zoomControl",e),o("mapOptions.interactions",{doubleClickZoom:e,shiftDragZoom:e,pinchZoom:e})},className:"ms-geostory-map-controls-switch",checked:l.zoomControl}),i().createElement(pa,{options:[{label:"geostory.mapEditor.topLeft",value:"topLeft"},{label:"geostory.mapEditor.topRight",value:"topRight"},{label:"geostory.mapEditor.bottomLeft",value:"bottomLeft"},{label:"geostory.mapEditor.bottomRight",value:"bottomRight"}],wrapperStyle:{marginTop:"10px"},value:l.mapOptions&&l.mapOptions.zoomPosition||"topLeft",clearable:!1,disabled:!l.zoomControl,onChange:function(e){return o("mapOptions.zoomPosition",e&&e.value?e.value:"topLeft")},placeholder:"geostory.builder.settings.titlePlaceholder"})),i().createElement(et.FormGroup,null,i().createElement(et.ControlLabel,null,i().createElement(rt.Z,{msgId:"geostory.mapEditor.pan"})),i().createElement(ua.Z,{onChange:function(){var e=!(l.mapOptions&&l.mapOptions.interactions&&l.mapOptions.interactions.dragPan);o("mapOptions.interactions",{dragPan:e,keyboardPan:e})},className:"ms-geostory-map-controls-switch",checked:l.mapOptions&&l.mapOptions.interactions&&l.mapOptions.interactions.dragPan})),!u&&i().createElement(et.FormGroup,null,i().createElement(et.ControlLabel,null,i().createElement(rt.Z,{msgId:"geostory.mapEditor.identify"})),i().createElement(ua.Z,{onChange:function(){var e=!l.mapInfoControl;o("mapInfoControl",e)},className:"ms-geostory-map-controls-switch",checked:l.mapInfoControl}),l.mapInfoControl&&!a.hideIdentifyOptions&&i().createElement(sa.Z,{disabled:!l.mapInfoControl,popoverMessage:"geostory.builder.settings.templateTooltip",infoFormat:l.mapOptions&&l.mapOptions.mapInfoFormat||"application/json",onInfoFormatChange:function(e){return o("mapOptions.mapInfoFormat",e)},selectProps:{wrapperStyle:{marginTop:10}}})))};var ya=r(616701),ma=(0,_e.withProps)((function(e){return{tabs:e.tabs||[{id:"toc",titleId:"geostory.mapEditor.toc",tooltipId:"geostory.mapEditor.toc",glyph:"1-layer",visible:!0,Component:ya.Z},{id:"settings",titleId:"geostory.mapEditor.settings",tooltipId:"geostory.mapEditor.settings",glyph:"wrench",visible:!0,Component:da}]}}));const ba=(0,_e.compose)((0,aa.Z)("activeTab","setActiveTab","toc"),ma);var va=(0,_e.compose)(ta.Z,(0,_e.withProps)((function(e){var t=e.selectedNode;return{title:t&&t.title}})),(0,$i.Z)("title"))((function(e){var t=e.title,r=e.description;return i().createElement("div",{className:"text-center"},i().createElement("div",{className:"mapstore-step-title"},t),i().createElement("div",{className:"mapstore-step-description"},r))})),ga=(0,ta.Z)(ea.Z),ha=ba((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tabs,r=void 0===t?[]:t,n=e.activeTab,o=(e.width,e.setActiveTab),a=void 0===o?function(){}:o,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,na);return i().createElement("div",{key:"ms-geostory-map-settings-navbar",className:"ms-row-tab"},i().createElement("div",null,i().createElement(et.Nav,{bsStyle:"tabs",activeKey:n,justified:!0},r.map((function(e){return i().createElement(ia,{key:"ms-tab-settings-"+e.id,tooltipId:e.tooltipId,eventKey:e.id,onClick:function(){return a(e.id)}},i().createElement(et.Glyphicon,{glyph:e.glyph}))})))),i().createElement("div",null,r.filter((function(e){return e.id&&e.id===n})).filter((function(e){return e.Component})).map((function(e){return i().createElement(e.Component,oa({},c,{key:"ms-geostory-tab-settings-body-"+e.id}))}))))}));const Oa=(0,_e.branch)((function(e){var t=e.focusedContent;return(void 0===t?{}:t).path}),(0,_e.compose)((0,_e.defaultProps)({isFocused:!0,editMap:!0}),Wi,Ui,Yi,Gi,qi,Vi,Ki))((function(e){var t=e.mode,r=void 0===t?f.nl.VIEW:t,n=e.isFocused,o=void 0!==n&&n,a=e.map,c=void 0===a?{}:a,l=e.onChange,u=void 0===l?function(){}:l,s=e.onChangeMap,p=void 0===s?function(){}:s,d=e.onNodeSelect,y=void 0===d?function(){}:d,m=e.selectedNodes,b=e.buttons,v=void 0===b?[]:b,g=e.editNode,h=e.closeNodeEditor,O=e.CloseBtn,w=void 0===O?function(){return null}:O,S=e.isDrawEnabled,P=e.hideIdentifyOptions;return r===f.nl.EDIT&&o?i().createElement("div",{key:"left-column",style:{order:-1,width:400,position:"relative"}},!S&&i().createElement(Me.Z,{className:"ms-geostory-map-editor",header:i().createElement("div",{className:"ms-geostory-map-editor-header text-center"},i().createElement(et.Row,null,i().createElement(et.Col,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},i().createElement(w,{glyph:"1-close",className:"pull-left on-close-btn square-button no-border ",tooltipId:"geostory.contentToolbar.closeMapEditing"}),i().createElement("div",{className:"mapstore-step-title"},i().createElement(rt.Z,{msgId:"geostory.mapEditor.configureMapOptions"})))),i().createElement(Ft.Z,{transitionProps:!1,btnGroupProps:{className:"ms-geostory-map-editor-toolbar"},btnDefaultProps:{className:"square-button-md no-border",bsStyle:"primary",noTooltipWhenDisabled:!0},buttons:v}))},!!g&&[i().createElement(va,{map:c,editNode:g}),i().createElement(ga,{closeNodeEditor:h,editNode:g,map:c,onChange:u})]||[i().createElement(ha,{map:c,onChange:u,onChangeMap:p,selectedNodes:m,onSelect:y,hideIdentifyOptions:P})])):null}));var wa=r(264721),Sa=r.n(wa),Pa=r(916788),ja=r(437034),Ea=r(452826),Ta=r(624262);function Ca(e){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(e)}function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ka.apply(this,arguments)}function Ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(r),!0).forEach((function(t){xa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ia(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xa(e,t,r){var n;return n=function(e,t){if("object"!=Ca(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ca(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ma=function(e){var t=function(){return i().createElement("div",{className:"ms-media-error"},i().createElement(et.Glyphicon,{glyph:"exclamation-sign"}))},r=function(e){var t=e.style,r=void 0===t?{}:t;return i().createElement("div",{style:r,className:"ms-media-loader"},i().createElement(vt.Z,{size:52}))};return function(n){var o={},a=n.sectionType;if((a===f.ID.PARAGRAPH||a===f.ID.IMMERSIVE||a===f.ID.CAROUSEL)&&n.type===f.Tr.IMAGE){var c=((null==n?void 0:n.imgHeight)||9)/((null==n?void 0:n.imgWidth)||16)*100;o={paddingTop:"".concat(c,"%")}}return n.lazy?i().createElement(bt,{key:n.loadingId,id:n.loadingId,debounceTime:n.debounceTime,loading:n.isLoading,onLoad:function(e){return n.onLoad(Aa(Aa({},n.loading),{},xa({},e,!1)))},loaderComponent:r,loaderStyle:o},i().createElement(e,ka({},n,{type:n.type,loaderComponent:r,loaderStyle:o,errorComponent:t}))):i().createElement(e,ka({},n,{key:n.id,type:n.mediaType||n.type,loaderComponent:r,errorComponent:t}))}};var Da=r(507848),_a=r(819983),Ra=r(323010),Za=["autoplay"],Fa=["type"];function La(e){return La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},La(e)}function Na(){return Na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Na.apply(this,arguments)}function za(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Ba(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ua(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ba(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=La(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=La(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==La(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ba(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Wa=(0,_e.branch)((function(e){return e.resourceId}),(0,_e.compose)((0,a.connect)((0,c.P1)(q.jq,(function(e){return{resources:e}}))),(0,_e.withProps)((function(e){var t=e.resources,r=e.resourceId;return(pr()(t,{id:r})||{}).data}))),(0,Be.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,r=void 0===t?"":t,n=e.sectionType;return!r&&n!==f.ID.TITLE&&!Sa()([f.ID.IMMERSIVE,f.ID.CAROUSEL],n)}),(function(){return{glyph:"picture"}})))(Ma(Pa.Z)),Ga=(0,_e.compose)((0,_e.branch)((function(e){return e.resourceId}),Ui),(0,_e.withProps)((function(e){var t=e.map,r=void 0===t?{}:t;return{map:Ua(Ua({},r),{},{layers:r.layers&&r.layers.map((function(e){if(e.tileMatrixSet&&r.sources){var t=(0,Ta.gv)(r.sources,e);return Ua(Ua({},e),t)}return e}))})}})),Da.Z,_a.Z,Qi,Ji,Ra.d)(Ma(ja.Z)),qa={image:Wa,map:Ga,video:(0,_e.branch)((function(e){return e.resourceId}),(0,_e.compose)((0,a.connect)((0,c.P1)(q.jq,(function(e){return{resources:e}}))),(0,_e.withProps)((function(e){var t=e.resources,r=e.resourceId,n=e.autoplay,o=(pr()(t,{id:r})||{}).data||{},i=o.autoplay;return Ua(Ua({},za(o,Za)),{},{autoplay:void 0!==n?n:i})}))),(0,Be.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,r=void 0===t?"":t,n=e.sectionType;return!r&&n!==f.ID.TITLE&&!Sa()([f.ID.IMMERSIVE,f.ID.CAROUSEL],n)}),(function(){return{glyph:"play"}})))(Ma(Ea.Z))};const Ha=function(e){var t=e.type,r=za(e,Fa),n=qa[t];return n?i().createElement(n,Na({type:t},r)):null};var Va=["resources"];function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ya.apply(this,arguments)}const Ka=(0,a.connect)((0,c.P1)(q.jq,(function(e){return{resources:e}})))((function(e){var t=e.resources,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Va);if(r.resourceId){var n=(pr()(t,{id:r.resourceId})||{}).data||{};return i().createElement(qr,Ya({},n,r))}return i().createElement(qr,r)}));var Qa=["story","mode","onAdd","messages","fontFamilies","storyFonts","webFont","onUpdate","onBasicError","onUpdateMediaEditorSetting","mediaEditorSettings"];function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xa.apply(this,arguments)}var Ja=function(e){var t,r=e.story,n=e.mode,a=void 0===n?f.nl.VIEW:n,c=e.onAdd,l=e.messages,s=e.fontFamilies,d=void 0===s?[]:s,y=e.storyFonts,m=void 0===y?[]:y,b=e.webFont,v=void 0===b?u():b,g=e.onUpdate,h=void 0===g?function(){}:g,O=e.onBasicError,w=void 0===O?function(){}:O,S=e.onUpdateMediaEditorSetting,P=e.mediaEditorSettings,j=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Qa),E=(0,o.useCallback)((function(e){return(0,p.S$)(l,e)}),[l]),T=function(e,t,r,n){return c(e,t,r,n?E(n):E)};return(0,o.useEffect)((function(){window.__geostory_interaction=function(e,t){"scrollTo"===e&&(0,f.M1)(t,{behavior:"smooth"})}}),[]),(0,o.useEffect)((function(){h("settings.theme.fontFamilies",d,"merge",{uniqueByKey:"family"}),P&&S(P)}),[]),(0,o.useEffect)((function(){m.length>0&&m.filter((function(e){var t=e.src;return t&&!document.head.querySelector("link[href='".concat(t,"']"))})).length>0&&v.load((0,f.bm)(m,(function(){}),(function(){return w({message:"geostory.builder.settings.webFontLoadError"})})))}),[m]),i().createElement(Me.Z,{className:"ms-geostory",columns:[i().createElement(Oa,Xa({},j,{buttonItems:null===(t=j.items)||void 0===t?void 0:t.filter((function(e){return"mapEditorToolbar"===e.target})),add:T,update:h,mode:a,hideIdentifyOptions:j.hideIdentifyOptions}))]},i().createElement(xi,Xa({},r,j,{storyFonts:(0,f._R)(m),add:T,update:h,mode:a,mediaViewer:Ha,contentToolbar:Ka})))};Ja.defaultProps={storyFonts:[],fontFamilies:[],onUpdateMediaEditorSetting:function(){}};const $a=(0,s.rx)("GeoStory",{component:(0,a.connect)((0,c.zB)({mode:q.eK,story:q.Kg,messages:Ae.Ps,focusedContent:q.FW,isContentFocused:q.z7,theme:function(e){var t;return(null===(t=(0,q.TQ)(e))||void 0===t?void 0:t.theme)||{}},storyFonts:q.mm,isDrawEnabled:q.HB}),{onAdd:y.IH,onUpdate:y.Vx,updateCurrentPage:y.RZ,onUpdateSetting:y.m7,remove:y.Od,onSort:y.pB,editMedia:m.Ql,editWebPage:y.o2,onBasicError:d.d,onUpdateMediaEditorSetting:y.Fu,onEnableDraw:y.EE})(Ja),reducers:{geostory:xe.Z},epics:n})},166190:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(227361),o=r.n(n),i=r(747037),a=r.n(i),c=r(281763),l=r.n(c),u=r(630998),s=r.n(u),f=r(313311),p=r.n(f),d=r(968630),y=r.n(d),m=r(701469),b=r.n(m),v=r(984596),g=r.n(v),h=r(545578),O=r.n(h),w=r(761868),S=r(192579),P=r(134990);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){var n;return n=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==j(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function e(t,r,n){var o=n.contents,i=n.background,a=n.id,c=n.resourceId,l=[],u=r+'{"id": "'.concat(a,'"}]');return c===t?[u]:(i&&i.resourceId===t&&l.push(u+".background"),o?o.reduce((function(r,n){return[].concat(k(r),k(e(t,u+".contents[",n)))}),l):l)},x={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1};const M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.D7:var r=t.id,n=t.path,i=t.position,c=t.element,u=(0,S.Ll)("currentStory.".concat(n),e),f=o()(e,u,[]),d=function(e,t){var r=e.length,n=0;return t||0===t||(n=r),a()(t)?n=s()(e,{id:t})+1:l()(t)&&(n=Math.min(t,e.length)),n}(f,i),m=f.slice();return m.splice(d,0,T({id:r},c)),(0,w.t8)(u,m,e);case P.mN:var v=t.id,h=t.mediaType,j=t.data;return(0,w.t8)("currentStory.resources",O()([{id:v,type:h,data:j}].concat(k(e.currentStory&&e.currentStory.resources||[])),"id"),e);case P.vb:return(0,w.t8)("mode",t.mode,e);case P.QK:var E=t.id,I=t.mediaType,M=t.data,D=(0,w.cc)("currentStory.resources",{id:E,type:I,data:M},{id:E},e);return I===S.Tr.MAP&&e.currentStory.sections.filter((function(e){return e.type!==S.ID.CAROUSEL})).reduce((function(e,t){return[].concat(k(e),k(A(E,"sections[",t)))}),[]).map((function(t){var r=(0,S.Ll)("currentStory.".concat(t,".map"),e);D=(0,w.t8)(r,void 0,D)})),D;case P.Ro:var _=t.id,R=t.mediaType,Z=(0,w.z6)("currentStory.resources",{id:_},e);return e.currentStory.sections.reduce((function(e,t){return[].concat(k(e),k(A(_,"sections[",t)))}),[]).map((function(t){var r=(0,S.Ll)("currentStory.".concat(t,".resourceId"),e);if(Z=(0,w.zN)(r,Z),R===S.Tr.MAP){var n=(0,S.Ll)("currentStory.".concat(t,".map"),e);Z=(0,w.zN)(n,Z)}})),Z;case P.lX:return(0,w.t8)("loading"===t.name?"loading":"loadFlags.".concat(t.name),t.value,(0,w.t8)("loading",t.value,e));case P.Dq:var F=t.path,L=(0,S.Ll)("currentStory.".concat(F),e),N=k(L),z=N.pop(),B=o()(e,N);return b()(B)?(a()(z)&&(z=parseInt(z,10)),(0,w.t8)(N,[].concat(k(B.slice(0,z)),k(B.slice(z+1))),e)):(0,w.zN)(L,e);case P.ij:var U,W,G,q,H,V=e.defaultSettings||{},Y=t.story.settings||V,K=(null===(U=Y)||void 0===U||null===(W=U.theme)||void 0===W?void 0:W.fontFamilies)||[],Q=null===(G=e.currentStory)||void 0===G||null===(q=G.settings)||void 0===q||null===(H=q.theme)||void 0===H?void 0:H.fontFamilies;return Q&&Q.length>0&&(Y=(0,w.t8)("theme.fontFamilies",O()([].concat(k(Q),k(K)),"family"),Y)),(0,w.t8)("currentStory",T(T({},t.story),{},{settings:Y}),e);case P.i2:return(0,w.t8)("selectedCard",e.selectedCard===t.card?"":t.card,e);case P.IY:var X=t.control,J=t.value;return(0,w.t8)("controls.".concat(X),J,e);case P.Zf:var $=t.resource,ee=e.currentStory&&e.currentStory.settings||{};return(0,w.qC)((0,w.t8)("resource",$),(0,w.t8)("currentStory.settings.storyTitle",ee.storyTitle||$.name))(e);case P.si:case P.KT:return(0,w.zN)("errors.save",e);case P.SW:return(0,w.t8)("errors.save",g()(t.error),e);case P.Mk:return(0,w.t8)("isCollapsed",!e.isCollapsed,e);case P.NZ:var te=o()(e,"currentStory.settings.".concat(t.option));return(0,w.t8)("currentStory.settings.".concat(t.option),!te,e);case P.c:var re=!e.isSettingsEnabled,ne=e.currentStory&&e.currentStory.settings||{};return(0,w.qC)((0,w.t8)("isSettingsEnabled",re),(0,w.t8)("oldSettings",re?ne:{}),(0,w.t8)("currentStory.settings",re?T({},ne):t.withSave?ne:e.oldSettings))(e);case P.wb:var oe=t.path,ie=t.mode,ae=t.options,ce=t.element,le=(0,S.Ll)("currentStory.".concat(oe),e),ue=o()(e,le);return y()(ue)&&y()(ce)&&"merge"===ie&&(ce=T(T({},ue),ce)),b()(ue)&&b()(ce)&&"merge"===ie&&(ce=null!=ae&&ae.uniqueByKey?O()([].concat(k(ue),k(ce)),ae.uniqueByKey):[].concat(k(ue),k(ce))),(0,w.t8)(le,ce,e);case P.km:return(0,w.t8)("currentStory.settings.".concat(t.prop),t.value,e);case P.un:if(t.columnId){var se=p()(e.currentStory.sections,(function(e){return p()(e.contents,{id:t.columnId})}));return se&&p()(se.contents,{id:t.columnId})?(0,w.t8)("currentPage",T(T({},e.currentPage),{},{columns:T(T({},e.currentPage.columns),{},C({},se.id,t.columnId))}),e):e}return(0,w.t8)("currentPage",T(T({},e.currentPage),{},{sectionId:t.sectionId}),e);case P.Cx:var fe=t.status,pe=t.target,de=t.selector,ye=void 0===de?"":de,me=t.hideContent,be=void 0!==me&&me,ve=t.path,ge=fe?{target:pe,selector:ye,hideContent:be,path:ve}:void 0;return(0,w.t8)("focusedContent",ge,e);case P.jr:return(0,w.t8)("pendingChanges",t.value,e);case P.ZY:return(0,w.t8)("updateUrlOnScroll",t.value,e);case P.EQ:return(0,w.t8)("mediaEditorSettings",t.mediaEditorSettings,e);case P.W$:if(t.sectionId){var he=p()(e.currentStory.sections,(function(e){return p()(e.contents,{id:t.showContentId})}));return he&&p()(he.contents,{id:t.showContentId})?(0,w.t8)("currentStory",T(T({},e.currentStory),{},{sections:(0,S.eI)(e.currentStory.sections,t)}),e):e}return e;case P.mk:return(0,w.t8)("drawOptions",t.drawOptions,e);default:return e}}},866113:(e,t,r)=>{"use strict";r.d(t,{$F:()=>j,eg:()=>E,Kg:()=>T,PR:()=>C,eK:()=>k,pu:()=>I,Lu:()=>x,W5:()=>M,TQ:()=>D,KR:()=>_,sY:()=>R,vv:()=>Z,jq:()=>F,Tr:()=>L,w:()=>N,CK:()=>z,u5:()=>B,z7:()=>U,FW:()=>W,GC:()=>G,yL:()=>q,_O:()=>V,JM:()=>Y,bU:()=>K,mm:()=>Q,X6:()=>X,NR:()=>J,I0:()=>$,eB:()=>ee,HB:()=>te});var n=r(227361),o=r.n(n),i=r(313311),a=r.n(i),c=r(630998),l=r.n(c),u=r(618446),s=r.n(u),f=r(944908),p=r.n(f),d=r(264721),y=r.n(d),m=r(192579),b=r(274621),v=r(324684);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){var n;return n=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==g(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){return function(t){return o()(t,(0,m.Ll)("geostory.currentStory.".concat(e),t),"")}},E=function(e){return o()(e,"geostory.isCollapsed",!1)},T=function(e){return o()(e,"geostory.currentStory")},C=function(e){return o()(e,"geostory.currentPage",{})},k=function(e){return o()(e,"geostory.mode")},I=function(e){return function(e){return o()(function(e){return o()(e,"geostory.resource")}(e),"canEdit",!1)}(e)||(0,b.qg)(e)},A=function(e){return o()(T(e),"sections",[])},x=function(e){return A(e).length>0},M=function(e){return o()(e,"geostory.isSettingsEnabled",!1)},D=function(e){var t=o()(T(e),"settings",{}),r=A(e).filter((function(e){var t=e.type;return y()([m.ID.CAROUSEL,m.ID.IMMERSIVE],t)})),n=t.checked||[],i=p()(n.map((function(e){return(0,m.Un)(r,e)})).filter((function(e){return e})));return S(S({},t),{},{expanded:i})},_=function(e){return!s()(o()(T(e),"settings",{}),function(e){return o()(e,"geostory.oldSettings",{})}(e))},R=function(e){return o()(e,"geostory.selectedCard","")},Z=function(e){return function(t){return j("".concat(e,".resourceId"))(t)}},F=function(e){return o()(T(e),"resources",[])},L=function(e){return function(t){return a()(F(t),{id:e})}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withImmersiveSection,r=void 0!==t&&t,n=e.includeAlways,i=void 0===n||n;return function(e){var t=A(e),n=function(e){return o()(D(e),"checked",[]).reduce((function(e,t){return S(S({},e),{},P({},t,!0))}),{})}(e);return t.reduce((function(e,t){if(t.type===m.ID.TITLE&&(i||n[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.PARAGRAPH&&(i||n[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.BANNER&&(i||n[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.CAROUSEL&&(i||n[t.id]))return[].concat(h(e),[t]);if(t.type===m.ID.IMMERSIVE){var o=t.contents&&t.contents.reduce((function(e,t){return i||n[t.id]?[].concat(h(e),[S(S({},t),{},{sectionId:e.id})]):e}),[])||[];return r?[].concat(h(e),[t],h(o)):[].concat(h(e),h(o))}return e}),[])}},z=function(e){return N({includeAlways:!0})(e).length},B=function(e){var t=function(e){var t=C(e);return l()(N({includeAlways:!0})(e),{id:t.columns&&t.columns[t.sectionId]?t.columns[t.sectionId]:t.sectionId||""})}(e);return-1!==t?t:l()(N({includeAlways:!0})(e),{id:C(e).sectionId})},U=function(e){return void 0!==o()(e,"geostory.focusedContent.target")},W=function(e){return o()(e,"geostory.focusedContent")},G=function(e){return j(o()(e,"geostory.focusedContent.path",""))(e)},q=function(e){return A(e).reduce((function(e,t){if(y()([m.ID.IMMERSIVE,m.ID.CAROUSEL],t.type)){var r=t.contents&&t.contents.map((function(e){return{label:e.title||"",value:e.id}}))||[];return[].concat(h(e),[S({label:t.title||"",value:t.id},t.type===m.ID.IMMERSIVE&&{children:r})])}return[].concat(h(e),[{label:t.title||"",value:t.id}])}),[])},H=function e(t,r){var n=r.contents,o=r.background;return r.resourceId===t||!(!o||o.resourceId!==t)||!!n&&!!a()(n,(function(r){return e(t,r)}))},V=function(e,t){return!!a()(A(e),(function(e){return H(t,e)}))},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.F)(e).includes("geostory/shared")},K=function(e){return o()(e,"geostory.updateUrlOnScroll",!1)},Q=function(e){return o()(e,"geostory.currentStory.settings.theme.fontFamilies",[])},X=function(e){return o()(e,"geostory.mediaEditorSettings")},J=function(e){var t;return((null===(t=T(e))||void 0===t?void 0:t.sections)||[]).filter((function(e){return e.type===m.ID.CAROUSEL}))},$=function(e){return function(t){return!!a()(J(t),{id:e})}},ee=function(e){return function(t){var r=a()(J(t)||[],{id:e});return(null==r?void 0:r.contents)||[]}},te=function(e){var t;return!(null==e||null===(t=e.geostory)||void 0===t||!t.drawOptions)}},443143:(e,t,r)=>{"use strict";r.d(t,{qH:()=>s,qj:()=>f,qq:()=>p,TM:()=>d});var n,o=r(717621),i=r.n(o),a=r(14841),c=r.n(a),l=r(264721),u=r.n(l),s=function(e,t,r,o){var i=e;isNaN(parseFloat(e))&&(i=n.hexToHsv(e)[0]);var a=.5/(r-1),c=t/(r-1),l=[];1===r&&(a=.5,c=t/2);for(var u=0;u<r;u++){var s=i+u*c-t/2,f=a*u+.3,p=f;o&&(s=o.h||s,f=o.s||f,p=o.v||p),l.push(n.hsvToHex(s,f,p,u))}return l},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return i()(e).toHexString()},p=function(e,t,r){var n=i()(e);return e&&n.setAlpha(c()(void 0!==t?t:n.getAlpha())).toRgbString()||r},d=function e(t){var r=Math.round,o=Math.random,i=[r(255*o()),r(255*o()),r(255*o())],a=n.rgbToHex(i);if(t)for(;u()(t,a)||"#000000"===a||"#FFFFFF"===a;)e(t);return a};n={decToHex:function(e){var t="0123456789ABCDEF",r=parseInt(e,10);return r=isNaN(r)?0:r,t.charAt(((r=r>255||r<0?0:r)-r%16)/16)+t.charAt(r%16)},rgbToHex:function(e,t,r){return e instanceof Array?n.rgbToHex(e[0],e[1],e[2]):"#"+n.decToHex(e)+n.decToHex(t)+n.decToHex(r)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,r){if(e instanceof Array)return n.rgbToHsv(e[0],e[1],e[2]);var o,i,a,c,l,u=e/255,s=t/255,f=r/255;switch(o=Math.min(Math.min(u,s),f),a=(i=Math.max(Math.max(u,s),f))-o,i){case o:c=0;break;case u:c=60*(s-f)/a,s<f&&(c+=360);break;case s:c=60*(f-u)/a+120;break;case f:c=60*(u-s)/a+240}return l=0===i?0:1-o/i,[Math.round(c),l,i]},distributedColorsHEX:function(e){for(var t=360/(e-1),r=[],o=function e(t,r,o){var i=e(t,r,o);return n.rgbToHex(i)},i=0;i<e;i++)r.push(o(t*i,.57,.63));return r},sameToneRangeColors:s,hsvToRgb:function(e,t,r){if(e instanceof Array)return n.hsvToRgb(e[0],e[1],e[2]);var o,i,a,c=Math.floor(e/60%6),l=e/60-c,u=r*(1-t),s=r*(1-l*t),f=r*(1-(1-l)*t);switch(c){case 0:o=r,i=f,a=u;break;case 1:o=s,i=r,a=u;break;case 2:o=u,i=r,a=f;break;case 3:o=u,i=s,a=r;break;case 4:o=f,i=u,a=r;break;case 5:o=r,i=u,a=s}return[n.realToDec(o),n.realToDec(i),n.realToDec(a)]},hsvToHex:function(e,t,r){var o=n.hsvToRgb(e,t,r);return n.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var r=n.hexToRgb(t);return n.rgbToHsv(r)}return null},hexToRgb:function(e){var t,r,n,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),r=o.charAt(2)+o.charAt(3),n=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(r,16),parseInt(n,16)]},colorToHexStr:f,colorToRgbaStr:p,generateRandomHexColor:d}},196958:(e,t,r)=>{"use strict";r.d(t,{t3:()=>A,WQ:()=>M,dM:()=>D,rK:()=>_,Lo:()=>Z,gP:()=>z,S9:()=>B,AV:()=>U,Sc:()=>W,a3:()=>G,IC:()=>q,wT:()=>H,cZ:()=>V,ek:()=>Y,Qc:()=>K,Cf:()=>X,dJ:()=>J,DR:()=>$,f1:()=>ee,Pf:()=>te,_Q:()=>re,fK:()=>ne,NJ:()=>ie,BF:()=>ae});var n=r(406557),o=r.n(n),i=r(92742),a=r.n(i),c=r(819873),l=r.n(c),u=r(630998),s=r.n(u),f=r(227361),p=r.n(f),d=r(701469),y=r.n(d),m=r(414293),b=r.n(m),v=r(747037),g=r.n(v),h=r(968630),O=r.n(h),w=r(264721),S=r.n(w),P=r(378889),j=r(285547);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){var n;return n=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==E(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(e,t,r){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return s()(e,(function(e){return e<=r&&r<e+t}))}(t,r,e);return-1===n?n:n*r+e-t[n]},x={id:"empty_row",get:function(){}},M=function(e,t){return t[A(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3?arguments[3]:void 0)]||k({},x)},D=function(e,t){return t[e]},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return y()(e)?e.reduce((function(e,t){return k(k({},e),{},I({},t.id,k(k({},e[t.id]),t.updated)))}),{}):{}},R=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=s()(t,r);return o>=0?t.map((function(e,t){return t===o?n:e})):[].concat(function(e){if(Array.isArray(e))return T(e)}(e=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n])},Z=function(e){return((0,P.getFeatureTypeProperties)(e)||[]).filter((function(e){return!(0,P.isGeometryType)(e)}))},F=function(e){var t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(n){return t<=n&&n<=r?0:Math.abs(n-e)})).reduce((function(e,t,r,n){return t>n[e]&&r||e}),0)},L=function(e,t){return t.filter((function(t,r){return r!==e}))},N=function(e,t,r){return e.filter((function(e,n){return n<t||n>=t+r}))},z=function(e,t,r,n){for(var o,i,a=e;a<=t&&void 0===o;a++)-1===A(a*n,r,n)&&(o=a);for(var c=t;c>=e&&void 0===i;c--)-1===A(c*n,r,n)&&(i=c);return[o,i].filter((function(e){return void 0!==e}))},B=function(e,t,r){var n=e.startPage,o=e.endPage,i=z(n,o,t,r),a=i[1]-i[0]+1;return{startIndex:i[0]*r,maxFeatures:a*r}},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.editable,i=void 0!==o&&o,a=n.sortable,c=void 0===a||a,l=n.resizable,u=void 0===l||l,s=n.filterable,f=void 0===s||s,p=n.defaultSize,d=void 0===p?200:p,y=n.options,m=void 0===y?[]:y,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},v=b.getEditor,g=void 0===v?function(){}:v,h=b.getFilterRenderer,O=void 0===h?function(){}:h,w=b.getFormatter,S=void 0===w?function(){}:w,P=b.getHeaderRenderer,E=void 0===P?function(){}:P,T=b.isWithinAttrTbl,C=void 0!==T&&T;return Z(e).filter((function(e){return!(t[e.name]&&t[e.name].hide)})).map((function(e){var n=m.find((function(t){return t.name===e.name})),o=r.find((function(t){return t.name===e.name})),a={sortable:c,key:e.name,width:t[e.name]&&t[e.name].width||d||void 0,name:t[e.name]&&t[e.name].label||e.name,description:(null==n?void 0:n.description)||"",title:(0,j.s8)((null==n?void 0:n.title)||(null==o?void 0:o.alias),e.name),headerRenderer:E(),showTitleTooltip:!(null==n||!n.description),resizable:u,editable:i,filterable:f,editor:g(e,o),formatter:S(e,o),filterRenderer:O(e,o)};return C&&(a.width=300),a}))},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},i=(0,P.findGeometryProperty)(r);return e.map((function(e){return k(k({},e),{},{events:e.events&&Object.keys(e.events).reduce((function(o,i){return k(k({},o),{},I({},i,(function(o,a){return e.events[i](t(a.rowIdx),a,r,n)})))}),{})},"geometry"===e.key&&i?{filterRenderer:o(k(k({},i),{},{localType:"geometry"}),i.name),filterable:!0,geometryPropName:i.name}:{})}))},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return Object.keys(e).reduce((function(i,a){return k(k({},i),{},I({},a,(function(){for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return e[a].apply(e,c.concat([t,r,n,o]))})))}),{})},q=function(e,t){return!!(0,P.getPropertyDescriptor)(e,t)},H=function(e,t,r){return(0,P.isValidValueForPropertyName)(e,(o=r,"geometry"===(n=t)?function(e){return p()((0,P.findGeometryProperty)(e),"name")}(o):n),r);var n,o},V=function(){return"EPSG:4326"},Y=function(e,t,r){return function(n){return t.length>0?n._new:!e||e&&!!r[n.id]}},K=function(e){return t=e,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[e.id]||{},n=Object.keys(r).filter((function(e){return"geometry"!==e})).reduce((function(e,t){return k(k({},e),{},I({},t,r[t]))}),{}),o=Object.keys(r).filter((function(e){return"geometry"===e})).reduce((function(e,t){return k(k({},e),{},I({},t,r[t]))}),{}),k(k(k({},t),o),{},{properties:k(k({},t&&t.properties||{}),n)});var t,r,n,o},Q=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?\s*(-?\d*\.?\d*)\s*/,X=function(e,t){if("string"===t)return{newVal:a()(e),operator:"ilike"};var r,n=Q.exec(e),o="=";return n?("!=="===(o=n[1]||"=")|"!="===o?o="<>":"==="===o|"=="===o&&(o="="),r=parseFloat(n[2])):r=parseFloat(e,10),{newVal:r,operator:o}},J=function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.attribute,a=n.operator,c=n.value,l=n.type,u=n.filters,s=void 0===u?[]:u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=(null===(e=f.groupFields)||void 0===e?void 0:e.filter((function(e){return i!==e.id&&1!==e.id})))||[];if(("string"===l||"number"===l)&&g()(c)&&-1!==(null==c?void 0:c.indexOf(","))){var d,m,v,h=(null==c?void 0:c.split(",").filter(o()))||[],O=(null===(d=f.filterFields)||void 0===d?void 0:d.filter((function(e){return i!==e.attribute})))||[];return k(k({},f),{},{groupFields:p.concat([{id:i,logic:"OR",groupId:1,index:0}]),filters:(null!==(m=null==f||null===(v=f.filters)||void 0===v?void 0:v.filter((function(e){return i!==(null==e?void 0:e.attribute)})))&&void 0!==m?m:[]).concat(s),filterFields:O.concat(h.map((function(e){var t=X(e,l),r=t.operator,n=t.newVal;return{attribute:i,rowId:Date.now(),type:l,groupId:i,operator:r,value:n}}))),spatialField:f.spatialField,spatialFieldOperator:f.spatialFieldOperator})}return k(k({},f),{},{groupFields:p.concat([{id:1,logic:"AND",groupId:1,index:0}]),filters:(null!==(t=null==f||null===(r=f.filters)||void 0===r?void 0:r.filter((function(e){return i!==(null==e?void 0:e.attribute)})))&&void 0!==t?t:[]).concat(s),filterFields:"geometry"===l?f.filterFields:b()(c)&&"isNull"!==a?(f.filterFields||[]).filter((function(e){return e.attribute!==i})):R(f.filterFields||[],{attribute:i},{attribute:i,rowId:Date.now(),type:l,groupId:1,operator:a,value:c}),spatialField:"geometry"===l?c:f.spatialField,spatialFieldOperator:y()(c)?"OR":""})},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,r=void 0===t?0:t,n=e.maxFeatures,o=void 0===n?1:n,i=e.totalFeatures,a=void 0===i?0:i,c=e.resultSize;return{page:Math.ceil(r/o),resultSize:c,size:o,total:a,maxPages:Math.ceil(a/o)-1}},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.endPage,n=t.startPage,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.pages,a=o.features,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=c.size,s=c.maxStoredPages,f=c.startIndex,d=z(n,r,i,u),y=d[1]-d[0]+1,m=p()(e,"features",[]);m.length!==y*u&&(m=m.concat(l()(Array(y*u-m.length>0?y*u-m.length:m.length),!1)));var b=i,v=a,g=b.length+y-Math.max(s,r-n+1);if(g>0)for(var h=n*u,O=r*u,w=h+(O-h)/2,S=0;S<g;S++){var P=F(w,i,h,O),j=P*u;b=L(P,b),v=N(a,j,u)}for(var E=[],T=0;T<y;T++)E.push(f+u*T);return{pages:b.concat(E),features:v.concat(m)}},te=function(e,t){var r=void 0;return t&&e&&(r=e.filter((function(e){var r,n;return!(null!==(r=null===(n=t[e.attribute])||void 0===n?void 0:n.hide)&&void 0!==r&&r)})).map((function(e){return e.attribute}))).length===e.length&&(r=void 0),r},re=function(e){return null==e?void 0:e.map((function(e){return O()(e)?e.name:e}))},ne={"date-time":"YYYY-MM-DDTHH:mm:ss[Z]",time:"HH:mm:ss[Z]",date:"YYYY-MM-DD[Z]"},oe=["wms","wfs"],ie=function(e){return S()(oe,null==e?void 0:e.type)},ae=function(e){return!(null!=e&&e.disableFeaturesEditing)&&ie(e)}},192579:(e,t,r)=>{"use strict";r.d(t,{gg:()=>M,Ln:()=>D,ID:()=>_,bT:()=>R,tQ:()=>Z,Tr:()=>F,nl:()=>L,ZX:()=>N,lg:()=>z,w:()=>B,cy:()=>U,lt:()=>W,M1:()=>G,kn:()=>H,oH:()=>V,Aq:()=>K,nq:()=>Q,Ll:()=>X,ln:()=>J,Un:()=>$,NC:()=>ee,t4:()=>te,NP:()=>re,bm:()=>ne,_R:()=>oe,Km:()=>ie,of:()=>ae,u0:()=>ce,eI:()=>le,Yh:()=>ue,c0:()=>se});var n=r(227361),o=r.n(n),i=r(630998),a=r.n(i),c=r(30084),l=r.n(c),u=r(701469),s=r.n(u),f=r(252628),p=r.n(f),d=r(763105),y=r.n(d),m=r(682492),b=r.n(m),v=r(747037),g=r.n(v),h=r(513218),O=r.n(h),w=r(264721),S=r.n(w),P=r(313880),j=r.n(P),E=r(455877),T=r.n(E);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==C(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M="EMPTY_CONTENT",D={CASCADE:"cascade"},_={TITLE:"title",PARAGRAPH:"paragraph",IMMERSIVE:"immersive",BANNER:"banner",CAROUSEL:"carousel"},R={TEXT:"text",MEDIA:"media",WEBPAGE:"webPage",COLUMN:"column"},Z={MEDIA:"template-media",WEBPAGE:"template-web-page"},F={IMAGE:"image",MAP:"map",VIDEO:"video"},L={EDIT:"edit",VIEW:"view"},N={SHOW_SAVE:"save.show",SHOW_DELETE:"delete.show",LOADING:"loading"},z={StoryTypes:p()(D),SectionTypes:p()(_),MediaTypes:p()(F),Modes:p()(L)},B=function(e){var t=e.theme,r=void 0===t?{}:t,n=e.align,o=void 0===n?"center":n,i=e.size,a=void 0===i?"full":i,c=(null==r?void 0:r.value)||g()(r)&&r,l=c&&"custom"!==c&&g()(c)&&" ms-".concat(c)||"",u=" ms-align-".concat(o),s=a.split(",").map((function(e){return" ms-size-".concat(e)})).join("");return"".concat(l).concat(u).concat(s)},U=function(e){var t=e.theme,r=void 0===t?{}:t,n=e.storyTheme;if(""===r||""===(null==r?void 0:r.value))return O()(n)?n:{};var o=null==r?void 0:r.value,i=null==r?void 0:r[o];return O()(i)&&i||{}},W=function(e){return e.type===_.PARAGRAPH&&e&&s()(e.contents)&&e.contents.length&&s()(e.contents[0].contents)&&e.contents[0].contents.length&&e.contents[0].contents[0].type===R.MEDIA},G=function(e,t){var r=function(e){var t=e.split("?");return 2===t.length?t[0]:e}(e),n=document.getElementById(r);n&&n.scrollIntoView(t)},q={zoomControl:!0,mapInfoControl:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!0}}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b()({},q,e)},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b()({},e,t)},Y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RegExp(t,"i");return!t||r.test(e)},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RegExp(t,"i");return y()(e,(function(e){return Y(e.data&&(e.data.title||e.data.name),t,r)||Y(e.data&&e.data.description,t,r)}))},Q=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};switch(t){case _.TITLE:return{id:T()(),type:_.TITLE,title:r("geostory.builder.defaults.titleTitle"),cover:!1,contents:[{id:T()(),type:R.TEXT,html:"",size:"large",align:"center",theme:"",background:{fit:"cover",size:"full",align:"center"}}]};case _.BANNER:return{id:T()(),type:_.BANNER,title:r("geostory.builder.defaults.titleBanner"),cover:!1,contents:[{id:T()(),background:{fit:"cover",size:"full",align:"center"}}]};case _.PARAGRAPH:return{id:T()(),type:_.PARAGRAPH,title:r("geostory.builder.defaults.titleParagraph"),contents:[{id:T()(),type:R.COLUMN,size:"full",align:"center",contents:[{id:T()(),type:R.TEXT,html:""}]}]};case _.IMMERSIVE:return{id:T()(),type:_.IMMERSIVE,title:r("geostory.builder.defaults.titleImmersive"),contents:[e(R.COLUMN,r("geostory.builder.defaults.titleImmersiveContent"))]};case _.CAROUSEL:return{id:T()(),type:t,title:r("geostory.builder.defaults.titleGeocarousel"),template:t,background:{fit:"cover",size:"full",align:"center"},contents:[e(R.COLUMN,r("geostory.builder.defaults.titleGeocarouselContent"))]};case Z.MEDIA:return{id:T()(),type:_.PARAGRAPH,title:r("geostory.builder.defaults.titleMedia"),contents:[{id:T()(),type:R.COLUMN,contents:[{id:T()(),type:R.MEDIA,size:"large",align:"center"}]}]};case Z.WEBPAGE:return{id:T()(),type:_.PARAGRAPH,title:r("geostory.builder.defaults.titleWebPageSection"),contents:[{id:T()(),type:R.COLUMN,contents:[{id:T()(),type:R.WEBPAGE,size:"h-medium,v-medium",align:"center"}]}]};case R.COLUMN:return{id:T()(),type:R.COLUMN,align:"left",size:"small",theme:"",title:r,contents:[{id:T()(),type:R.TEXT,html:""}],background:{fit:"cover",size:"full",align:"center"}};case R.TEXT:return{id:T()(),type:R.TEXT,title:r("geostory.builder.defaults.titleText"),html:""};case R.IMAGE:return{id:T()(),type:t,title:r("geostory.builder.defaults.titleMedia"),size:"full",align:"center"};case R.WEBPAGE:return{id:T()(),type:t,title:r("geostory.builder.defaults.titleWebPage"),size:"h-full,v-medium",align:"center"};case R.MEDIA:return{id:T()(),type:t,title:r("geostory.builder.defaults.titleUnknown"),size:"large",align:"center"};default:return{id:T()(),type:t,title:r("geostory.builder.defaults.titleUnknown"),size:"full",align:"center"}}},X=function(e,t){return l()(e).reduce((function(e,r){if(r&&0===r.indexOf("{")){var n=JSON.parse(r),i=o()(t,e),c=a()(i,n);return c>=0?[].concat(A(e),[c]):e}return[].concat(A(e),[r])}),[])},J=function(e,t){return l()(e).reduce((function(e,r){var n=e.path,i=e.flatPath;if(r&&0===r.indexOf("{")){var c=JSON.parse(r),l=o()(t,n),u=a()(l,c);if(u>=0){var s=l[u],f=s.id,p=s.type;return{path:[].concat(A(n),[u]),flatPath:[].concat(A(i),[{id:f,type:n[n.length-1],contentType:p}])}}return{path:n,flatPath:i}}return{path:[].concat(A(n),[r]),flatPath:i}}),{path:[],flatPath:[]})},$=function(e,t){return e.reduce((function(e,r){return S()(r.contents.map((function(e){return e.id})),t)?r.id:e}),null)},ee=function(e){return e.type===_.PARAGRAPH&&!1!==e.editURL&&e&&s()(e.contents)&&e.contents.length&&s()(e.contents[0].contents)&&e.contents[0].contents.length&&e.contents[0].contents[0].type===R.WEBPAGE&&!1!==e.contents[0].contents[0].editURL},te=function(e,t){if(t)switch(e){case"small":return.4*t;case"medium":return.6*t;case"large":return.8*t;default:return t}return 0},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!t.includes(r))return null;var i=t.substring(t.indexOf(r)).split("/");return n&&r?i.length>1&&i[2]&&Number(i[0])===r?5===i.length?j()(e,"".concat(i[2],"/column/").concat(i[4]),"".concat(n)):j()(e,"".concat(i[2]),"".concat(n)):(t.includes("shared"),""!==i[1]?"".concat(e,"/section/").concat(n):"".concat(e,"section/").concat(n)):!n&&o&&g()(o)&&"EMPTY"!==o&&i.length>1?t.includes("shared")&&!i[2]?e:5===i.length?j()(e,"".concat(i[4]),"".concat(o)):"".concat(e,"/column/").concat(o):null},ne=function(e,t,r){var n={active:t,inactive:r,custom:{families:[],urls:[]}};return e.filter((function(e){return!!e.src})).forEach((function(e,t){n.custom.families[t]=e.family,n.custom.urls[t]=e.src})),n},oe=function(e){return e.map((function(e){return e.family}))},ie=["inherit","Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"],ae=function(){return window.location.href.match("geostory-embedded")?"geostoryEmbedded":"geostory"},ce=function(e){var t=function(e){try{var t;return null===(t=JSON.parse(e))||void 0===t?void 0:t.id}catch(e){return null}},r=l()(e)||[];return{sectionId:t(null==r?void 0:r[1]),contentId:t(null==r?void 0:r[3]),innerContentId:t(null==r?void 0:r[5])}},le=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return e.sectionId===t.id?I(I({},t),{},{contents:(t.contents||[]).map((function(t){return I(I({},t),{},{hideContent:t.id!==e.showContentId})}))}):t}))};function ue(e){var t=e.id,r=e.contents,n=e.featureStyle;return I(I({visibility:!0,handleClickOnLayer:!0},e.layerOptions),{},{id:"geostory-vector-".concat(t),name:"geostory-vector-".concat(t),type:"vector",features:r.reduce((function(e,r,o){return[].concat(A(e),A(((null==r?void 0:r.features)||[]).map((function(e){return I(I({},e),{},{properties:I(I({},e.properties),{},{title:r.title,sectionId:t,contentId:r.id}),contentRefId:r.id},n&&{style:n({content:r,feature:e},o)})}))||[]))}),[]).reverse()})}var se=function(e,t,r,n,o){return I(I(I({},e),{},{iconText:"".concat(a()(t,(function(e){var t=e.id;return r.id===t}))+1)},o.style),{},{highlight:n===r.id})}},433506:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _font_awesome_json__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(271317),_components_mapcontrols_annotations_img_markers_default_png__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(494956),_components_mapcontrols_annotations_img_markers_default_png__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_components_mapcontrols_annotations_img_markers_default_png__WEBPACK_IMPORTED_MODULE_1__),_components_mapcontrols_annotations_img_markers_shadow_png__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(673866),_components_mapcontrols_annotations_img_markers_shadow_png__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_components_mapcontrols_annotations_img_markers_shadow_png__WEBPACK_IMPORTED_MODULE_2__);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var cssJSON={fontawesome:_font_awesome_json__WEBPACK_IMPORTED_MODULE_0__},baseImage=new Image,shadowImage=new Image;baseImage.src=_components_mapcontrols_annotations_img_markers_default_png__WEBPACK_IMPORTED_MODULE_1___default(),shadowImage.src=_components_mapcontrols_annotations_img_markers_shadow_png__WEBPACK_IMPORTED_MODULE_2___default();var glyphs={},loadGlyphs=function loadGlyphs(font){var fontJSON=cssJSON[font];return Object.keys(fontJSON).reduce((function(acc,key){return _objectSpread(_objectSpread({},acc),{},_defineProperty({},key,eval("'\\u"+fontJSON[key]+"'")))}),{})},extraMarkers={size:[36,46],shadowSize:[30,42],margin:[3,2],colors:["red","orange-dark","orange","yellow","blue-dark","blue","cyan","purple","violet","pink","green-dark","green","green-light","black"],shapes:["circle","square","star","penta"],icons:[_components_mapcontrols_annotations_img_markers_default_png__WEBPACK_IMPORTED_MODULE_1___default(),_components_mapcontrols_annotations_img_markers_shadow_png__WEBPACK_IMPORTED_MODULE_2___default()],images:[shadowImage,baseImage]},getOffsets=function(e,t){return[-extraMarkers.colors.indexOf(e)*extraMarkers.size[0],-extraMarkers.shapes.indexOf(t)*extraMarkers.size[1]]},getGlyphOffset=function(e){return["square","penta"].includes(e)?6:5},MarkerUtils={extraMarkers:_objectSpread(_objectSpread({},extraMarkers),{},{getOffsets,markerToDataUrl:function(e){var t=e.iconColor,r=e.iconShape,n=e.iconGlyph;if(MarkerUtils.extraMarkers.images){var o=document.createElement("canvas"),i=extraMarkers.margin,a=extraMarkers.size,c=a[0]-2*i[0],l=a[1]-2*i[1];o.width=c,o.height=l;var u=o.getContext("2d");if(r){var s=getOffsets(t,r);u.drawImage(extraMarkers.images[0],0,0,c,l),u.drawImage(extraMarkers.images[1],Math.abs(s[0]),Math.abs(s[1]),a[0],a[1],-i[0],-i[1],a[0],a[1])}n&&(u.font="14px FontAwesome",u.fillStyle="rgb(255,255,255)",u.textBaseline="middle",u.textAlign="center",u.fillText(MarkerUtils.getGlyphs("fontawesome")[n]||"",c/2,l/2-getGlyphOffset(r)));var f=o.toDataURL("image/png");return o=null,f}return null},matches:function(e,t){return e.iconColor===t.color&&e.iconShape===t.shape},getStyle:function(e){return{iconColor:e.color,iconShape:e.shape}},getGrid:function(){return extraMarkers.shapes.map((function(e){return{name:e,markers:extraMarkers.colors.map((function(t){return{name:t,width:extraMarkers.size[0],height:extraMarkers.size[1],offsets:getOffsets(t,e),style:{color:t,shape:e},thumbnailStyle:{backgroundImage:"url("+extraMarkers.icons[0]+")",width:extraMarkers.size[0]+"px",height:extraMarkers.size[1]+"px",backgroundPositionX:getOffsets(t,e)[0],backgroundPositionY:getOffsets(t,e)[1],cursor:"pointer"}}}))}}))}}),getGlyphs:function(e){return glyphs[e]||(glyphs[e]=loadGlyphs(e)),glyphs[e]}};MarkerUtils.markers={extra:MarkerUtils.extraMarkers};const __WEBPACK_DEFAULT_EXPORT__=MarkerUtils},531398:(e,t,r)=>{"use strict";r.d(t,{d:()=>o});var n=r(197395),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"notification.warning":t,o=e.autoDismiss,i=void 0===o?6:o,a=e.position,c=void 0===a?"tc":a,l=e.message,u=void 0===l?"Error":l;return(0,n.vU)({title:r,autoDismiss:i,position:c,message:u})}},611847:(e,t,r)=>{"use strict";r.d(t,{ij:()=>v,w0:()=>g,vl:()=>h,K2:()=>O,Nw:()=>w});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),c=r(747037),l=r.n(c),u=r(618446),s=r.n(u),f=r(189734),p=r.n(f),d=r(313311),y=r.n(d),m=r(964210);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),r=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[4]=n.port,r[5]=e}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:e.slice(r[0].length);var o,i,a=(i=6,function(e){if(Array.isArray(e))return e}(o=r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(o,i)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[1],l=a[3],u=a[4],s=a[5],f=0===s.indexOf("/")?s.split("/")[1]:"";return{protocol:c,domain:l,port:u,rootPath:s,applicationRootPath:f}},g=function(e,t){var r=a()(e)?e[0]:e,n=a()(t)?t[0]:t;if(r===n)return!0;if(!r||!n)return!1;if(!l()(r)||!l()(n))return!1;var i=o().parse(r),c=o().parse(n),u=v(r),f=v(n),d=u.protocol===f.protocol,y=u.domain===f.domain,m=u.port===f.port,b=i.pathname===c.pathname,g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var r=e?e.split("&").filter((function(e){return!!e})):[],n=t?t.split("&").filter((function(e){return!!e})):[];return s()(p()(r),p()(n))}(i.query,c.query);return d&&m&&y&&b&&g},h=function(e){return m.Qc(e)},O=function(e){return new RegExp(arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/).test(e)},w=function(e,t){var r=new RegExp(arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/).test(e);if(!r)return!1;if(r&&!t)return!0;if(r&&t){var n=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return y()(n,e)})).length}return!1}},166287:(e,t,r)=>{"use strict";r.r(t),r.d(t,{flattenFeatures:()=>T,isAttrPresent:()=>I,isStrokeStyle:()=>A,isFillStyle:()=>x,isTextStyle:()=>M,isCircleStyle:()=>D,isMarkerStyle:()=>_,isSymbolStyle:()=>R,getStylerTitle:()=>Z,geometryFunctions:()=>F,getGeometryFunction:()=>L,registerGeometryFunctions:()=>N,addOpacityToColor:()=>z,hashCode:()=>B,registerStyle:()=>W,setSymbolsStyles:()=>G,fetchStyle:()=>q,getSymbolsStyles:()=>H,hashAndStringify:()=>V,domNodeToString:()=>Y,createSvgUrl:()=>K,createStylesAsync:()=>Q,getStyleParser:()=>X,layerToGeoStylerStyle:()=>$,getStyle:()=>ee});var n=r(414293),o=r.n(n),i=r(385564),a=r.n(i),c=r(441609),l=r.n(c),u=r(984596),s=r.n(u),f=r(606162),p=r.n(f),d=r(701469),y=r.n(d),m=r(761868),b=r(443143),v=r(409669),g=r.n(v),h=r(433506);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function w(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==O(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=y()(e)?e:null==e?void 0:e.features;return a()((r||[]).map((function(e){return"FeatureCollection"===e.type?e.features||[]:[e]}))).map(t)};function C(e,t){return new(0,e.default)(t)}var k={sld:function(){return r.e(12290).then(r.t.bind(r,212290,23)).then(C)},css:function(){return r.e(11125).then(r.t.bind(r,411125,23)).then(C)},openlayers:function(){return Promise.all([r.e(18672),r.e(52043),r.e(15265),r.e(40271),r.e(92322),r.e(47202),r.e(69141),r.e(51554),r.e(80651),r.e(22343),r.e(30049),r.e(3526)]).then(r.bind(r,903526)).then(C)},"3dtiles":function(){return r.e(41547).then(r.bind(r,641547)).then(C)},cesium:function(){return Promise.all([r.e(40271),r.e(65792),r.e(92322),r.e(29379),r.e(80651),r.e(45477),r.e(84182),r.e(30049),r.e(33122)]).then(r.bind(r,833122)).then(C)},leaflet:function(){return Promise.all([r.e(40271),r.e(92322),r.e(80651),r.e(45243),r.e(30049),r.e(7809),r.e(54175)]).then(r.bind(r,810375)).then(C)},geostyler:function(){return r.e(45688).then(r.bind(r,645688)).then(C)}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(arguments.length>1?arguments[1]:void 0).filter((function(t){return!o()(e[t])})).length>0},A=function(){return I(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["color","opacity","dashArray","dashOffset","lineCap","lineJoin","weight"])},x=function(){return I(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["fillColor","fillOpacity"])},M=function(){return I(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["label","font","fontFamily","fontSize","fontStyle","fontWeight","textAlign","textRotationDeg"])},D=function(){return I(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["radius"])},_=function(){return I(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["iconGlyph","iconShape","iconUrl"])},R=function(){return I(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:["symbolUrl"])},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(e)?"Marker":R(e)?"Symbol":M(e)?"Text":D(e)||"Circle Style"===e.title?"Circle":x(e)?"Polygon":A(e)?"Polyline":""},F={centerPoint:{type:"Point",func:function(){}},lineToArc:{type:"LineString",func:function(){}},startPoint:{type:"Point",func:function(){}},endPoint:{type:"Point",func:function(){}}},L=function(e,t){return F[e]&&F[e][t]},N=function(e,t,r){if(!(e&&t&&r))throw new Error("specify all the params: functionName, func, type");F[e]={func:t,type:r}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#FFCC33",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;return(0,m.t8)("a",t,e)},B=function(e){var t,r=0;if(0===e.length)return r;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r},U={},W=function(e,t){if(!e||!t)throw new Error("specify all the params: sha, style");U[e]=t},G=function(){U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style";return U[e]&&U[e][t]},H=function(){return U},V=function(e){if(e)return B(JSON.stringify(e));throw new Error("hashAndStringify: specify mandatory params: style")},Y=function(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return R(e)&&e.symbolUrl?g().get(t,{"Content-Type":"image/svg+xml;charset=utf-8"}).then((function(t){var r=window.URL||window.webkitURL||window,n=(new DOMParser).parseFromString(t.data,"image/svg+xml").firstElementChild;n.setAttribute("fill",e.fillColor||"#FFCC33"),n.setAttribute("fill-opacity",o()(e.fillOpacity)?.2:e.fillOpacity),n.setAttribute("stroke",(0,b.qq)(e.color||"#FFCC33",o()(e.opacity)?1:e.opacity)),n.setAttribute("stroke-opacity",o()(e.opacity)?1:e.opacity),n.setAttribute("stroke-width",e.weight||1),n.setAttribute("width",e.size||32),n.setAttribute("height",e.size||32),n.setAttribute("stroke-dasharray",e.dashArray||"none");var i=new Blob([Y(n)],{type:"image/svg+xml;charset=utf-8"}),a=r.createObjectURL(i),c=document.createElement("canvas");c.width=e.size,c.height=e.size;var l=c.getContext("2d"),u=new Image;u.src=a;var s="",f=V(e);return u.onload=function(){try{l.drawImage(u,c.width/2-u.width/2,c.height/2-u.height/2),s=c.toDataURL("image/png"),c=null,W(f,{style:E(E({},e),{},{symbolUrlCustomized:a}),base64:s})}catch(e){return}},W(f,{style:E(E({},e),{},{symbolUrlCustomized:a}),svg:n,base64:s}),a})).catch((function(){return r(570898)})):new Promise((function(e){e(null)}))},Q=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return R(e)&&!q(V(e))?K(e,e.symbolUrl||e.symbolUrlCustomized).then((function(t){return t?E(E({},e),{},{symbolUrlCustomized:t}):q(V(e))})).catch((function(){return E(E({},e),{},{symbolUrlCustomized:r(570898)})})):new Promise((function(t){t(R(e)?q(V(e)):e)}))}))},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sld";return k[e]?k[e]():Promise.resolve(null)};function J(e,t){var r,n;if(M(e)&&null!=t&&null!==(r=t.properties)&&void 0!==r&&r.valueText){var o=(e.font||"").split(" ");return Promise.resolve({kind:"Text",label:t.properties.valueText,font:[o[o.length-1]],size:parseFloat(e.fontSize),fontStyle:e.fontStyle,fontWeight:e.fontWeight,color:e.fillColor,haloColor:e.color,haloWidth:1,msHeightReference:"none",msBringToFront:!0})}if("Mark"===e.symbolizerKind)return Promise.resolve({kind:"Mark",color:e.fillColor,fillOpacity:e.fillOpacity,strokeColor:e.color,strokeOpacity:e.opacity,strokeWidth:e.weight,radius:null!==(n=e.radius)&&void 0!==n?n:10,wellKnownName:"Circle",msHeightReference:"none",msBringToFront:!0});if(I(e,["iconUrl"])&&!e.iconGlyph&&!e.iconShape)return Promise.resolve(E({kind:"Icon",image:e.iconUrl,size:p()(e.iconSize||[32]),opacity:1,rotate:0,msHeightReference:"none",msBringToFront:!0,anchor:"bottom"},e.leaderLine&&{msLeaderLineColor:"#333333",msLeaderLineOpacity:1,msLeaderLineWidth:1}));if(_(e))return Promise.resolve({kind:"Icon",image:h.Z.extraMarkers.markerToDataUrl(e),size:45,opacity:1,rotate:0,msHeightReference:"none",msBringToFront:!0});if(R(e)){var i=q(V(e));return(null!=i&&i.symbolUrlCustomized?Promise.resolve(null==i?void 0:i.symbolUrlCustomized):K(e,e.symbolUrl||e.symbolUrlCustomized)).then((function(t){return{kind:"Icon",image:t,size:e.size,opacity:1,rotate:0,msHeightReference:"none",msBringToFront:!0}})).catch((function(){return{}}))}return D(e)||"Circle Style"===e.title||x(e)?Promise.resolve({kind:"Fill",color:e.fillColor,opacity:e.fillOpacity,fillOpacity:e.fillOpacity,outlineColor:e.color,outlineOpacity:e.opacity,outlineWidth:e.weight}):A(e)?Promise.resolve(E({kind:"Line",color:e.color,opacity:e.opacity,width:e.weight},(null==e?void 0:e.dashArray)&&{dasharray:e.dashArray.map((function(e){return parseFloat(e)}))})):Promise.resolve({})}function $(e){var t,r,n,o=T((null==e?void 0:e.features)||[]);if(o.find((function(e){var t;return!l()((null==e?void 0:e.style)||{})&&(null==e||null===(t=e.properties)||void 0===t?void 0:t.id)}))){var i=o.filter((function(e){var t;return(null==e?void 0:e.style)&&(null==e||null===(t=e.properties)||void 0===t?void 0:t.id)}));return Promise.all(a()(i.map((function(e){return s()(e.style).map((function(t){return J(t,e).then((function(t){return{symbolizer:t,filter:["==","id",e.properties.id]}}))}))})))).then((function(e){return{format:"geostyler",body:{name:"",rules:e.map((function(e){return{name:"",filter:e.filter,symbolizers:[e.symbolizer]}}))},metadata:{editorType:"visual"}}}))}return l()(e.style)||null!=e&&null!==(t=e.style)&&void 0!==t&&t.format||null!=e&&null!==(r=e.style)&&void 0!==r&&r.body?Promise.resolve(e.style):Promise.all((n=s()(e.style),a()(n.map((function(e){var t,r,n,o,i,a,c,l,u;return[].concat(w(I(e,["iconUrl"])?[{iconAnchor:e.iconAnchor,iconSize:e.iconSize,iconUrl:e.iconUrl,popupAnchor:e.popupAnchor,shadowSize:e.shadowSize,shadowUrl:e.shadowUrl}]:[]),w(x(e)&&e.radius?[{symbolizerKind:"Mark",fillColor:e.fillColor,fillOpacity:null!==(t=e.fillOpacity)&&void 0!==t?t:1,color:e.color,opacity:null!==(r=e.opacity)&&void 0!==r?r:1,weight:null!==(n=e.weight)&&void 0!==n?n:1,radius:null!==(o=e.radius)&&void 0!==o?o:10}]:[]),w(A(e)?[{color:e.color,opacity:null!==(i=e.opacity)&&void 0!==i?i:1,weight:null!==(a=e.weight)&&void 0!==a?a:1,dashArray:e.dashArray}]:[]),w(x(e)?[{fillColor:e.fillColor,fillOpacity:null!==(c=e.fillOpacity)&&void 0!==c?c:1,color:e.color,opacity:null!==(l=e.opacity)&&void 0!==l?l:1,weight:null!==(u=e.weight)&&void 0!==u?u:1}]:[]))})))).map((function(e){return J(e)}))).then((function(t){var r={point:["Mark","Icon","Text"],linestring:["Line"],polygon:["Fill"]};return{format:"geostyler",body:{name:"",rules:t.filter((function(t){var n=t.kind;return!r[e.geometryType]||r[e.geometryType].includes(n)})).map((function(e){return{name:"",symbolizers:[e]}}))},metadata:{editorType:"visual"}}}))}function ee(e,t){var r=e.style,n=e.features,o=r||{},i=o.format,a=void 0===i?"geostyler":i,c=o.body;return a&&c?"geostyler"===a?X(t).then((function(e){return e.writeStyle(c)})):Promise.all([X(a),X(t)]).then((function(e){var t,r,o=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||S(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return i.readStyle(c).then((function(e){return a.writeStyle(e,{features:n})}))})):Promise.resolve(null)}},577215:(e,t,r)=>{"use strict";r.d(t,{oL:()=>m,F0:()=>b,cP:()=>v,Br:()=>g,rD:()=>h});var n=r(944908),o=r.n(n),i=r(513218),a=r.n(i),c=r(984596),l=r.n(c),u=r(125376),s=r(916651);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==f(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=["image/png","image/gif","image/jpeg","image/png8","image/png; mode=8bit","image/png; mode=24bit","image/vnd.jpeg-png","image/vnd.jpeg-png8"],m=function(){return o()(Object.values((0,u.eq)()))},b=function(e){return y.includes(e)},v=function(e){return m().includes(e)},g=function(e){var t,r,n,o,i;return a()(e)?{capabilities:e,description:e.Abstract,boundingBox:null!=e&&e.EX_GeographicBoundingBox?{minx:null===(t=e.EX_GeographicBoundingBox)||void 0===t?void 0:t.westBoundLongitude,miny:null===(r=e.EX_GeographicBoundingBox)||void 0===r?void 0:r.southBoundLatitude,maxx:null===(n=e.EX_GeographicBoundingBox)||void 0===n?void 0:n.eastBoundLongitude,maxy:null===(o=e.EX_GeographicBoundingBox)||void 0===o?void 0:o.northBoundLatitude}:null==e||null===(i=e.LatLonBoundingBox)||void 0===i?void 0:i.$,availableStyles:(null==e?void 0:e.Style)&&l()(e.Style).map((function(e){return d(d(d({name:e.Name},e.Title&&{title:e.Title}),e.Abstract&&{_abstract:e.Abstract}),e.LegendURL&&{legendURL:l()(e.LegendURL).map((function(e){var t,r,n,o,i,a;return d({width:null!=e&&null!==(t=e.$)&&void 0!==t&&t.width?parseFloat(e.$.width):void 0,height:null!=e&&null!==(r=e.$)&&void 0!==r&&r.height?parseFloat(e.$.height):void 0,format:null==e?void 0:e.Format},(null==e||null===(n=e.OnlineResource)||void 0===n||null===(o=n.$)||void 0===o?void 0:o["xlink:type"])&&(null==e||null===(i=e.OnlineResource)||void 0===i||null===(a=i.$)||void 0===a?void 0:a["xlink:href"])&&{onlineResource:{type:e.OnlineResource.$["xlink:type"],href:e.OnlineResource.$["xlink:href"]}})}))})}))}:{}},h=function(e){var t=e.tileGrids,r=void 0===t?[]:t,n=e.projection,o=e.tileSize,i=void 0===o?256:o;return r.find((function(e){var t,r,o;return(0,s.normalizeSRS)(e.crs)===(0,s.normalizeSRS)(n)&&!(((null===(t=e.tileSizes)||void 0===t||null===(r=t[0])||void 0===r?void 0:r[0])||(null===(o=e.tileSize)||void 0===o?void 0:o[0]))!==i)}))}},830049:(e,t,r)=>{"use strict";r.d(t,{H2:()=>w,R9:()=>S,_P:()=>E,st:()=>C,NG:()=>k,xV:()=>I,kD:()=>x,kf:()=>_,$O:()=>R,mL:()=>Z,vg:()=>L});var n=r(717621),o=r.n(n),i=r(409669),a=r.n(i),c=r(414293),l=r.n(c),u=r(513218),s=r.n(u),f=r(433506);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var d=["image"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){var n;return n=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==p(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){return["between","double2bool","in","parseBoolean","strEndsWith","strEqualsIgnoreCase","strMatches","strStartsWith"].includes(null==e?void 0:e.name)},w=function(e){return["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","modulo","pi","pow","random","rint","round","sin","sqrt","strIndexOf","strLastIndexOf","strLength","tan","toDegrees","toRadians"].includes(null==e?void 0:e.name)},S=function(e){return["numberFormat","strAbbreviate","strCapitalize","strConcat","strDefaultIfBlank","strReplace","strStripAccents","strSubstring","strSubstringStart","strToLowerCase","strToUpperCase","strTrim"].includes(null==e?void 0:e.name)},P=function(e){return["property"].includes(null==e?void 0:e.name)},j=function(e){return"attribute"===(null==e?void 0:e.type)||["msMarkerIcon"].includes(null==e?void 0:e.name)},E=function(e){return O(e)||w(e)||S(e)||P(e)||j(e)},T=function(e){return(null!=e&&e.getProperties?e.getProperties():null==e?void 0:e.properties)||{}},C={evaluateFunction:function(e,t){var r=T(t);if("property"===e.name){if(!t)throw new Error("Could not evalute 'property' function. Feature ".concat(t," is not defined."));return S(e.args[0])?r[C.evaluateStringFunction(e.args[0],t)]:r[e.args[0]]}return S(e)?C.evaluateStringFunction(e,t):w(e)?C.evaluateNumberFunction(e,t):O(e)?C.evaluateBooleanFunction(e,t):P(e)?C.evaluateUnknownFunction(e,t):j(e)?C.evaluateMapStoreFunction(e,t):null},evaluateBooleanFunction:function(e,t){var r=e.args.map((function(e){return E(e)?C.evaluateFunction(e,t):e}));switch(e.name){case"between":return r[0]>=r[1]&&r[0]<=r[2];case"double2bool":default:return!1;case"in":return r.slice(1).includes(r[0]);case"parseBoolean":return!!r[0];case"strEndsWith":return r[0].endsWith(r[1]);case"strEqualsIgnoreCase":return r[0].toLowerCase()===r[1].toLowerCase();case"strMatches":return new RegExp(r[1]).test(r[0]);case"strStartsWith":return r[0].startsWith(r[1])}},evaluateNumberFunction:function(e,t){if("pi"===e.name)return Math.PI;if("random"===e.name)return Math.random();var r=e.args.map((function(e){return E(e)?C.evaluateFunction(e,t):e}));switch(e.name){case"abs":return Math.abs(r[0]);case"acos":return Math.acos(r[0]);case"asin":return Math.asin(r[0]);case"atan":return Math.atan(r[0]);case"atan2":case"rint":default:return r[0];case"ceil":return Math.ceil(r[0]);case"cos":return Math.cos(r[0]);case"exp":return Math.exp(r[0]);case"floor":return Math.floor(r[0]);case"log":return Math.log(r[0]);case"max":return Math.max.apply(Math,v(r));case"min":return Math.min.apply(Math,v(r));case"modulo":return r[0]%r[1];case"pow":return Math.pow(r[0],r[1]);case"round":return Math.round(r[0]);case"sin":return Math.sin(r[0]);case"sqrt":return Math.sqrt(r[0]);case"strIndexOf":return r[0].indexOf(r[1]);case"strLastIndexOf":return r[0].lastIndexOf(r[1]);case"strLength":return r[0].length;case"tan":return Math.tan(r[0]);case"toDegrees":return r[0]*(180/Math.PI);case"toRadians":return r[0]*(Math.PI/180)}},evaluateUnknownFunction:function(e,t){var r=e.args.map((function(e){return E(e)?C.evaluateFunction(e,t):e})),n=T(t);return"property"===e.name?n[r[0]]:r[0]},evaluateStringFunction:function(e,t){var r,n=e.args.map((function(e){return E(e)?C.evaluateFunction(e,t):e}));switch(e.name){case"numberFormat":case"strAbbreviate":default:return n[0];case"strCapitalize":var o,i=n[0].toLowerCase().split(" "),a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=g(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(i);try{for(a.s();!(o=a.n()).done;){var c=o.value;c=c.charAt(0).toUpperCase()+c.substring(1)}}catch(e){a.e(e)}finally{a.f()}return i.join(" ");case"strConcat":return n.join();case"strDefaultIfBlank":return(null===(r=n[0])||void 0===r?void 0:r.length)<1?n[1]:n[0];case"strReplace":return!0===n[3]?n[0].replaceAll(n[1],n[2]):n[0].replace(n[1],n[2]);case"strStripAccents":return n[0].normalize("NFKD").replace(/[\u0300-\u036f]/g,"");case"strSubstring":return n[0].substring(n[1],n[2]);case"strSubstringStart":return n[0].substring(n[1]);case"strToLowerCase":return n[0].toLowerCase();case"strToUpperCase":return n[0].toUpperCase();case"strTrim":return n[0].trim()}},evaluateMapStoreFunction:function(e,t){if("attribute"===e.type)return C.evaluateFunction({name:"property",args:[e.name]},t);var r=e.args.map((function(e){return E(e)?C.evaluateFunction(e,t):e}));return"msMarkerIcon"===e.name?f.Z.markers.extra.markerToDataUrl({iconColor:r[0].color,iconShape:r[0].shape,iconGlyph:r[0].glyph}):r[0]}},k=function e(t,r){var n=T(t),o=!0,i=!1;({"&&":!0,"||":!0,"!":!0})[r[0]]&&(i=!0);try{var a,c,l;if(i)switch(r[0]){case"&&":a=!0,r.slice(1).forEach((function(r){e(t,r)||(a=!1)})),o=a;break;case"||":a=!1,r.slice(1).forEach((function(r){e(t,r)&&(a=!0)})),o=a;break;case"!":o=!undefined.geoStylerFilterToOlParserFilter(t,r[1]);break;default:throw new Error("Cannot parse Filter. Unknown combination or negation operator.")}else switch(c=E(r[1])?C.evaluateFunction(r[1],t):n[r[1]],l=E(r[2])?n[C.evaluateFunction(r[2],t)]:r[2],r[0]){case"==":o=""+c==""+l;break;case"*=":"string"==typeof l&&"string"==typeof c&&(o=!(l.length>c.length)&&-1!==c.indexOf(l));break;case"!=":o=""+c!=""+l;break;case"<":o=Number(c)<Number(l);break;case"<=":o=Number(c)<=Number(l);break;case">":o=Number(c)>Number(l);break;case">=":o=Number(c)>=Number(l);break;default:throw new Error("Cannot parse Filter. Unknown comparison operator.")}}catch(e){throw new Error("Cannot parse Filter. Invalid structure.")}return o},I=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"n.v.",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return t},o=T(e),i=t||"",a=new RegExp("\\{\\{(.*?)\\}\\}","g"),c=i.match(a);return c&&c.forEach((function(e){for(var t=0,a=0,c=Object.entries(o);a<c.length;a++){var l=(f=c[a],p=2,function(e){if(Array.isArray(e))return e}(f)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(f,p)||g(f,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],s=l[1];if(e.slice(2,e.length-2).toLowerCase()===u.toLowerCase()){i=i.replace(e,n(u,s));break}t++}var f,p;t===Object.keys(o).length&&(i=i.replace(e,r))})),i},A={},x=function(e,t){var r,n,o,i,a,c,l,u,s,f,p,d,y,m,b,v,g;return s=(n="msMarkerIcon"===(null==t||null===(r=t.image)||void 0===r?void 0:r.name)?t:e).image,f=n.color,p=n.fillOpacity,d=n.strokeColor,y=n.strokeOpacity,m=n.strokeWidth,b=n.strokeDasharray,v=n.radius,g=n.wellKnownName,s?"msMarkerIcon"===(null==s?void 0:s.name)?"msMarkerIcon:".concat(null==s||null===(o=s.args)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.color,":").concat(null==s||null===(a=s.args)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.shape,":").concat(null==s||null===(l=s.args)||void 0===l||null===(u=l[0])||void 0===u?void 0:u.glyph):s:[g,f,p,d,y,(b||[]).join("_"),m,v].join(":")},M=function(e){var t=e.image,r=x(e);return A[r]?Promise.resolve(A[r]):new Promise((function(e,n){var o=new Image,i=t;if(s()(i)&&"msMarkerIcon"===i.name)try{var a=i.args[0];i=f.Z.markers.extra.markerToDataUrl({iconColor:a.color,iconShape:a.shape,iconGlyph:a.glyph})}catch(e){n(r)}o.crossOrigin="anonymous",o.onload=function(){A[r]={id:r,image:o,src:i,width:o.naturalWidth,height:o.naturalHeight},e(A[r])},o.onerror=function(){n(r)},o.src=i}))},D=function(e,t,r,n,o){var i=n*o/2,a=n/2;e.moveTo(t-i,r-a),e.lineTo(t+i,r-a),e.lineTo(t+i,r-i),e.lineTo(t+a,r-i),e.lineTo(t+a,r+i),e.lineTo(t+i,r+i),e.lineTo(t+i,r+a),e.lineTo(t-i,r+a),e.lineTo(t-i,r+i),e.lineTo(t-a,r+i),e.lineTo(t-a,r-i),e.lineTo(t-i,r-i),e.closePath()},_=function(e){var t=x(e);if(A[t]){var r=A[t],n=r.image;return m(m({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,d)),{},{canvas:n})}var i=!(null==e||!e.strokeWidth||null==e||!e.strokeOpacity),a=!(null==e||!e.fillOpacity||(e.wellKnownName||"").includes("shape://")),c=document.createElement("canvas"),l=c.getContext("2d"),u=e.radius,s=i?e.strokeWidth/2:4,f=s,p=s,y=u+s,b=u+s,v=2*e.radius,g=2*e.radius;if(c.setAttribute("width",v+2*s),c.setAttribute("height",g+2*s),a){var h=o()(e.color);h.setAlpha(e.fillOpacity),l.fillStyle=h.toRgbString()}if(i){var O=o()(e.strokeColor);O.setAlpha(e.strokeOpacity),l.strokeStyle=O.toRgbString(),l.lineWidth=e.strokeWidth,l.lineJoin="round",l.lineCap="round",e.strokeDasharray&&l.setLineDash(e.strokeDasharray)}switch(e.wellKnownName){case"Circle":default:l.arc(y,b,u,0,2*Math.PI);break;case"Square":l.rect(f,p,v,g);break;case"Triangle":var w=Math.sqrt(3)*u,S=w/3,P=(g-w)/2;l.moveTo(y,b+P-2*S),l.lineTo(y+u,b+P+S),l.lineTo(y-u,b+P+S),l.closePath();break;case"Star":!function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=Math.PI/2*3,c=t,l=r,u=Math.PI/n;e.moveTo(t,r-o);for(var s=0;s<n;s++)c=t+Math.cos(a)*o,l=r+Math.sin(a)*o,e.lineTo(c,l),a+=u,c=t+Math.cos(a)*i,l=r+Math.sin(a)*i,e.lineTo(c,l),a+=u;e.lineTo(t,r-o),e.closePath()}(l,y,b,5,u,u/2);break;case"Cross":D(l,y,b,2*u,.2);break;case"X":l.translate(y,b),l.rotate(45*Math.PI/180),l.translate(-y,-b),D(l,y,b,2*u,.2);break;case"shape://vertline":l.moveTo(y,p),l.lineTo(y,g),l.closePath();break;case"shape://horline":l.moveTo(f,b),l.lineTo(v,b),l.closePath();break;case"shape://slash":l.translate(y,b),l.rotate(45*Math.PI/180),l.translate(-y,-b),l.moveTo(y,p),l.lineTo(y,g),l.closePath();break;case"shape://backslash":l.translate(y,b),l.rotate(-45*Math.PI/180),l.translate(-y,-b),l.moveTo(y,p),l.lineTo(y,g);break;case"shape://dot":l.moveTo(y-1,b-1),l.lineTo(y+1,b+1),l.closePath();break;case"shape://plus":l.moveTo(y,p),l.lineTo(y,g),l.moveTo(f,b),l.lineTo(v,b),l.closePath();break;case"shape://times":l.translate(y,b),l.rotate(45*Math.PI/180),l.translate(-y,-b),l.moveTo(y,p),l.lineTo(y,g),l.moveTo(f,b),l.lineTo(v,b),l.closePath();break;case"shape://oarrow":l.moveTo(f,p),l.lineTo(v,b),l.lineTo(f,g);break;case"shape://carrow":l.moveTo(f,p),l.lineTo(v,b),l.lineTo(f,g),l.closePath()}return a&&l.fill(),i&&l.stroke(),{width:v,height:g,canvas:c}},R=function(e){var t=x(e);return A[t]?Promise.resolve(A[t]):new Promise((function(r,n){var o,i,c,u;if(null!==(o=document)&&void 0!==o&&o.createElement||n(t),null!=e&&null!==(i=e.wellKnownName)&&void 0!==i&&i.includes(".svg"))(c=e.wellKnownName,u={fillColor:e.color,fillOpacity:e.fillOpacity,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWidth:e.strokeWidth,strokeDasharray:e.strokeDasharray,size:2*e.radius},new Promise((function(e,t){a().get(c,{"Content-Type":"image/svg+xml;charset=utf-8"}).then((function(r){var n,o=window.URL||window.webkitURL||window,i=(new DOMParser).parseFromString(r.data,"image/svg+xml").firstElementChild,a=u.size||32,c=null!==(n=u.strokeWidth)&&void 0!==n?n:1,s=a+c,f=a+c;i.setAttribute("fill",u.fillColor||"#FFCC33"),i.setAttribute("fill-opacity",l()(u.fillOpacity)?.2:u.fillOpacity),i.setAttribute("stroke",u.strokeColor||"#FFCC33"),i.setAttribute("stroke-opacity",l()(u.strokeOpacity)?1:u.strokeOpacity),i.setAttribute("stroke-width",c),i.setAttribute("width",s),i.setAttribute("height",f),i.setAttribute("stroke-dasharray",u.strokeDasharray||"none");var p=document.createElement("div");p.appendChild(i);var d=new Blob([p.innerHTML],{type:"image/svg+xml;charset=utf-8"}),y=o.createObjectURL(d),m=new Image;m.onload=function(){try{var r=document.createElement("canvas");r.width=s,r.height=f,r.getContext("2d").drawImage(m,r.width/2-m.width/2,r.height/2-m.height/2),e({width:s,height:f,canvas:r})}catch(e){t(e)}},m.onerror=function(e){t(e)},m.src=y})).catch((function(e){t(e)}))}))).then((function(e){var n=e.width,o=e.height,i=e.canvas;A[t]={id:t,image:i,src:i.toDataURL(),width:n,height:o},r(A[t])})).catch((function(){n(t)}));else{var s=_(e),f=s.width,p=s.height,d=s.canvas;A[t]={id:t,image:d,src:d.toDataURL(),width:f,height:p},r(A[t])}}))},Z=function(e,t){return e?Object.keys(e).reduce((function(r,n){return m(m({},r),{},b({},n,E(e[n])?C.evaluateFunction(e[n],t):e[n]))}),{}):{}},F=!1,L=function(e,t){var n=(e||{}).rules,o=(void 0===n?[]:n).reduce((function(e,r){var n=((null==r?void 0:r.symbolizers)||[]).filter((function(e){var t=e.kind;return["Mark","Icon"].includes(t)}));if(!n.some((function(e){return Object.keys(e).some((function(t){var r;return!(null===(r=e[t])||void 0===r||!r.name)}))})))return[].concat(v(e),v(n));var o=t.features||[],i=void 0===r.filter?o:o.filter((function(e){return k(e,r.filter)}));return[].concat(v(e),v(n.reduce((function(e,t){return[].concat(v(e),v((i||[]).map((function(e){var r;return m(m({},Z(t,e)),"msMarkerIcon"===(null==t||null===(r=t.image)||void 0===r?void 0:r.name)&&{image:t.image})}))))}),[])))}),[]),i=o.filter((function(e){return"Mark"===e.kind})),a=o.filter((function(e){return"Icon"===e.kind}));return(F?Promise.resolve():r.e(50957).then(r.bind(r,950957)).then((function(){return document.fonts.load("1rem FontAwesome").then((function(){return F=!0}))}))).then((function(){return new Promise((function(e){i.length>0||a.length>0?Promise.all([].concat(v(i.map(R)),v(a.map(M)))).then((function(t){e(t)})):e([])}))}))}},161253:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(923645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".msgapi .toc-title {\n    display: inline-block;\n    max-width: 150px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n",""]);const i=o},683255:(e,t,r)=>{e.exports=r.p+"grid.svg"},911636:(e,t,r)=>{e.exports=r.p+"world.svg"},570898:(e,t,r)=>{e.exports=r.p+"symbolMissing.svg"},773723:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/geostory/contents/carousel/img/default.jpg"},875492:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png"},51205:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII="},494956:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/mapcontrols/annotations/img/markers_default.png"},673866:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAqCAYAAACk2+sZAAABKklEQVRYw+2Uy2rDMBREz42c0rShtAQKpf//c33ZgTzs2pK6GYGSTXGaRRd3QMiWkY5mriVwuVwul8vlcrlcLpfr38jmTgghGEBKKWi+1evknBcnALMEZCCbWTSzHGPMdsFGG2AJ3KoPwEKNqkfABIxADxz1nJoZQNOiN8Cj2p3gi7MECzAB38Be3yYgzgHXG7gHnoEXYK2NFFgBTsAgh3u5PUl3Ljgo4g3wCjxoLMvJWAEntQI/lJgvARf4SlE/6b3UcCfYAfgCPoFO4/1fwFmTs6Jbanw8g5W2lduhqvmsqLP6qJ9lKyeNHLbAB/Cu51YuB31P1Rqza1zq2ANvqnWnxVu57eTwWMWar3KB6C9eq8YrAXaKutQxXv3m0pktl0hTndWxruFv+gGFtHKAG1+yCgAAAABJRU5ErkJggg=="},438097:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAYAAABqBU3hAAABIUlEQVRIS+3UsYoCMRDG8f8q+EBid5WNnc019la2Vr6Ala1g4SvY+RTXiVdcJQgHV9jJIdhKZCNx2GwyibCNW4bd+X47k6Sg4adoOJ83wNcBsz4CvoGfF4zpEzgCO1mrCmDWpsAC+Af6wD4DMQGWwBUYAF9uLQlww1vli+cMhA1vl7UuEuECqsItNgUhw22tJ4QLGANrwP657LoG4Qt3EV3g4ALMfLZAp2beMYhQuCn/B/SAk9wDQ2CTgYgN/wB+jaTqFKQi1OE+gFnXIpLC6wAaxAqYAfaoVW0hM/NH2+vuAflxTCdCd5Q3PNQBWzgHURseC4gdh+xEMFwD0CKiwrWAWER0eAoghFCFpwJ8CHV4DkAiksJzARYxL2/O+92ufW42SVMYbhcsEwAAAABJRU5ErkJgggAA"}}]);